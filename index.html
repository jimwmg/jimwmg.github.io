<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="keep fighting！">
<meta property="og:type" content="website">
<meta property="og:title" content="JiM-W">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="JiM-W">
<meta property="og:description" content="keep fighting！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JiM-W">
<meta name="twitter:description" content="keep fighting！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> JiM-W </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JiM-W</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">keep Moving</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/24/225Redux-thunk源码/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/24/225Redux-thunk源码/" itemprop="url">
                  Redux thunk源码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T12:36:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redux/" itemprop="url" rel="index">
                    <span itemprop="name">redux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-redux-thunk源码"><a href="#1-redux-thunk源码" class="headerlink" title="1 redux-thunk源码"></a>1 redux-thunk源码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"></div><div class="line">exports.__esModule = <span class="literal">true</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createThunkMiddleware</span>(<span class="params">extraArgument</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">_ref</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> dispatch = _ref.dispatch,</div><div class="line">        getState = _ref.getState;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">next</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">action</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> action === <span class="string">'function'</span>) &#123;</div><div class="line">          <span class="keyword">return</span> action(dispatch, getState, extraArgument);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> next(action);</div><div class="line">      &#125;;</div><div class="line">    &#125;;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> thunk = createThunkMiddleware();</div><div class="line">thunk.withExtraArgument = createThunkMiddleware;</div><div class="line"></div><div class="line">exports[<span class="string">'default'</span>] = thunk;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/18/222React-router-Switch-Redict/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/18/222React-router-Switch-Redict/" itemprop="url">
                  React-router Switch Redict
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-18T12:36:00+08:00">
                2017-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-Redict重定向组件"><a href="#1-Redict重定向组件" class="headerlink" title="1 Redict重定向组件"></a>1 Redict重定向组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Redirect <span class="keyword">from</span>=<span class="string">"/old-match"</span> to=<span class="string">"/will-match"</span>/&gt;</div></pre></td></tr></table></figure>
<h3 id="2-Switch组件"><a href="#2-Switch组件" class="headerlink" title="2 Switch组件"></a>2 Switch组件</h3><p><strong>用来匹配子路由中第一个匹配到的path路由组件,匹配到即停止往下进行路径的匹配</strong></p>
<p>对比一个例子</p>
<p>官网原demo代码</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;Switch&gt;</div><div class="line">  &lt;Route path="/" exact component=&#123;Home&#125;/&gt;</div><div class="line">  &lt;Redirect from="/old-match" to="/will-match"/&gt;</div><div class="line">  &lt;Route path="/will-match" component=&#123;WillMatch&#125;/&gt;</div><div class="line">  &lt;Route component=&#123;NoMatch&#125;/&gt;</div><div class="line">&lt;/Switch&gt;</div></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;Route&gt;</div><div class="line">  &lt;div&gt; </div><div class="line">    &lt;Route path="/" exact component=&#123;Home&#125;/&gt;</div><div class="line">    &lt;Redirect from="/old-match" to="/will-match"/&gt;</div><div class="line">    &lt;Route path="/will-match" component=&#123;WillMatch&#125;/&gt;</div><div class="line">    &lt;Route component=&#123;NoMatch&#125;/&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/Route&gt;</div></pre></td></tr></table></figure>
<h3 id="3-Router组件-Route组件只能有一个根子元素-而Switch组件可以有多个并列的多子组件"><a href="#3-Router组件-Route组件只能有一个根子元素-而Switch组件可以有多个并列的多子组件" class="headerlink" title="3 Router组件 Route组件只能有一个根子元素,而Switch组件可以有多个并列的多子组件,"></a>3 Router组件 Route组件只能有一个根子元素,而Switch组件可以有多个并列的多子组件,</h3><ul>
<li>Route组件作为Router的子组件时候,如果Route的path属性如果没有,那么该组件始终会匹配</li>
<li>Route组件作为作为Switch组件的时候,如果前面有匹配到的路径,那么后面的Route的路径就不会再去匹配</li>
<li>可以总结来说Switch组件会按顺序进行子组件的path进行判断,匹配到了即进行渲染,终止后续Route组件的路径匹配 ;Router组件会按顺序进行子组件的path判断,会将所有的子Route的path路径进行匹配.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  BrowserRouter <span class="keyword">as</span> Router,</div><div class="line">  Route,</div><div class="line">  Link,</div><div class="line">  Switch,</div><div class="line">  Redirect</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> NoMatchExample = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;ul&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/"&gt;Home&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/old-match"&gt;Old Match, to be redirected&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/will-match"&gt;Will Match&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/will-not-match"&gt;Will Not Match&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/also/will/not/match"&gt;Also Will Not Match&lt;/Link&gt;&lt;/li&gt;</div><div class="line">      &lt;/ul&gt;</div><div class="line">      &lt;Switch&gt;</div><div class="line">        &lt;Route path="/" exact component=&#123;Home&#125;/&gt;</div><div class="line">        &lt;Redirect from="/old-match" to="/will-match"/&gt;</div><div class="line">        &lt;Route path="/will-match" component=&#123;WillMatch&#125;/&gt;</div><div class="line">        &lt;Route component=&#123;NoMatch&#125;/&gt;</div><div class="line">      &lt;/Switch&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const Home = () =&gt; (</div><div class="line">  &lt;p&gt;</div><div class="line">    A &lt;code&gt;&amp;lt;Switch&gt;&lt;/code&gt; renders the</div><div class="line">    first child &lt;code&gt;&amp;lt;Route&gt;&lt;/code&gt; that</div><div class="line">    matches. A &lt;code&gt;&amp;lt;Route&gt;&lt;/code&gt; with</div><div class="line">    no &lt;code&gt;path&lt;/code&gt; always matches.</div><div class="line">  &lt;/p&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const WillMatch = () =&gt; &lt;h3&gt;Matched!&lt;/h3&gt;</div><div class="line"></div><div class="line">const NoMatch = (&#123; location &#125;) =&gt; (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;h3&gt;No match for &lt;code&gt;&#123;location.pathname&#125;&lt;/code&gt;&lt;/h3&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div><div class="line"></div><div class="line">export default NoMatchExample</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/17/221React-router-Prompt/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/17/221React-router-Prompt/" itemprop="url">
                  React-router Prompt
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-17T12:36:00+08:00">
                2017-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-看下官方解释"><a href="#1-看下官方解释" class="headerlink" title="1 看下官方解释"></a>1 看下官方解释</h2><p>弹窗出来之后点击确定返回true,点击取消返回false.</p>
<p>Used to prompt the user before navigating away from a page. When your application enters a state that should prevent the user from navigating away (like a form is half-filled out), render a <code>&lt;Prompt&gt;</code>.</p>
<p>Prompt组件,当我们想往其他url地址跳转的时候,如果when的属性值是true,则会执行message</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">import &#123; Prompt &#125; from &apos;react-router&apos;</div><div class="line"></div><div class="line">&lt;Prompt</div><div class="line">  when=&#123;formIsHalfFilledOut&#125;</div><div class="line">  message=&quot;Are you sure you want to leave?&quot;</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
<h3 id="when-bool"><a href="#when-bool" class="headerlink" title="when: bool"></a><a href="https://reacttraining.com/core/api/Prompt/when-bool" target="_blank" rel="external">when: bool</a></h3><p>Instead of conditionally rendering a <code>&lt;Prompt&gt;</code> behind a guard, you can always render it but pass <code>when={true}</code> or <code>when={false}</code> to prevent or allow navigation accordingly.</p>
<p>粗暴点来理解,</p>
<ul>
<li>如果我们传入一个true,那么则会渲染Prompt,接着执行message函数,渲染该函数的返回值,会询问用户是否确定跳转.</li>
<li>如果传入一个false,那么就会直接跳转到我们点击的url链接,</li>
</ul>
<h3 id="message-string"><a href="#message-string" class="headerlink" title="message: string"></a><a href="https://reacttraining.com/core/api/Prompt/message-string" target="_blank" rel="external">message: string</a></h3><p>The message to prompt the user with when they try to navigate away.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Prompt message=&quot;Are you sure you want to leave?&quot;/&gt;</div></pre></td></tr></table></figure>
<h3 id="message-func"><a href="#message-func" class="headerlink" title="message: func"></a><a href="https://reacttraining.com/core/api/Prompt/message-func" target="_blank" rel="external">message: func</a></h3><p>Will be called with the next <code>location</code> and <code>action</code> the user is attempting to navigate to. </p>
<ul>
<li>Return a string to show a prompt to the user   此时如果用户点击确定,则返回true,允许跳转</li>
<li><strong>or <code>true</code> to allow the transition.</strong></li>
<li>传入message函数的变量是<strong>下一个location</strong>对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;Prompt message=&#123;location =&gt; (</div><div class="line">  `Are you sure you want to go to $&#123;location.pathname&#125;?`</div><div class="line">)&#125;/&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;Prompt</div><div class="line">  when=&#123;isBlocking&#125;</div><div class="line">  message=&#123;location =&gt; (</div><div class="line">  true</div><div class="line">  )&#125;</div><div class="line">/&gt;</div></pre></td></tr></table></figure>
<h2 id="2-官方demo改动理解"><a href="#2-官方demo改动理解" class="headerlink" title="2 官方demo改动理解"></a>2 官方demo改动理解</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;Prompt</div><div class="line">         when=&#123;false&#125;</div><div class="line">         message=&#123;location =&gt; &#123;</div><div class="line"></div><div class="line">           console.log(&#123;isBlocking&#125;)</div><div class="line">           return  `Are you sure you want to go to $&#123;location.pathname&#125;`</div><div class="line">         &#125;&#125;</div><div class="line">       /&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;Prompt</div><div class="line">         when=&#123;true&#125;</div><div class="line">         message=&#123;location =&gt; &#123;</div><div class="line"></div><div class="line">           console.log(&#123;isBlocking&#125;)</div><div class="line">           return  `Are you sure you want to go to $&#123;location.pathname&#125;`</div><div class="line">         &#125;&#125;</div><div class="line">       /&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;Prompt</div><div class="line">        when=&#123;true&#125;</div><div class="line">        message=&apos;are you sure ? dearling&apos;</div><div class="line">      /&gt;</div></pre></td></tr></table></figure>
<h2 id="3-官方demo如下"><a href="#3-官方demo如下" class="headerlink" title="3 官方demo如下"></a>3 官方demo如下</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  BrowserRouter <span class="keyword">as</span> Router,</div><div class="line">  Route,</div><div class="line">  Link,</div><div class="line">  Prompt</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> PreventingTransitionsExample = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;ul&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/"&gt;Form&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/one"&gt;One&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/two"&gt;Two&lt;/Link&gt;&lt;/li&gt;</div><div class="line">      &lt;/ul&gt;</div><div class="line">      &lt;Route path="/" exact component=&#123;Form&#125;/&gt;</div><div class="line">      &lt;Route path="/one" render=&#123;() =&gt; &lt;h3&gt;One&lt;/h3&gt;&#125;/&gt;</div><div class="line">      &lt;Route path="/two" render=&#123;() =&gt; &lt;h3&gt;Two&lt;/h3&gt;&#125;/&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">)</div><div class="line"></div><div class="line">class Form extends React.Component &#123;</div><div class="line">  state = &#123;</div><div class="line">    isBlocking: false</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    const &#123; isBlocking &#125; = this.state  //对象的结构赋值</div><div class="line">//等价于 const isBlocking = this.state.isBlocking</div><div class="line">    return (</div><div class="line">      &lt;form</div><div class="line">        onSubmit=&#123;event =&gt; &#123;</div><div class="line">            console.log('button is pressed');</div><div class="line">            </div><div class="line">          event.preventDefault()</div><div class="line">          event.target.reset()</div><div class="line">          this.setState(&#123;</div><div class="line">            isBlocking: false</div><div class="line">          &#125;)</div><div class="line">        &#125;&#125;</div><div class="line">      &gt;</div><div class="line">        &lt;Prompt</div><div class="line">          when=&#123;isBlocking&#125;</div><div class="line">          message=&#123;location =&gt; (</div><div class="line">            `Are you sure you want to go to $&#123;location.pathname&#125;`</div><div class="line">          )&#125;</div><div class="line">        /&gt;</div><div class="line"></div><div class="line">        &lt;p&gt;</div><div class="line">          Blocking? &#123;isBlocking ? 'Yes, click a link or the back button' : 'Nope'&#125;</div><div class="line">        &lt;/p&gt;</div><div class="line"></div><div class="line">        &lt;p&gt;</div><div class="line">          &lt;input</div><div class="line">            size="50"</div><div class="line">            placeholder="type something to block transitions"</div><div class="line">            onChange=&#123;event =&gt; &#123;</div><div class="line">              this.setState(&#123;</div><div class="line">                isBlocking: event.target.value.length &gt; 0</div><div class="line">              &#125;)</div><div class="line">            &#125;&#125;</div><div class="line">          /&gt;</div><div class="line">        &lt;/p&gt;</div><div class="line"></div><div class="line">        &lt;p&gt;</div><div class="line">          &lt;button&gt;Submit to stop blocking&lt;/button&gt;</div><div class="line">        &lt;/p&gt;</div><div class="line">      &lt;/form&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default PreventingTransitionsExample</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/16/219React-router/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/16/219React-router/" itemprop="url">
                  React-router
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-16T12:36:00+08:00">
                2017-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>以下是我结合官方文档的学习笔记,文末有官方文档的链接.</p>
<h3 id="1-react-router中一个属性exact-的使用-默认是true-详见API文档解析"><a href="#1-react-router中一个属性exact-的使用-默认是true-详见API文档解析" class="headerlink" title="1 react-router中一个属性exact 的使用,默认是true,详见API文档解析"></a>1 react-router中一个属性<code>exact</code> 的使用,默认是true,详见API文档解析</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> BasicExample = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;ul&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/"&gt;Home&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/about"&gt;About&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/topics"&gt;Topics&lt;/Link&gt;&lt;/li&gt;</div><div class="line">      &lt;/ul&gt;</div><div class="line"></div><div class="line">      &lt;hr/&gt;</div><div class="line"></div><div class="line">      &lt;Route exact path="/" component=&#123;Home&#125;/&gt;</div><div class="line">      &lt;Route path="/about" component=&#123;About&#125;/&gt;</div><div class="line">      &lt;Route path="/topics" component=&#123;Topics&#125;/&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>如上,当 URL is <code>/about</code> <code>/</code>  <code>/about</code>两者都会render </p>
<p>如下所示,当url是 <code>/repo</code> 的时候  Repo 和RepoTest两者也是都会渲染.当然也可以通过设置exact属性进行精确匹配.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;Router&gt;</div><div class="line">   &lt;div&gt;</div><div class="line">     &lt;ul&gt;</div><div class="line">       &lt;li&gt;</div><div class="line">         &lt;Link to=&apos;/about&apos;&gt;About&lt;/Link&gt;</div><div class="line">       &lt;/li&gt;</div><div class="line">       &lt;li&gt;</div><div class="line">         &lt;Link to=&apos;./repo&apos;&gt;Repo&lt;/Link&gt;</div><div class="line">       &lt;/li&gt;</div><div class="line">       &lt;li&gt;</div><div class="line">         &lt;Link to=&apos;./repo/test&apos;&gt;RepoTest&lt;/Link&gt;</div><div class="line">       &lt;/li&gt;</div><div class="line">     &lt;/ul&gt;</div><div class="line">     &lt;Route exact path=&apos;/&apos; render=&#123;()=&gt;(&lt;div&gt;Welcome&lt;/div&gt;)&#125;&gt;&lt;/Route&gt;</div><div class="line">     &lt;Route path=&apos;/repo&apos; component=&#123;Repo&#125;&gt; &lt;/Route&gt;</div><div class="line">     &lt;Route path=&apos;/repo/test&apos; component=&#123;RepoTest&#125;&gt;&lt;/Route&gt;</div><div class="line">   </div><div class="line">   &lt;/div&gt;</div><div class="line"> &lt;/Router&gt;</div></pre></td></tr></table></figure>
<h3 id="2-match对象"><a href="#2-match对象" class="headerlink" title="2 match对象"></a>2 match对象</h3><p>其中path属性值就是Route组件的path属性值,url是根据地址栏动态解析的,params是解析URL地址的时候params对象</p>
<p>match对象是实时生成的,当url地址不同 的时候,match对象也会跟着变化,大家可以多点击几次,看下math对象所有的属性是什么值.</p>
<p>当url地址栏匹配到Route对应的路径的时候,组件中的match对象才存在,否则为null </p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  BrowserRouter <span class="keyword">as</span> Router,</div><div class="line">  Route,</div><div class="line">  Link</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> CustomLinkExample = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;OldSchoolMenuLink activeOnlyWhenExact=&#123;true&#125; to="/" label="Home"/&gt;</div><div class="line">      &lt;OldSchoolMenuLink to="/about" label="About"/&gt;</div><div class="line">      &lt;hr/&gt;</div><div class="line">      &lt;Route exact path="/" component=&#123;Home&#125;/&gt;</div><div class="line">      &lt;Route path="/about" component=&#123;About&#125;/&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const OldSchoolMenuLink = (&#123; label, to, activeOnlyWhenExact &#125;) =&gt; (</div><div class="line">  &lt;Route path=&#123;to&#125; exact=&#123;activeOnlyWhenExact&#125; children=&#123;(&#123; match &#125;) =&gt; &#123;</div><div class="line">    console.log(match);//对于官网的demo做了如下改动,当url路径为 / 的时候,第一个OldSchoolMenuLink组件返回的Route对象children函数中match对象存在,而第二个OldSchoolMenuLink组件返回的Route组件中的children函数中却没有match对象,为null </div><div class="line">    return (&lt;div className=&#123;match ? 'active' : ''&#125;&gt;</div><div class="line">      &#123;match ? '&gt; ' : ''&#125;&lt;Link to=&#123;to&#125;&gt;&#123;label&#125;&lt;/Link&gt;</div><div class="line">    &lt;/div&gt;)</div><div class="line">  &#125;</div><div class="line">    </div><div class="line">  &#125;/&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const Home = () =&gt; (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;h2&gt;Home&lt;/h2&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const About = () =&gt; (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;h2&gt;About&lt;/h2&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div><div class="line"></div><div class="line">export default CustomLinkExample</div></pre></td></tr></table></figure>
<p>A <code>match</code> object contains information about how a <code>&lt;Route path&gt;</code> matched the URL. <code>match</code> objects contain the following properties:</p>
<ul>
<li><code>params</code> - (object) Key/value pairs parsed from the URL corresponding to the dynamic segments of the path<ul>
<li>key值是  <code>:id</code> 之类的变量名  value 是即时匹配到的路径<strong>字符串</strong></li>
</ul>
</li>
<li><code>isExact</code> - (boolean) <code>true</code> if the entire URL was matched (no trailing characters)</li>
<li><code>path</code> - (string) The path pattern used to match. Useful for building nested <code>&lt;Route&gt;</code>s</li>
<li><code>url</code> - (string) The matched portion of the URL. Useful for building nested <code>&lt;Link&gt;</code>s</li>
</ul>
<p>You’ll have access <code>match</code> objects in various places:</p>
<ul>
<li><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md#component" target="_blank" rel="external">Route component</a> as <code>this.props.match</code></li>
<li><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md#render-func" target="_blank" rel="external">Route render</a> as <code>({ match }) =&gt; ()</code></li>
<li><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md#children-func" target="_blank" rel="external">Route children</a> as <code>({ match }) =&gt; ()</code></li>
<li><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/withRouter.md" target="_blank" rel="external">withRouter</a> as <code>this.props.match</code></li>
<li><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/matchPath.md" target="_blank" rel="external">matchPath</a> as the return value</li>
</ul>
<p>If a Route does not have a <code>path</code>, and therefore always matches, you’ll get the closest parent match. Same goes for <code>withRouter</code>.</p>
<p><code>Route</code>组件要渲染的组件component,通过Router可以向该组件传递match对象;对于官网的demo我做了一些改动,方便理解</p>
<p>通过点击不同的链接,观察地址栏和控制台的输出,应该可以有一个基础的认识.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  BrowserRouter <span class="keyword">as</span> Router,</div><div class="line">  Route,</div><div class="line">  Link</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(Route);</div><div class="line"><span class="built_in">console</span>.log(<span class="xml"><span class="tag">&lt;<span class="name">Route</span>/&gt;</span></span>);</div><div class="line"></div><div class="line"><span class="keyword">const</span> Home = <span class="function"><span class="params">()</span>=&gt;</span>(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>this is my Home<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> About = <span class="function"><span class="params">()</span>=&gt;</span>(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>this is about handsome me<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// const Topics = ()=&gt;(</span></div><div class="line"><span class="comment">//   &lt;div&gt;</span></div><div class="line"><span class="comment">//     &lt;h2&gt;this is all Topics&lt;/h2&gt;</span></div><div class="line">  </div><div class="line"><span class="comment">//   &lt;/div&gt;</span></div><div class="line"><span class="comment">// )</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> Topic = <span class="function">(<span class="params">&#123; match &#125;</span>) =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Topic'</span>,match);<span class="comment">//改动1 </span></div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;match.params.topicId&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> Topics = <span class="function">(<span class="params">&#123;match&#125;</span>)=&gt;</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Topics'</span>,match);<span class="comment">//改动2 </span></div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Topics<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span> &gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.url</span>&#125;/<span class="attr">rendering</span>`&#125;&gt;</span>Rendering with React<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.url</span>&#125;/<span class="attr">components</span>`&#125;&gt;</span>Components<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.url</span>&#125;/<span class="attr">porps</span>`&#125;&gt;</span>props<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.url</span>&#125;/<span class="attr">:topicId</span>`&#125; <span class="attr">component</span>=<span class="string">&#123;Topic&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">&#123;match.url&#125;</span> <span class="attr">render</span>=<span class="string">&#123;()</span>=&gt;</span>(<span class="tag">&lt;<span class="name">h3</span>&gt;</span>please select a topic<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>)&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> BasicExample = <span class="function"><span class="params">()</span>=&gt;</span>(</div><div class="line"> &lt;Router&gt;</div><div class="line">   &lt;div&gt; </div><div class="line">    &lt;ul&gt;</div><div class="line">      &lt;li&gt;</div><div class="line">        &lt;Link to='/'&gt;Home&lt;/Link&gt;</div><div class="line">      &lt;/li&gt;</div><div class="line">      &lt;li&gt;</div><div class="line">        &lt;Link to='/about'&gt;About&lt;/Link&gt;</div><div class="line">      &lt;/li&gt;</div><div class="line">      &lt;li&gt;</div><div class="line">        &lt;Link to='/topics'&gt;Topics&lt;/Link&gt;</div><div class="line">      &lt;/li&gt;</div><div class="line"></div><div class="line">      &lt;hr/&gt;</div><div class="line"></div><div class="line">      &lt;Route path='/' component=&#123;Home&#125;/&gt;</div><div class="line">      &lt;Route path='/about' component=&#123;About&#125;/&gt;</div><div class="line">      &lt;Route path='/topics' component=&#123;Topics&#125;/&gt;</div><div class="line">    &lt;/ul&gt;</div><div class="line">  </div><div class="line">  &lt;/div&gt;</div><div class="line"> </div><div class="line"> &lt;/Router&gt;</div><div class="line">)</div><div class="line"></div><div class="line">export default BasicExample</div></pre></td></tr></table></figure>
<h3 id="3-Router中的组件的props对象"><a href="#3-Router中的组件的props对象" class="headerlink" title="3 Router中的组件的props对象"></a>3 Router中的组件的props对象</h3><p>一般情况下,我们的组件的props属性直接通过定义可以取到,如下所示,可以通过props获取name属性的值</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(props)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line">&#125;</div><div class="line">&lt;Welcome name = <span class="string">'Jhon'</span>/&gt;</div></pre></td></tr></table></figure>
<p>当一个组件作为Route的component属性的值的时候,此时组件中的属性会多了location  history match这三个对象</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  BrowserRouter <span class="keyword">as</span> Router,</div><div class="line">  Route,</div><div class="line">  Link</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> ParamsExample = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Accounts<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/netflix"</span>&gt;</span>Netflix<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/zillow-group"</span>&gt;</span>Zillow Group<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/yahoo"</span>&gt;</span>Yahoo<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">"/modus-create"</span>&gt;</span>Modus Create<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">"/:id"</span> <span class="attr">component</span>=<span class="string">&#123;Child&#125;/</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></div><div class="line">)</div><div class="line">//改动官网的demo,便于理解</div><div class="line">const Child = (props) =&gt; &#123;</div><div class="line">  console.log(props);//此时props对象包括 &#123;location ,match,history&#125;</div><div class="line">  return (</div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ID: &#123;props.match.params.id&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  )</div><div class="line">  </div><div class="line">&#125;</div><div class="line">export default ParamsExample</div></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//官方源代码如下,两者达到的效果是一样的</span></div><div class="line"><span class="keyword">const</span> Child = <span class="function">(<span class="params">&#123; match &#125;</span>) =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ID: &#123;match.params.id&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">)</div><div class="line"><span class="comment">//这里用到了ES6中对象的解构赋值</span></div></pre></td></tr></table></figure>
<h3 id="3-withRouter-Redict"><a href="#3-withRouter-Redict" class="headerlink" title="3 withRouter Redict"></a>3 withRouter Redict</h3><p>对象的解构赋值,前面仅仅是一个标记,后面才是变量</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="keyword">var</span> name = <span class="string">'Jhon'</span></div><div class="line">  <span class="keyword">const</span> &#123;<span class="attr">com</span>:COM&#125; = &#123;<span class="attr">com</span>:name&#125; ;</div><div class="line">  <span class="built_in">console</span>.log(COM);<span class="comment">//Jhon</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>源码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> withRouter = <span class="function"><span class="keyword">function</span> <span class="title">withRouter</span>(<span class="params">Component</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> C = <span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> wrappedComponentRef = props.wrappedComponentRef,</div><div class="line">        remainingProps = _objectWithoutProperties(props, [<span class="string">'wrappedComponentRef'</span>]);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> _react2.default.createElement(_Route2.default, &#123; <span class="attr">render</span>: <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">routeComponentProps</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> _react2.default.createElement(Component, _extends(&#123;&#125;, remainingProps, routeComponentProps, &#123; <span class="attr">ref</span>: wrappedComponentRef &#125;));</div><div class="line">      &#125; &#125;);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  C.displayName = <span class="string">'withRouter('</span> + (Component.displayName || Component.name) + <span class="string">')'</span>;</div><div class="line">  C.WrappedComponent = Component;</div><div class="line">  C.propTypes = &#123;</div><div class="line">    <span class="attr">wrappedComponentRef</span>: _propTypes2.default.func</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> (<span class="number">0</span>, _hoistNonReactStatics2.default)(C, Component);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">exports.default = withRouter;</div></pre></td></tr></table></figure>
<p>学习了这么几天,我算是明白了.自己还是原来的自己,这么多年来一直没变.遇到问题总是刚正面,有时候确实很浪费时间和精力,其实有时候多看一些,多了解一些再去正面硬刚这些源码和问题,可能效率会更高.</p>
<p><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md" target="_blank" rel="external">react-routerAPI文档解析</a></p>
<p><a href="https://reacttraining.com/react-router/web/example/basic" target="_blank" rel="external">官方文档</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/16/220React-router-中的Route组件详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/16/220React-router-中的Route组件详解/" itemprop="url">
                  React-router 中的Route组件详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-16T12:36:00+08:00">
                2017-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-Route组件"><a href="#1-Route组件" class="headerlink" title="1 Route组件"></a>1 Route组件</h3><p>The Route component is perhaps the most important component in React Router to understand and learn to use well. Its most basic responsibility is to render some UI when a <a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/location.md" target="_blank" rel="external">location</a> matches the route’s <code>path</code>.</p>
<p>Consider the following code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">import &#123; BrowserRouter as Router, Route &#125; from &apos;react-router-dom&apos;</div><div class="line"></div><div class="line">&lt;Router&gt;</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;Route exact path=&quot;/&quot; component=&#123;Home&#125;/&gt;</div><div class="line">    &lt;Route path=&quot;/news&quot; component=&#123;NewsFeed&#125;/&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">&lt;/Router&gt;</div></pre></td></tr></table></figure>
<p>If the location of the app is <code>/</code> then the UI hierarchy will be something like:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">  &lt;Home/&gt;</div><div class="line">  &lt;!-- react-empty: 2 --&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<p>And if the location of the app is <code>/news</code> then the UI hierarchy will be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">  &lt;!-- react-empty: 1 --&gt;</div><div class="line">  &lt;NewsFeed/&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<p>The “react-empty” comments are just implementation details of React’s <code>null</code> rendering. But for our purposes, it is instructive. A Route is always technically “rendered” even though its rendering <code>null</code>. As soon as the app location matches the route’s path, your component will be rendered.</p>
<p>####Route render methods</p>
<p>There are 3 ways to render something with a <code>&lt;Route&gt;</code>:</p>
<ul>
<li><code>&lt;Route component /&gt;</code></li>
<li><code>&lt;Route render /&gt;</code></li>
<li><code>&lt;Route children /&gt;</code></li>
</ul>
<p>Each is useful in different circumstances. You should use only one of these props on a given <code>&lt;Route&gt;</code>. See their explanations below to understand why you have 3 options. Most of the time you’ll use <code>component</code>.</p>
<h4 id="Route-props"><a href="#Route-props" class="headerlink" title="Route props"></a>Route props</h4><p>All three <a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md#route-render-methods" target="_blank" rel="external">render methods</a> will be passed the same three route props</p>
<ul>
<li><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/match.md" target="_blank" rel="external">match</a></li>
<li><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/location.md" target="_blank" rel="external">location</a></li>
<li><a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/history.md" target="_blank" rel="external">history</a></li>
</ul>
<h4 id="component"><a href="#component" class="headerlink" title="component"></a>component</h4><p>A React component to render only when the location matches. It will be rendered with <a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md#route-props" target="_blank" rel="external">route props</a>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;/user/:username&quot; component=&#123;User&#125;/&gt;</div><div class="line"></div><div class="line">const User = (&#123; match &#125;) =&gt; &#123;</div><div class="line">  return &lt;h1&gt;Hello &#123;match.params.username&#125;!&lt;/h1&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>When you use <code>component</code> (instead of <code>render</code> or <code>children</code>, below) the router uses <a href="https://facebook.github.io/react/docs/react-api.html#createelement" target="_blank" rel="external"><code>React.createElement</code></a> to create a new <a href="https://facebook.github.io/react/docs/rendering-elements.html" target="_blank" rel="external">React element</a> from the given component. That means if you provide an inline function to the <code>component</code> attribute, you would create a new component every render. This results in the existing component unmounting and the new component mounting instead of just updating the existing component. When using an inline function for inline rendering, use the <code>render</code> or the <code>children</code> prop (below).</p>
<h4 id="render-func"><a href="#render-func" class="headerlink" title="render: func"></a>render: func</h4><p>This allows for convenient inline rendering and wrapping without the undesired remounting explained above.</p>
<p>Instead of having a new <a href="https://facebook.github.io/react/docs/rendering-elements.html" target="_blank" rel="external">React element</a> created for you using the <a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md#component-func" target="_blank" rel="external"><code>component</code></a> prop, you can pass in a function to be called when the location matches. The <code>render</code> prop receives all the same <a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md#route-props" target="_blank" rel="external">route props</a> as the <code>component</code> render prop.</p>
<p>当路径匹配到了的时候,就会执行render函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// convenient inline rendering</div><div class="line">&lt;Route path=&quot;/home&quot; render=&#123;() =&gt; &lt;div&gt;Home&lt;/div&gt;&#125;/&gt;</div><div class="line"></div><div class="line">// wrapping/composing</div><div class="line">const FadingRoute = (&#123; component: Component, ...rest &#125;) =&gt; (</div><div class="line">  &lt;Route &#123;...rest&#125; render=&#123;props =&gt; (</div><div class="line">    &lt;FadeIn&gt;</div><div class="line">      &lt;Component &#123;...props&#125;/&gt;</div><div class="line">    &lt;/FadeIn&gt;</div><div class="line">  )&#125;/&gt;</div><div class="line">)</div><div class="line"></div><div class="line">&lt;FadingRoute path=&quot;/cool&quot; component=&#123;Something&#125;/&gt;</div></pre></td></tr></table></figure>
<p><strong>Warning:</strong> <code>&lt;Route component&gt;</code> takes precendence over <code>&lt;Route render&gt;</code> so don’t use both in the same <code>&lt;Route&gt;</code>.</p>
<h4 id="children-func"><a href="#children-func" class="headerlink" title="children: func"></a>children: func</h4><p>Sometimes you need to render whether the path matches the location or not. In these cases, you can use the function <code>children</code> prop. It works exactly like <code>render</code> except that it gets called whether there is a match or not.</p>
<p>无论path是否匹配到了路径,都会渲染children</p>
<p>The <code>children</code> render prop receives all the same <a href="https://github.com/ReactTraining/react-router/blob/master/packages/react-router/docs/api/Route.md#route-props" target="_blank" rel="external">route props</a> as the <code>component</code> and <code>render</code> methods, except when a route fails to match the URL, then <code>match</code> is <code>null</code>. This allows you to dynamically adjust your UI based on whether or not the route matches. Here we’re adding an <code>active</code> class if the route matches</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;ul&gt;</div><div class="line">  &lt;ListItemLink to=&quot;/somewhere&quot;/&gt;</div><div class="line">  &lt;ListItemLink to=&quot;/somewhere-else&quot;/&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line"></div><div class="line">const ListItemLink = (&#123; to, ...rest &#125;) =&gt; (</div><div class="line">  &lt;Route path=&#123;to&#125; children=&#123;(&#123; match &#125;) =&gt; (</div><div class="line">    &lt;li className=&#123;match ? &apos;active&apos; : &apos;&apos;&#125;&gt;</div><div class="line">      &lt;Link to=&#123;to&#125; &#123;...rest&#125;/&gt;</div><div class="line">    &lt;/li&gt;</div><div class="line">  )&#125;/&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>This could also be useful for animations:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;Route children=&#123;(&#123; match, ...rest &#125;) =&gt; (</div><div class="line">  &#123;/* Animate will always render, so you can use lifecycles</div><div class="line">      to animate its child in and out */&#125;</div><div class="line">  &lt;Animate&gt;</div><div class="line">    &#123;match &amp;&amp; &lt;Something &#123;...rest&#125;/&gt;&#125;</div><div class="line">  &lt;/Animate&gt;</div><div class="line">)&#125;/&gt;</div></pre></td></tr></table></figure>
<p><strong>Warning:</strong> Both <code>&lt;Route component&gt;</code> and <code>&lt;Route render&gt;</code> take precendence over <code>&lt;Route children&gt;</code> so don’t use more than one in the same <code>&lt;Route&gt;</code>.</p>
<h4 id="path-string"><a href="#path-string" class="headerlink" title="path: string"></a>path: string</h4><p>Any valid URL path that <a href="https://www.npmjs.com/package/path-to-regexp" target="_blank" rel="external"><code>path-to-regexp</code></a> understands.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;/users/:id&quot; component=&#123;User&#125;/&gt;</div></pre></td></tr></table></figure>
<p><strong>Routes without a <code>path</code> <em>always</em> match.</strong></p>
<p>如果一个Route组件没有path属性,那么这个组件将总会被渲染.</p>
<p><strong>Route组件的path路径如果包含  :  变量,那么匹配到的所有的符合变量路径都会被渲染</strong>,如果想要保证唯一性,可以通过使用Switch组件进行匹配到一个则不进行往下匹配选择性渲染.</p>
<h4 id="exact-bool"><a href="#exact-bool" class="headerlink" title="exact: bool"></a>exact: bool</h4><p>When <code>true</code>, will only match if the path matches the <code>location.pathname</code> <em>exactly</em>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Route exact path=&quot;/one&quot; component=&#123;About&#125;/&gt;</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>path</th>
<th>location.pathname</th>
<th>exact</th>
<th>matches?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/one</code></td>
<td><code>/one/two</code></td>
<td><code>true</code></td>
<td>no</td>
</tr>
<tr>
<td><code>/one</code></td>
<td><code>/one/two</code></td>
<td><code>false</code></td>
<td>yes</td>
</tr>
</tbody>
</table>
<h4 id="strict-bool"><a href="#strict-bool" class="headerlink" title="strict: bool"></a>strict: bool</h4><p>When <code>true</code>, a <code>path</code> that has a trailing slash will only match a <code>location.pathname</code> with a trailing slash. This has no effect when there are additional URL segments in the <code>location.pathname</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Route strict path=&quot;/one/&quot; component=&#123;About&#125;/&gt;</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>path</th>
<th>location.pathname</th>
<th>matches?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/one/</code></td>
<td><code>/one</code></td>
<td>no</td>
</tr>
<tr>
<td><code>/one/</code></td>
<td><code>/one/</code></td>
<td>yes</td>
</tr>
<tr>
<td><code>/one/</code></td>
<td><code>/one/two</code></td>
<td>yes</td>
</tr>
</tbody>
</table>
<p><strong>Warning:</strong> <code>strict</code> can be used to enforce that a <code>location.pathname</code> has no trailing slash, but in order to do this both <code>strict</code>and <code>exact</code> must be <code>true</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Route exact strict path=&quot;/one&quot; component=&#123;About&#125;/&gt;</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>path</th>
<th>location.pathname</th>
<th>matches?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/one</code></td>
<td><code>/one</code></td>
<td>yes</td>
</tr>
<tr>
<td><code>/one</code></td>
<td><code>/one/</code></td>
<td>no</td>
</tr>
<tr>
<td><code>/one</code></td>
<td><code>/one/two</code></td>
<td>no</td>
</tr>
</tbody>
</table>
<h3 id="2-Demo案例"><a href="#2-Demo案例" class="headerlink" title="2 Demo案例"></a>2 Demo案例</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  BrowserRouter <span class="keyword">as</span> Router,</div><div class="line">  Route,</div><div class="line">  Link</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"><span class="keyword">const</span> Repo = <span class="function"><span class="params">()</span>=&gt;</span>(<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is Repo<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</div><div class="line"><span class="keyword">const</span> Category = <span class="function">(<span class="params">props</span>)=&gt;</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(props);</div><div class="line">  <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>this is category<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> MyTest =<span class="function"><span class="params">()</span>=&gt;</span>(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/about'</span>&gt;</span>About<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'./repo'</span>&gt;</span>Repo<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      </div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'./category'</span>&gt;</span>Category<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/about'</span> <span class="attr">render</span>=<span class="string">&#123;(props)</span>=&gt;</span>&#123;console.log(props);return (<span class="tag">&lt;<span class="name">div</span>&gt;</span>this is aabout<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)</div><div class="line">      &#125;&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/repo'</span> <span class="attr">component</span>=<span class="string">&#123;Repo&#125;</span>&gt;</span> <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/category'</span> <span class="attr">component</span>=<span class="string">&#123;Category&#125;</span>&gt;</span> <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">    </div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">children</span>=<span class="string">&#123;(props)</span>=&gt;</span>&#123;console.log(props);return (<span class="tag">&lt;<span class="name">div</span>&gt;</span>this is a component build througth children<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)</div><div class="line">      &#125;&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  </div><div class="line">  </div><div class="line">  <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></div><div class="line">)</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> MyTest</div></pre></td></tr></table></figure>
<p>Recursive递归 : match对象的使用,path就是Route组件的path值,params对象存放的是 :id 的key/value对应的值,value值是字符串,url是当前路径的url值.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;</div><div class="line">  BrowserRouter <span class="keyword">as</span> Router,</div><div class="line">  Route,</div><div class="line">  Link</div><div class="line">&#125; <span class="keyword">from</span> <span class="string">'react-router-dom'</span></div><div class="line"><span class="comment">//这个时候的UI视图就是根据数据来呈现的</span></div><div class="line"><span class="keyword">const</span> PEEPS = [</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">name</span>: <span class="string">'Michelle'</span>, <span class="attr">friends</span>: [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ] &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">'Sean'</span>, <span class="attr">friends</span>: [ <span class="number">0</span>, <span class="number">3</span> ] &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">'Kim'</span>, <span class="attr">friends</span>: [ <span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span> ], &#125;,</div><div class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">'David'</span>, <span class="attr">friends</span>: [ <span class="number">1</span>, <span class="number">2</span> ] &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">const</span> find = <span class="function">(<span class="params">id</span>) =&gt;</span> PEEPS.find( <span class="function"><span class="params">p</span>=&gt;</span>p.id == id )</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> RecursiveExample = <span class="function"><span class="params">()</span>=&gt;</span>(</div><div class="line"></div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">Person</span> <span class="attr">match</span>=<span class="string">&#123;&#123;params:&#123;id:0&#125;,url:</span>''&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">Person</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">const</span> Person = <span class="function">(<span class="params">&#123;match&#125;</span>)=&gt;</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'match'</span>,match);</div><div class="line">  </div><div class="line">  <span class="keyword">const</span> person = find(match.params.id)</div><div class="line">  <span class="built_in">console</span>.log(person);</div><div class="line">  </div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;person.name&#125;'s friends<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        &#123;person.friends.map(id=&gt;(</div><div class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;id&#125;</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.url</span>&#125;/$&#123;<span class="attr">id</span>&#125;`&#125;&gt;</span></div><div class="line">              &#123;find(id).name&#125;</div><div class="line">            <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        ))&#125;</div><div class="line">  </div><div class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">match.url</span>&#125;/<span class="attr">:id</span>`&#125; <span class="attr">component</span>=<span class="string">&#123;Person&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  )</div><div class="line">  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> RecursiveExample</div></pre></td></tr></table></figure>
<h3 id="3-Route组件会将history-location-match这三个对象传递给component-render-以及children中的props"><a href="#3-Route组件会将history-location-match这三个对象传递给component-render-以及children中的props" class="headerlink" title="3 Route组件会将history  location   match这三个对象传递给component    render    以及children中的props"></a>3 Route组件会将history  location   match这三个对象传递给component    render    以及children中的props</h3><ul>
<li><code>&lt;Route component /&gt;</code></li>
<li><code>&lt;Route render /&gt;</code></li>
<li><code>&lt;Route children /&gt;</code></li>
</ul>
<p>这三种方式创建的组件的props属性中.</p>
<h3 id="4-Routee组件作为路由根组件需要注意两点"><a href="#4-Routee组件作为路由根组件需要注意两点" class="headerlink" title="4 Routee组件作为路由根组件需要注意两点"></a>4 Routee组件作为路由根组件需要注意两点</h3><ul>
<li>Router组件只允许有一个子元素,不允许有并行的子元素</li>
<li>Router组件可以通过history对象进行对url地址的记录.</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/15/217React-createElement/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/15/217React-createElement/" itemprop="url">
                  React createElement源码解读
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-15T12:36:00+08:00">
                2017-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-先看下大概的源码"><a href="#1-先看下大概的源码" class="headerlink" title="1  先看下大概的源码"></a>1  先看下大概的源码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ReactElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, key, ref, self, source, owner, props</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> element = &#123;</div><div class="line">    <span class="comment">// This tag allow us to uniquely identify this as a React Element</span></div><div class="line">    $$<span class="keyword">typeof</span>: REACT_ELEMENT_TYPE,</div><div class="line"></div><div class="line">    <span class="comment">// Built-in properties that belong on the element</span></div><div class="line">    type: type,</div><div class="line">    <span class="attr">key</span>: key,</div><div class="line">    <span class="attr">ref</span>: ref,</div><div class="line">    <span class="attr">props</span>: props,</div><div class="line"></div><div class="line">    <span class="comment">// Record the component responsible for creating this element.</span></div><div class="line">    _owner: owner,</div><div class="line">  &#125;;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">return</span> element;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">ReactElement.createElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, config, children</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">return</span> ReactElement(</div><div class="line">    type,</div><div class="line">    key,</div><div class="line">    ref,</div><div class="line">    self,</div><div class="line">    source,</div><div class="line">    ReactCurrentOwner.current,</div><div class="line">    props</div><div class="line">  );</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>可以看出React.createElement函数返回的是一个对象,大概是这个形式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  type,</div><div class="line">  key,</div><div class="line">  props: &#123;</div><div class="line">    children</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-我们平时进行元素渲染的时候-一般都是这么写"><a href="#2-我们平时进行元素渲染的时候-一般都是这么写" class="headerlink" title="2 我们平时进行元素渲染的时候 ,一般都是这么写"></a>2 我们平时进行元素渲染的时候 ,一般都是这么写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">React.render(</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>,</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p><strong>其实 <code>&lt;div /&gt;</code>  这样用 尖括号包起来的部分可以看做是jsx的一个语法糖,他其实是封装了React.createElement方法,注意返回值是一个javascript对象</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">React.render(</div><div class="line">    React.createElement(<span class="string">'div'</span>, <span class="literal">null</span>,</div><div class="line">        React.createElement(<span class="string">'div'</span>, <span class="literal">null</span>,</div><div class="line">            React.createElement(<span class="string">'div'</span>, <span class="literal">null</span>, <span class="string">'content'</span>)</div><div class="line">        )</div><div class="line">    ),</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>箭头函数中的运用  如果要返回一个对象,需要用 ( ) 将表达式包起来 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">const App = () =&gt; (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;AddTodo /&gt;</div><div class="line">    &lt;VisibleTodoList /&gt;</div><div class="line">    &lt;Footer /&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>如上代码 <code>&lt; &gt;</code> 包起来的jsx代码返回的是一个对象,所以该箭头函数返回的就是一个js对象</p>
<h3 id="3-React-createElement函数的参数"><a href="#3-React-createElement函数的参数" class="headerlink" title="3 React.createElement函数的参数"></a>3 React.createElement函数的参数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ReactElement.createElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, config, children</span>)</span></div></pre></td></tr></table></figure>
<p>从源码来看,我们可以看出其接受三个参数,第一个是type类型,也就是我们这个组件是一个HTML元素,还是一个函数组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(&lt;div /&gt;); //type是字符串 div </div><div class="line">//-------------------------</div><div class="line">function Welcome(props)&#123;</div><div class="line">  return &lt;h1&gt;hello &#123;props.name&#125;&lt;/h1&gt;</div><div class="line">&#125;</div><div class="line">var element = &lt;Welcome name = 'Jhon'/&gt;</div><div class="line">console.log(element);//type 是function</div></pre></td></tr></table></figure>
<p>React会根据type类型首字母判断是一个HTML元素还是一个组件函数,小写字母会被当成字符串,作为type类型,大写字母会被当成组件函数,进行递归渲染.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">type</span>: (string | ReactClass),</div><div class="line">  <span class="attr">props</span>: <span class="built_in">Object</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="4-ReactDOM-render函数"><a href="#4-ReactDOM-render函数" class="headerlink" title="4 ReactDOM.render函数"></a>4 ReactDOM.render函数</h3><p>简单理解,该函数接受两个参数,一个是要渲染的javascript对象,一个是渲染后的DOM元素要放置的位置</p>
<p>今天上班时候在地铁上看的,来到公司简单总结下.</p>
<p><a href="http://mp.weixin.qq.com/s/IC3oMQLnz7hvKaN01JS_Zw" target="_blank" rel="external">参考:前端早读课</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/12/224ImmutabaleJS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/12/224ImmutabaleJS/" itemprop="url">
                  ImmutabaleJS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-12T12:36:00+08:00">
                2017-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.w3cplus.com/javascript/immutable-js.html" target="_blank" rel="external">ImmutableAPI详解</a></p>
<p><a href="https://github.com/camsong/blog/issues/3" target="_blank" rel="external">Immutable在React中的应用</a></p>
<h2 id="1-为什么出现了Immutable-Js"><a href="#1-为什么出现了Immutable-Js" class="headerlink" title="1 为什么出现了Immutable.Js"></a>1 为什么出现了Immutable.Js</h2><p>JavaScript 中的对象一般是可变的（Mutable），因为使用了引用赋值，新的对象简单的引用了原始对象，改变新的对象将影响到原始对象。如 <code>foo={a: 1}; bar=foo; bar.a=2</code> 你会发现此时 <code>foo.a</code> 也被改成了 <code>2</code>。虽然这样做可以节约内存，但当应用复杂后，这就造成了非常大的隐患，Mutable 带来的优点变得得不偿失。为了解决这个问题，一般的做法是使用 shallowCopy（浅拷贝）或 deepCopy（深拷贝）来避免被修改，但这样做造成了 CPU 和内存的浪费。</p>
<p>同时 原来的对象的键值只能是字符串形式,而在Map数据结构中,键值可以是任何数据类型.</p>
<p>Immutable 可以很好地解决这些问题。</p>
<h3 id="1-1-什么是ImmutableData"><a href="#1-1-什么是ImmutableData" class="headerlink" title="1.1 什么是ImmutableData"></a>1.1 什么是ImmutableData</h3><p>Immutable Data 就是一旦创建，就不能再被更改的数据。对 Immutable 对象的任何修改或添加删除操作都会返回一个新的 Immutable 对象。Immutable 实现的原理是 <strong>Persistent Data Structure</strong>（持久化数据结构），也就是使用旧数据创建新数据时，要保证旧数据同时可用且不变。同时为了避免 deepCopy 把所有节点都复制一遍带来的性能损耗，Immutable 使用了 <strong>Structural Sharing</strong>（结构共享），即如果对象树中一个节点发生变化，只修改这个节点和受它影响的父节点，其它节点则进行共享</p>
<p>###1.2 ImmutableData的数据形式  <a href="http://es6.ruanyifeng.com/#docs/set-map" target="_blank" rel="external">ES6新增数据类型Map Set</a><br>Map：键值对集合，对应于 Object，ES6 也有专门的 Map 对象<br>List：有序可重复的列表，对应于 Array<br>Set：无序且不可重复的列表</p>
<p>###1.3 ImmutableJs提供的API</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">import Immutable from &apos;immutable&apos;;</div><div class="line">console.log(Immutable);</div><div class="line">//Immutable是一个对象 object,该对象由如下API接口组成</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">formJS()，将 JavaScript Object 和 Array 彻底转换为 Immutable Map 和 List</div><div class="line">is()，与 Object.is() 类似都是对值的比较，但它会将 Immutable Iterable 视为值类型数据而不是引用类型数据，如果两个 Immutable Iterable 的值相等，则返回 true。与 Object.is() 不同的是，is(0, -0) 的结果为 true</div><div class="line">List，有序索引集，类似于 JavaScript 中的 Array</div><div class="line">Map，无序 Iterable，读写 Key 的复杂度为 O(log32 N)</div><div class="line">OrderedMap，有序 Map，排序依据是数据的 set() 操作</div><div class="line">Set，元素为独一无二的集合，添加数据和判断数据是否存在的复杂度为 O(log32 N)</div><div class="line">OrderedSet，有序 Set，排序依据是数据的 add 操作。</div><div class="line">Stack，有序集合，且使用 unshift(v) 和 shift() 进行添加和删除操作的复杂度为 O(1)</div><div class="line">Range()，返回一个 Seq.Indexed 类型的数据集合，该方法接收三个参数 (start = 1, end = infinity, step = 1)，分别表示起始点、终止点和步长，如果 start 等于 end，则返回空的数据结合</div><div class="line">Repeat()，返回一个 Seq.indexed 类型的数据结合，该方法接收两个参数 (value，times)，value 表示重复生成的值，times 表示重复生成的次数，如果没有指定 times，则表示生成的 Seq 包含无限个 value</div><div class="line">Record，用于衍生新的 Record 类，进而生成 Record 实例。Record 实例类似于 JavaScript 中的 Object 实例，但只接收特定的字符串作为 key，且拥有默认值</div><div class="line">Seq，序列（may not be backed by a concrete data structure）</div><div class="line">Iterable，可以被迭代的 (Key, Value) 键值对集合，是 Immutable.js 中其他所有集合的基类，为其他所有集合提供了 基础的 Iterable 操作函数（比如 map() 和 filter）</div><div class="line">Collection，创建 Immutable 数据结构的最基础的抽象类，不能直接构造该类型</div><div class="line">著作权归作者所有。</div><div class="line">商业转载请联系作者获得授权,非商业转载请注明出处。</div><div class="line">原文: http://www.w3cplus.com/javascript/immutable-js.html © w3cplus.com</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/12/216React-Redux-Router学习路线/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/12/216React-Redux-Router学习路线/" itemprop="url">
                  React Redux Router学习路线
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-12T12:36:00+08:00">
                2017-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redux/" itemprop="url" rel="index">
                    <span itemprop="name">redux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-React-Redux-Router学习"><a href="#1-React-Redux-Router学习" class="headerlink" title="1 React Redux Router学习"></a>1 React Redux Router学习</h3><p>首先英文得要过关,因为需要看英文文档 ;</p>
<p>第一步 <a href="https://facebook.github.io/react/docs/hello-world.html" target="_blank" rel="external">react</a>      <a href="https://github.com/ruanyf/react-demos" target="_blank" rel="external">demo</a>  <a href="https://hulufei.gitbooks.io/react-tutorial/content/introduction.html" target="_blank" rel="external">react概览</a></p>
<p>第二步 <a href="http://www.redux.org.cn/docs/api/index.html" target="_blank" rel="external">redux</a>      <a href="https://github.com/happypoulp/redux-tutorial" target="_blank" rel="external">demo</a>    <a href="https://github.com/kenberkeley/redux-simple-tutorial" target="_blank" rel="external">源码实现</a></p>
<p>第三步 <a href="http://react-guide.github.io/react-router-cn/" target="_blank" rel="external">router</a>     <a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="external">demo</a>     <a href="https://github.com/ReactTraining/react-router/tree/master/packages/react-router/docs" target="_blank" rel="external">API</a></p>
<p>学习方法推荐,基础最重要,源码很重要 </p>
<ul>
<li>github上搜索  分别单独搜索  react   redux   react-router    react-redux   react-redux -router</li>
<li>google搜索  说句实话,谷歌要比百度靠谱太多,google搜索都是干货,百度甩给你的可能是bug</li>
<li>知乎搜索 react ,有一些话题以及问题会由比较好的链接</li>
</ul>
<h3 id="2-项目理解"><a href="#2-项目理解" class="headerlink" title="2 项目理解"></a>2 项目理解</h3><p><a href="https://github.com/kenberkeley/react-demo" target="_blank" rel="external">react-redux-router </a></p>
<p><a href="https://github.com/reactjs/redux" target="_blank" rel="external">react-redux</a>         <a href="http://huziketang.com/books/react/lesson1" target="_blank" rel="external">推荐:一步步实现Redux </a></p>
<p><a href="https://github.com/reactjs/react-router-tutorial/tree/master/lessons" target="_blank" rel="external">react-router</a></p>
<p><a href="https://github.com/bailicangdu/react-pxq" target="_blank" rel="external">React和redux 通过react-redux结合 </a></p>
<h3 id="3-我的博客也有一些自己学习的总结-感兴趣也可以看下"><a href="#3-我的博客也有一些自己学习的总结-感兴趣也可以看下" class="headerlink" title="3 我的博客也有一些自己学习的总结,感兴趣也可以看下."></a>3 我的博客也有一些自己学习的总结,感兴趣也可以看下.</h3><p>后期会补充,欢迎交流</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/12/223React-概览学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/12/223React-概览学习笔记/" itemprop="url">
                  React 概览学习笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-12T12:36:00+08:00">
                2017-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是一些比较碎的知识点整理,不建议大家阅读,仅仅是自己的一些总结而已</p>
<p>1 组件的props属性</p>
<ul>
<li>可以通过扩展运算符展开进行写入组件,这种方式省去了我们要一个个写属性的麻烦</li>
<li>属性键值相同的话,后面的会覆盖前面的</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> props = &#123; <span class="attr">foo</span>: <span class="string">'default'</span>,<span class="attr">bar</span>:<span class="string">'baz'</span> &#125;;</div><div class="line"><span class="keyword">var</span> component = <span class="xml"><span class="tag">&lt;<span class="name">Component</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">foo</span>=<span class="string">&#123;</span>'<span class="attr">override</span>'&#125; /&gt;</span>;</span></div><div class="line">console.log(component.props.foo); // 'override'</div></pre></td></tr></table></figure>
<p>2 组件的ref属性</p>
<ul>
<li><p>组件的ref属性可以用在DOM元素上,如果用在DOM元素上,那么该属性将会等于一个callback函数,该函数接受此DOM元素作为参数</p>
</li>
<li><p>When the <code>ref</code> attribute is used on a custom component declared as a class, the <code>ref</code>callback receives the mounted instance of the component as its argument</p>
<p>如果组件的ref属性用在class声明的组件上,那么回调函数接受的参数是实例化的组件</p>
</li>
<li><p>组件在装载或者卸载之后,ref指向的callback函数会立即执行,可以在组件中通过componentDidMount函数来进行判断</p>
</li>
<li><p>​</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/11/215Redux-Provider-Connect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/11/215Redux-Provider-Connect/" itemprop="url">
                  Redux Provider Connect
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-11T12:36:00+08:00">
                2017-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redux/" itemprop="url" rel="index">
                    <span itemprop="name">redux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我是一个不信邪的人,所以无论如何我也要把这个搞明白</p>
<p>先来看下直接在React中使用Redux</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> store = createStore(reducer)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</div><div class="line"></div><div class="line">  componentWillMount()&#123;</div><div class="line">    store.subscribe(<span class="function">(<span class="params">state</span>)=&gt;</span><span class="keyword">this</span>.setState(state))</div><div class="line">  &#125;</div><div class="line"><span class="comment">//以下在React组件中直接通过store使用Redux提供的状态管理</span></div><div class="line">  render()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Comp</span> <span class="attr">state</span>=<span class="string">&#123;this.state&#125;</span></span></span></div><div class="line">                 <span class="attr">onIncrease</span>=<span class="string">&#123;()</span>=&gt;store.dispatch(actions.increase())&#125;</div><div class="line">                 onDecrease=&#123;()=&gt;store.dispatch(actions.decrease())&#125;</div><div class="line">    /&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>那么为什么还要使用react-redux呢?</p>
<p>React推崇的是单向数据流，自上而下进行数据的传递，但是由下而上或者不在一条数据流上的组件之间的通信就会变的复杂。解决通信问题的方法很多，如果只是父子级关系，父级可以将一个回调函数当作属性传递给子级，子级可以直接调用函数从而和父级通信。</p>
<p>组件层级嵌套到比较深，<strong>可以使用上下文getChildContext来传递信息，这样在不需要将函数一层层往下传，任何一层的子级都可以通过this.context直接访问。</strong></p>
<p>兄弟关系的组件之间无法直接通信，它们只能利用同一层的上级作为中转站。而如果兄弟组件都是最高层的组件，为了能够让它们进行通信，必须在它们外层再套一层组件，这个外层的组件起着保存数据，传递信息的作用，这其实就是redux所做的事情。</p>
<p>组件之间的信息还可以通过全局事件来传递。不同页面可以通过参数传递数据，下个页面可以用location.param来获取。其实react本身很简单，难的在于如何优雅高效的实现组件之间数据的交流。</p>
<p>###1Provider核心源码 </p>
<p><strong>Provider</strong>是一个组件，它接受store作为props，然后通过context往下传，这样react中任何组件都可以通过context获取store。也就意味着我们可以在任何一个组件里利用dispatch(action)来触发reducer改变state，并用subscribe监听state的变化，然后用getState获取变化后的值。但是并不推荐这样做，它会让数据流变的混乱，过度的耦合也会影响组件的复用，维护起来也更麻烦。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Provider = <span class="function"><span class="keyword">function</span> (<span class="params">_Component</span>) </span>&#123;</div><div class="line">  _inherits(Provider, _Component);</div><div class="line"></div><div class="line">  Provider.prototype.getChildContext = <span class="function"><span class="keyword">function</span> <span class="title">getChildContext</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123; <span class="attr">store</span>: <span class="keyword">this</span>.store &#125;;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Provider</span>(<span class="params">props, context</span>) </span>&#123;</div><div class="line">    _classCallCheck(<span class="keyword">this</span>, Provider);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> _this = _possibleConstructorReturn(<span class="keyword">this</span>, _Component.call(<span class="keyword">this</span>, props, context));</div><div class="line">    <span class="comment">//这行代码是我加的测试代码,在控制台输出的就是一个Provider对象</span></div><div class="line">    <span class="built_in">console</span>.log(_this);</div><div class="line">    </div><div class="line">    _this.store = props.store;</div><div class="line">    <span class="keyword">return</span> _this;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  Provider.prototype.render = <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> _react.Children.only(<span class="keyword">this</span>.props.children);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> Provider;</div><div class="line">&#125;(_react.Component);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Provider &#123;props: Object, context: Object, refs: Object, updater: Object&#125;</div><div class="line">context:Object</div><div class="line">props:Object</div><div class="line">children:Object</div><div class="line">$$typeof:Symbol(react.element)</div><div class="line">key:null</div><div class="line">props:Object</div><div class="line">ref:null</div><div class="line">type:function App()</div><div class="line">_owner:null</div><div class="line">_store:Object</div><div class="line">_self:null</div><div class="line">_source:Object</div><div class="line">__proto__:Object</div><div class="line">store:Object</div><div class="line">__proto__:Object</div><div class="line">refs:Object</div><div class="line">state:null</div><div class="line">store:Object</div><div class="line">updater:Object</div><div class="line">_reactInternalIns</div></pre></td></tr></table></figure>
<p>使用如下:provider的主要作用就是将store作为props对象中的一个属性传递给Provider实例化的之后的对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> store = createStore(reducer)</div><div class="line"></div><div class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">FilterLink</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>此时store是Provider对象的props中的一个属性之一.</p>
<p>=========</p>
<p>after four hours  我有点信邪了  , 毕竟我是才学这个的小白.</p>
<p><code>Provider</code> 内的任何一个组件（比如这里的 <code>FilterLink</code>），如果需要使用 <code>store</code> 中的数据，就必须是「被 connect 过的」组件——使用 <code>connect</code> 方法对「你编写的组件（<code>Link</code>）」进行包装后的产物。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">const FilterLink = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(Link)</div></pre></td></tr></table></figure>
<h3 id="2-connect函数-connect-mapStateToProps-mapDispatchToProps-mergeProps"><a href="#2-connect函数-connect-mapStateToProps-mapDispatchToProps-mergeProps" class="headerlink" title="2  connect函数   connect(mapStateToProps, mapDispatchToProps, mergeProps)"></a>2  connect函数   connect(mapStateToProps, mapDispatchToProps, mergeProps)</h3><p>Connects a React component to a Redux store.</p>
<p>It does not modify the component class passed to it. Instead, it returns a new, connected component class, for you to use.</p>
<p>connect函数的主要作用是将React组件和Redux的store联系起来</p>
<p><strong>往根本去说其实是将redux的store对象中的 state  dispatch 这些属性添加(映射)到 react组件的props属性上</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(props)</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line">    &#125;</div><div class="line"> &lt;Welcome name = <span class="string">'Jhon'</span>/&gt; </div><div class="line">   <span class="comment">//一般情况下我们组件中传递props参数的时候,是通过这种方式传递的</span></div></pre></td></tr></table></figure>
<p>而connect函数的作用就是向props组件中添加属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params">mapStateToProps, mapDispatchToProps, mergeProps, options = &#123;&#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">wrapWithConnect</span>(<span class="params">WrappedComponent</span>) </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Connect</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">      <span class="keyword">constructor</span>(props, context) &#123;</div><div class="line">        <span class="comment">// 从祖先Component处获得store</span></div><div class="line">        <span class="keyword">this</span>.store = props.store || context.store</div><div class="line">        <span class="keyword">this</span>.stateProps = computeStateProps(<span class="keyword">this</span>.store, props)</div><div class="line">        <span class="keyword">this</span>.dispatchProps = computeDispatchProps(<span class="keyword">this</span>.store, props)</div><div class="line">        <span class="keyword">this</span>.state = &#123; <span class="attr">storeState</span>: <span class="literal">null</span> &#125;</div><div class="line">        <span class="comment">// 对stateProps、dispatchProps、parentProps进行合并</span></div><div class="line">        <span class="keyword">this</span>.updateState()</div><div class="line">      &#125;</div><div class="line">      shouldComponentUpdate(nextProps, nextState) &#123;</div><div class="line">        <span class="comment">// 进行判断，当数据发生改变时，Component重新渲染</span></div><div class="line">        <span class="keyword">if</span> (propsChanged || mapStateProducedChange || dispatchPropsChanged) &#123;</div><div class="line">          <span class="keyword">this</span>.updateState(nextProps)</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        componentDidMount() &#123;</div><div class="line">          <span class="comment">// 改变Component的state</span></div><div class="line">          <span class="keyword">this</span>.store.subscribe(() = &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;</div><div class="line">              <span class="attr">storeState</span>: <span class="keyword">this</span>.store.getState()</div><div class="line">            &#125;)</div><div class="line">          &#125;)</div><div class="line">        &#125;</div><div class="line">        render() &#123;</div><div class="line">          <span class="comment">// 生成包裹组件Connect</span></div><div class="line">          <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.nextState</span>&#125; /&gt;</span></span></div><div class="line">          )</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      Connect.contextTypes = &#123;</div><div class="line">        store: storeShape</div><div class="line">      &#125;</div><div class="line">      return Connect;</div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h4 id="2-1-看一个组件的声明"><a href="#2-1-看一个组件的声明" class="headerlink" title="2.1 看一个组件的声明"></a>2.1 看一个组件的声明</h4><p>Link.js  组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></div><div class="line"><span class="comment">//这里面的&#123;active,children,onClick&#125; 其实就是props,只不过是以对象的直接形式出现的,</span></div><div class="line"><span class="comment">//另外直接进行了解构赋值操作</span></div><div class="line"><span class="keyword">const</span> Link = <span class="function">(<span class="params">&#123; active, children, onClick &#125;</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (active) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span></span></span></div><div class="line">       <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt; &#123;</div><div class="line">         e.preventDefault()</div><div class="line">         onClick()</div><div class="line">       &#125;&#125;</div><div class="line">    &gt;</div><div class="line">      &#123;children&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div><div class="line"><span class="comment">//限定组件属性的数据类型</span></div><div class="line">Link.propTypes = &#123;</div><div class="line">  <span class="attr">active</span>: PropTypes.bool.isRequired,</div><div class="line">  <span class="attr">children</span>: PropTypes.node.isRequired,</div><div class="line">  <span class="attr">onClick</span>: PropTypes.func.isRequired</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'link组件'</span>,&lt;Link/&gt;);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Link</div></pre></td></tr></table></figure>
<p>为了方便大家看懂bable转码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> Link = <span class="function"><span class="keyword">function</span> <span class="title">Link</span>(<span class="params">_ref</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> active = _ref.active,</div><div class="line">      children = _ref.children,</div><div class="line">      _onClick = _ref.onClick;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (active) &#123;</div><div class="line">    <span class="keyword">return</span> React.createElement(</div><div class="line">      <span class="string">"span"</span>,</div><div class="line">      <span class="literal">null</span>,</div><div class="line">      children</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> React.createElement(</div><div class="line">    <span class="string">"a"</span>,</div><div class="line">    &#123; <span class="attr">href</span>: <span class="string">"#"</span>,</div><div class="line">      <span class="attr">onClick</span>: <span class="function"><span class="keyword">function</span> <span class="title">onClick</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">        e.preventDefault();</div><div class="line">        _onClick();</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    children</div><div class="line">  );</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="2-2-这个时候我们需要注意下-active-children-onClick-来自何方"><a href="#2-2-这个时候我们需要注意下-active-children-onClick-来自何方" class="headerlink" title="2.2 这个时候我们需要注意下{ active, children, onClick }来自何方?"></a>2.2 这个时候我们需要注意下{ active, children, onClick }来自何方?</h4><p>FilterLink.js(container容器)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; setVisibilityFilter &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'../components/Link'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, ownProps</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">active</span>: ownProps.filter === state.visibilityFilter</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch, ownProps</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">onClick</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    dispatch(setVisibilityFilter(ownProps.filter))</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Link'</span>,&lt;Link/&gt;);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> FilterLink = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(Link)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'FilterLink'</span>,&lt;FilterLink/&gt;);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> FilterLink</div></pre></td></tr></table></figure>
<ul>
<li>mapStateToProps(state,ownProps) 这个函数的作用就是将store对象中的state状态赋值给组件的props属性</li>
<li>mapDispatchToProps(dispatch, ownProps)这个函数的作用就是将store对象中dispatch方法给到props属性</li>
</ul>
<p>源码暂时没有告破</p>
<p><a href="http://taobaofed.org/blog/2016/08/18/react-redux-connect/" target="_blank" rel="external">参考</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="JiM-W" />
          <p class="site-author-name" itemprop="name">JiM-W</p>
           
              <p class="site-description motion-element" itemprop="description">keep fighting！</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">190</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">52</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">86</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JiM-W</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
