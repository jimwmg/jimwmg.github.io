<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="keep fighting！">
<meta property="og:type" content="website">
<meta property="og:title" content="JiM-W">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="JiM-W">
<meta property="og:description" content="keep fighting！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JiM-W">
<meta name="twitter:description" content="keep fighting！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/5/"/>





  <title> JiM-W </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JiM-W</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">keep Moving</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/24/193React-Router/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/24/193React-Router/" itemprop="url">
                  React Router
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-24T00:00:00+08:00">
                2017-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/21/188react-lifting-State-Up/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/21/188react-lifting-State-Up/" itemprop="url">
                  react lifting State Up
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-21T12:36:00+08:00">
                2017-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-In-React-sharing-state-is-accomplished-by-moving-it-up-to-the-closest-common-ancestor-of-the-components-that-need-it-This-is-called-“lifting-state-up”"><a href="#1-In-React-sharing-state-is-accomplished-by-moving-it-up-to-the-closest-common-ancestor-of-the-components-that-need-it-This-is-called-“lifting-state-up”" class="headerlink" title="1 In React, sharing state is accomplished by moving it up to the closest common ancestor of the components that need it. This is called “lifting state up”."></a>1 In React, sharing state is accomplished by moving it up to the closest common ancestor of the components that need it. This is called “lifting state up”.</h3><p>props应该是只读的属性，如果我们要改变输出，可以通过state属性改变；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/react.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/react-dom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../build/browser.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="xml"></span></div><div class="line"></div><div class="line">   const scaleNames = &#123;</div><div class="line">  c: 'Celsius',</div><div class="line">  f: 'Fahrenheit'</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function toCelsius(fahrenheit) &#123;</div><div class="line">  return (fahrenheit - 32) * 5 / 9;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function toFahrenheit(celsius) &#123;</div><div class="line">  return (celsius * 9 / 5) + 32;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function tryConvert(temperature, convert) &#123;</div><div class="line">  const input = parseFloat(temperature);</div><div class="line">  if (Number.isNaN(input)) &#123;</div><div class="line">    return '';</div><div class="line">  &#125;</div><div class="line">  const output = convert(input);</div><div class="line">  const rounded = Math.round(output * 1000) / 1000;</div><div class="line">  return rounded.toString();</div><div class="line">&#125;</div><div class="line"></div><div class="line">function BoilingVerdict(props) &#123;</div><div class="line">  if (props.celsius &gt;= 100) &#123;</div><div class="line">    return <span class="tag">&lt;<span class="name">p</span>&gt;</span>The water would boil.<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</div><div class="line">  &#125;</div><div class="line">  return <span class="tag">&lt;<span class="name">p</span>&gt;</span>The water would not boil.<span class="tag">&lt;/<span class="name">p</span>&gt;</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class TemperatureInput extends React.Component &#123;</div><div class="line">  constructor(props) &#123;</div><div class="line">    console.log(props)</div><div class="line">    super(props);</div><div class="line">    this.handleChange = this.handleChange.bind(this);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  handleChange(e) &#123;</div><div class="line">    this.props.onTemperatureChange(e.target.value);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    const temperature = this.props.temperature;</div><div class="line">    const scale = this.props.scale;</div><div class="line">    return (</div><div class="line">      <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">legend</span>&gt;</span>Enter temperature in &#123;scaleNames[scale]&#125;:<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;temperature&#125;</span></span></div><div class="line">               <span class="attr">onChange</span>=<span class="string">&#123;this.handleChange&#125;</span> /&gt;</div><div class="line">      <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Calculator extends React.Component &#123;</div><div class="line">  constructor(props) &#123;</div><div class="line">    console.log(props)</div><div class="line">    super(props);</div><div class="line">    this.handleCelsiusChange = this.handleCelsiusChange.bind(this);</div><div class="line">    this.handleFahrenheitChange = this.handleFahrenheitChange.bind(this);</div><div class="line">    this.state = &#123;temperature: '', scale: 'c'&#125;;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  handleCelsiusChange(temperature) &#123;</div><div class="line">    this.setState(&#123;scale: 'c', temperature&#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  handleFahrenheitChange(temperature) &#123;</div><div class="line">    this.setState(&#123;scale: 'f', temperature&#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    const scale = this.state.scale;</div><div class="line">    const temperature = this.state.temperature;</div><div class="line">    const celsius = scale === 'f' ? tryConvert(temperature, toCelsius) : temperature;</div><div class="line">    const fahrenheit = scale === 'c' ? tryConvert(temperature, toFahrenheit) : temperature;</div><div class="line"></div><div class="line">    return (</div><div class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">TemperatureInput</span></span></div><div class="line">          <span class="attr">scale</span>=<span class="string">"c"</span></div><div class="line">          <span class="attr">temperature</span>=<span class="string">&#123;celsius&#125;</span></div><div class="line">          <span class="attr">onTemperatureChange</span>=<span class="string">&#123;this.handleCelsiusChange&#125;</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">TemperatureInput</span></span></div><div class="line">          <span class="attr">scale</span>=<span class="string">"f"</span></div><div class="line">          <span class="attr">temperature</span>=<span class="string">&#123;fahrenheit&#125;</span></div><div class="line">          <span class="attr">onTemperatureChange</span>=<span class="string">&#123;this.handleFahrenheitChange&#125;</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">BoilingVerdict</span></span></div><div class="line">          <span class="attr">celsius</span>=<span class="string">&#123;parseFloat(celsius)&#125;</span> /&gt;</div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="tag">&lt;<span class="name">Calculator</span> /&gt;</span>,</div><div class="line">  document.getElementById('root')</div><div class="line">);</div><div class="line"></div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="2-props中的children"><a href="#2-props中的children" class="headerlink" title="2 props中的children"></a>2 props中的children</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="xml"></span></div><div class="line">   function FacnyBorder(props)&#123;</div><div class="line">       console.log(props);</div><div class="line">       console.log(props.children);</div><div class="line">       return (</div><div class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">&#123;</span>'<span class="attr">FancyBorder</span> <span class="attr">FancyBorder-</span>'+ <span class="attr">props.color</span>&#125;&gt;</span></div><div class="line">               &#123;props.children&#125;</div><div class="line">           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">       )</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   function WelecomeDialog(props)&#123;</div><div class="line">       console.log(props)</div><div class="line">        return (</div><div class="line">            <span class="tag">&lt;<span class="name">FacnyBorder</span> <span class="attr">color</span> = <span class="string">'blue'</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span> = <span class="string">'Dialog-title'</span>&gt;</span>welcome<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span> className = 'Dialog-message'&gt;thank you for visiting our website<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">FacnyBorder</span>&gt;</span></div><div class="line">        )</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   ReactDOM.render(</div><div class="line">       <span class="tag">&lt;<span class="name">WelecomeDialog</span> /&gt;</span>,</div><div class="line">       document.getElementById('root')</div><div class="line">   )</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>WelcomeDialog组件输出的props如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Object &#123;&#125;</div><div class="line">key:(...)</div><div class="line">ref:(...)</div><div class="line">get key:function ()</div><div class="line">get ref:function ()</div><div class="line">__proto__:Object</div></pre></td></tr></table></figure>
<p>FacnyBorder输出的props如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Object &#123;color: &quot;blue&quot;, children: Array(2)&#125;</div><div class="line">children:Array(2)</div><div class="line">color:&quot;blue&quot;</div><div class="line">key:(...)</div><div class="line">ref:(...)</div><div class="line">get key:function ()</div><div class="line">get ref:function ()</div><div class="line">__proto__:Object</div></pre></td></tr></table></figure>
<p>FacnyBorder输出的 props.children 如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[Object, Object]</div><div class="line">0:Object</div><div class="line">1:Object</div><div class="line">length:2</div></pre></td></tr></table></figure>
<p>其中 数组中的第一项展开内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$$typeof:Symbol(react.element)</div><div class="line">key:null</div><div class="line">props:Object</div><div class="line">	children:&quot;welcome&quot;</div><div class="line">	className:&quot;Dialog-title&quot;</div><div class="line">	key:(...)</div><div class="line">	ref:(...)</div><div class="line">	get key:function ()</div><div class="line">	get ref:function ()</div><div class="line">	__proto__:Object</div><div class="line">ref:null</div><div class="line">type:&quot;h1&quot;</div><div class="line">_owner:ReactCompositeComponentWrapper</div><div class="line">_store:Object</div><div class="line">_self:null</div><div class="line">_source:null</div></pre></td></tr></table></figure>
<p>其中数组第二项展开如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$$typeof:Symbol(react.element)</div><div class="line">key:null</div><div class="line">props:Object</div><div class="line">	children:&quot;thank you for visiting our website&quot;</div><div class="line">	className:&quot;Dialog-message&quot;</div><div class="line">	key:(...)</div><div class="line">	ref:(...)</div><div class="line">	get key:function ()</div><div class="line">	get ref:function ()</div><div class="line">	__proto__:Object</div><div class="line">ref:null</div><div class="line">type:&quot;p&quot;</div><div class="line">_owner:ReactCompositeComponentWrapper</div><div class="line">_store:Object</div><div class="line">_self:null</div><div class="line">_source:null&quot;</div></pre></td></tr></table></figure>
<p>同样在React中 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">React elements like &lt;Contacts /&gt; and &lt;Chat /&gt; are just objects, so you can pass them as props like any other data.</div></pre></td></tr></table></figure>
<p>还是上面的例子，我们尝试着打印出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(&lt;WelecomeDialog color = &apos;red&apos;/&gt;)</div></pre></td></tr></table></figure>
<p>输出结果如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Object &#123;$$typeof: Symbol(react.element), key: null, ref: null, props: Object, type: function…&#125;</div><div class="line">$$typeof:Symbol(react.element)</div><div class="line">key:null</div><div class="line">props:Object</div><div class="line">ref:null</div><div class="line">type:function WelecomeDialog(props)</div><div class="line">_owner:null</div><div class="line">_store:Object</div><div class="line">_self:null</div><div class="line">_source:null</div></pre></td></tr></table></figure>
<p><strong>submit</strong></p>
<p>根据以上的输出我们可以得到结论：</p>
<ul>
<li>组件上通过属性添加的数据，会绑定在props对象中</li>
<li>组件上通过子节点，比如文本节点或者元素节点添加在组件上的，会绑定到props.children对象上</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;WelecomeDialog&gt;hello&lt;/WelecomeDialog&gt; 比如中的hello文本节点</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;FacnyBorder color = &apos;blue&apos;&gt;</div><div class="line">  &lt;h1 className = &apos;Dialog-title&apos;&gt;welcome&lt;/h1&gt;</div><div class="line">  &lt;p className = &apos;Dialog-message&apos;&gt;thank you for visiting our website&lt;/p&gt;</div><div class="line">&lt;/FacnyBorder&gt;</div><div class="line">中的元素节点 h1和p</div></pre></td></tr></table></figure>
<ul>
<li>组件以标签形式显示的时候，其实也就是一个对象</li>
<li>如果想要向组件中传递参数，可以通过属性或者子节点进行传递，传递的数据可以在组件定义中的props和props.children中获取到。</li>
<li>React区分标签是一个<strong>组件</strong>还是一个<strong>HTML标签</strong>是根据标签的首字母大小写来区分的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;div /&gt;  这个就是代表HTML标签</div><div class="line">&lt;Contact /&gt; 这个就代表组件</div></pre></td></tr></table></figure>
<ul>
<li>React中无论是组件还是标签，都必须被正确的闭合 每一个标签或者组件的   /   必不可少 ;</li>
</ul>
<h3 id="3-除了通过children传递data数据，我们其实可以利用props传递组件对象"><a href="#3-除了通过children传递data数据，我们其实可以利用props传递组件对象" class="headerlink" title="3 除了通过children传递data数据，我们其实可以利用props传递组件对象"></a>3 除了通过children传递data数据，我们其实可以利用props传递组件对象</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   </div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="undefined"></span></div><div class="line">  function Contacts()&#123;</div><div class="line">      return (</div><div class="line">          &lt;div className = 'contacts'&gt;</div><div class="line">              this is contacts</div><div class="line">          &lt;/div&gt;</div><div class="line">      )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  function Chat()&#123;</div><div class="line">      return (</div><div class="line">          &lt;div className = 'chat' &gt;this is chat &lt;/div&gt;</div><div class="line">           </div><div class="line">      )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  function SplitPane(props)&#123;</div><div class="line">      console.log(props)</div><div class="line">      return(</div><div class="line">       &lt;div className = 'SplitPane'&gt;</div><div class="line">           &lt;div className = 'SplitPane-left'&gt;</div><div class="line">               &#123;props.left&#125;</div><div class="line">           &lt;/div&gt;</div><div class="line"></div><div class="line">           &lt;div className = 'SplitPane-right'&gt;</div><div class="line">               &#123;props.right&#125;</div><div class="line">           &lt;/div&gt;</div><div class="line">       &lt;/div&gt;</div><div class="line">      )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  function App(props)&#123;</div><div class="line">      return (</div><div class="line">       &lt;SplitPane left = &#123;&lt;Contacts/&gt;&#125; right = &#123;&lt;Chat/&gt;&#125; /&gt;</div><div class="line">      )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  ReactDOM.render(</div><div class="line">      &lt;App /&gt;,</div><div class="line">      document.getElementById('root')</div><div class="line">  )</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>通过以上用法，我们就可以传递多个不一样的组件，也就是可以对组件进行不一样的拼接。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/19/184reactStateAndLifeCycle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/19/184reactStateAndLifeCycle/" itemprop="url">
                  react State 和 lifeCycle
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-19T12:36:00+08:00">
                2017-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-先来看下函数定义组件"><a href="#1-先来看下函数定义组件" class="headerlink" title="1 先来看下函数定义组件"></a>1 先来看下函数定义组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="xml"></span></div><div class="line">    function Clock(props)&#123;</div><div class="line">        return (</div><div class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>it is &#123;props.date.toLocaleTimeString()&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        );</div><div class="line">    &#125;  </div><div class="line"></div><div class="line">    function tick ()&#123;</div><div class="line">        ReactDOM.render(</div><div class="line">            <span class="tag">&lt;<span class="name">Clock</span> <span class="attr">date</span> = <span class="string">&#123;new</span> <span class="attr">Date</span>()&#125;/&gt;</span>,</div><div class="line">           document.getElementById('root')</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    setInterval(tick,1000);</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>如何让Clock拥有自动更新UI的能力？就像这个样子实现功能？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Clock</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('root')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>To implement this, we need to add “state” to the <code>Clock</code> component.</p>
<p>State is similar to props, but it is private and fully controlled by the component.</p>
<p>We <a href="https://facebook.github.io/react/docs/components-and-props.html#functional-and-class-components" target="_blank" rel="external">mentioned before</a> that components defined as classes have some additional features. Local state is exactly that: a feature available only to classes.</p>
<h3 id="2-将函数定义组件的方式改为类定义组件"><a href="#2-将函数定义组件的方式改为类定义组件" class="headerlink" title="2 将函数定义组件的方式改为类定义组件"></a>2 将函数定义组件的方式改为类定义组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">class Clock extends React.Component&#123;</div><div class="line">        render()&#123;</div><div class="line">            return (</div><div class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>it is &#123;this.props.date.toLocaleTimeString()&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            );</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>2.1 如何将当前状态添加进类定义的组件？如何将 date 属性从props 对象迁移至 state对象？</p>
<ul>
<li>添加一个constructor构造函数  将date赋值给this.state </li>
<li>我们需要将this.props.date   改成  this.state.date</li>
<li>移除掉组件上的date</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">class Clock extends React.Component&#123;</div><div class="line">        constructor(props) &#123;</div><div class="line">            super(props);</div><div class="line">            this.state = &#123;date : new Date()&#125;   //第一步</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        render()&#123;</div><div class="line">            return (</div><div class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>it is &#123;this.state.date.toLocaleTimeString()&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  //第二步</div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ReactDOM.render(</div><div class="line">        <span class="tag">&lt;<span class="name">Clock</span> /&gt;</span>,   //第三步</div><div class="line">        document.getElementById('root')</div><div class="line">    )</div></pre></td></tr></table></figure>
<p>2.2 接下来就需要设定定时器，可以是组件Clock设置自己的定时器，并且可以自动更新</p>
<p>Adding Lifecycle Methods to a Class</p>
<p>In applications with many components, it’s very important to free up resources taken by the components when they are destroyed.</p>
<p>We want to <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval" target="_blank" rel="external">set up a timer</a> whenever the <code>Clock</code> is rendered to the DOM for the first time. This is called “mounting” in React.</p>
<p>We also want to <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearInterval" target="_blank" rel="external">clear that timer</a> whenever the DOM produced by the <code>Clock</code> is removed. This is called “unmounting” in React.</p>
<p><strong>We can declare special methods on the component class to run some code when a component mounts and unmounts:</strong></p>
<p>我们可以在组件上定义一些特殊的方法，当组件装配或者装卸的时候，运行某些代码</p>
<p>React有两个内置的方法 componentDidMount()   componentWillUnmount()</p>
<p>These methods are called “lifecycle hooks”.</p>
<ul>
<li>The <code>componentDidMount()</code> hook runs after the component output has been rendered to the DOM. This is a good place to set up a timer:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">componentDidMount() &#123;</div><div class="line">    <span class="keyword">this</span>.timerID = setInterval(</div><div class="line">      <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.tick(),</div><div class="line">      <span class="number">1000</span></div><div class="line">    );</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<ul>
<li>We will tear down the timer in the <code>componentWillUnmount()</code> lifecycle hook:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">componentWillUnmount() &#123;</div><div class="line">    clearInterval(<span class="keyword">this</span>.timerID);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>完整代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">        <span class="keyword">constructor</span>(props) &#123;</div><div class="line">            <span class="keyword">super</span>(props);</div><div class="line">            <span class="keyword">this</span>.state = &#123;<span class="attr">date</span> : <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        tick()&#123;</div><div class="line">            <span class="keyword">this</span>.setState(</div><div class="line">                &#123;<span class="attr">date</span>:<span class="keyword">new</span> <span class="built_in">Date</span>()&#125;</div><div class="line">            );</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        componentDidMount()&#123;</div><div class="line">            <span class="keyword">this</span>.timerID = setInterval(<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">this</span>.tick(),<span class="number">1000</span>)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        componentWillUnmount()&#123;</div><div class="line">            clearInterval(<span class="keyword">this</span>.timerID)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        </div><div class="line">        render()&#123;</div><div class="line">            <span class="keyword">return</span> (</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>it is &#123;this.state.date.toLocaleTimeString()&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ReactDOM.render(</div><div class="line">        <span class="xml"><span class="tag">&lt;<span class="name">Clock</span> /&gt;</span>,</span></div><div class="line">        document.getElementById('root')</div><div class="line">    )</div><div class="line">    </div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Let’s quickly recap what’s going on and the order in which the methods are called:</p>
<p>1) When <code>&lt;Clock /&gt;</code> is passed to <code>ReactDOM.render()</code>, React calls the constructor of the <code>Clock</code> component. Since <code>Clock</code> needs to display the current time, it initializes <code>this.state</code>with an object including the current time. We will later update this state.</p>
<p>2) React then calls the <code>Clock</code> component’s <code>render()</code> method. This is how React learns what should be displayed on the screen. React then updates the DOM to match the <code>Clock</code>‘s render output.</p>
<p>3) When the <code>Clock</code> output is inserted in the DOM, React calls the <code>componentDidMount()</code>lifecycle hook. Inside it, the <code>Clock</code> component asks the browser to set up a timer to call <code>tick()</code> once a second.</p>
<p>4) Every second the browser calls the <code>tick()</code> method. Inside it, the <code>Clock</code> component schedules a UI update by calling <code>setState()</code> with an object containing the current time. Thanks to the <code>setState()</code> call, React knows the state has changed, and calls <code>render()</code>method again to learn what should be on the screen. This time, <code>this.state.date</code> in the <code>render()</code> method will be different, and so the render output will include the updated time. React updates the DOM accordingly.</p>
<p>5) If the <code>Clock</code> component is ever removed from the DOM, React calls the <code>componentWillUnmount()</code> lifecycle hook so the timer is stopped.</p>
<h3 id="3-setState-函数"><a href="#3-setState-函数" class="headerlink" title="3 setState( )函数"></a>3 setState( )函数</h3><p>3.1 接受一个对象作为参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.setState(&#123;<span class="attr">comment</span>: <span class="string">'Hello'</span>&#125;);</div></pre></td></tr></table></figure>
<p>3.2 接受一个函数作为参数,箭头函数返回值还是一个对象,也可以直接接受一个函数，返回一个对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState, props</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">counter</span>: prevState.counter + props.increment</div><div class="line">&#125;));</div><div class="line"></div><div class="line"><span class="comment">//如果用用箭头函数自定义对象  需要用小括号将花括号包起来，这个时候返回的结果才是一个对象</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.setState(<span class="function"><span class="keyword">function</span>(<span class="params">prevState, props</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">counter</span>: prevState.counter + props.increment</div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>3.3 注意对于state和props，它们的值可能被异步更新，所以当我们计算它们的下一个状态值的时候，不能依赖它们的当前值，比如如下demo不会更新</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Wrong</span></div><div class="line"><span class="keyword">this</span>.setState(&#123;</div><div class="line">  <span class="attr">counter</span>: <span class="keyword">this</span>.state.counter + <span class="keyword">this</span>.props.increment,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CounterButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">        <span class="keyword">constructor</span>(props)&#123;</div><div class="line">            <span class="keyword">super</span>(props);</div><div class="line">            <span class="keyword">this</span>.state = &#123;<span class="attr">count</span> : <span class="number">1</span> &#125;</div><div class="line">        &#125;</div><div class="line">        render()&#123;</div><div class="line">            <span class="keyword">return</span> (</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">color</span> = <span class="string">&#123;this.props.color&#125;</span> </span></span></div><div class="line">                <span class="attr">onClick</span> = <span class="string">&#123;()</span>=&gt;this.setState(&#123;count : this.state.count++&#125;)&#125;&gt;</div><div class="line">                    count : &#123;this.state.count&#125;</div><div class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ReactDOM.render(</div><div class="line">        <span class="xml"><span class="tag">&lt;<span class="name">CounterButton</span> /&gt;</span>,</span></div><div class="line">        document.getElementById('root')</div><div class="line">    )</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Correct</span></div><div class="line"><span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState, props</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">counter</span>: prevState.counter + props.increment</div><div class="line">&#125;));</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CounterButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">        <span class="keyword">constructor</span>(props)&#123;</div><div class="line">            <span class="keyword">super</span>(props);</div><div class="line">            <span class="keyword">this</span>.state = &#123;<span class="attr">count</span> : <span class="number">1</span> &#125;</div><div class="line">        &#125;</div><div class="line">        render()&#123;</div><div class="line">            <span class="keyword">return</span> (</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">color</span> = <span class="string">&#123;this.props.color&#125;</span> </span></span></div><div class="line">                <span class="attr">onClick</span> = <span class="string">&#123;()</span> =&gt; this.setState(state=&gt;(&#123;count:state.count + 1&#125;))&#125;&gt;</div><div class="line">                    count : &#123;this.state.count&#125;</div><div class="line">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ReactDOM.render(</div><div class="line">        <span class="xml"><span class="tag">&lt;<span class="name">CounterButton</span> /&gt;</span>,</span></div><div class="line">        document.getElementById('root')</div><div class="line">    )</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>或者直接传入setState一个函数，该函数显示的返回一个对象</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CounterButton</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">        <span class="keyword">constructor</span>(props) &#123;</div><div class="line">          <span class="keyword">super</span>(props);</div><div class="line">          <span class="keyword">this</span>.state = &#123;<span class="attr">count</span>: <span class="number">1</span>&#125;;</div><div class="line">        &#125;</div><div class="line">        render() &#123;</div><div class="line">          <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">button</span></span></span></div><div class="line">              <span class="attr">color</span>=<span class="string">&#123;this.props.color&#125;</span></div><div class="line">              <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt; this.setState(function(state)&#123;</div><div class="line">                  return &#123;</div><div class="line">                      count : state.count + 1 </div><div class="line">                  &#125;</div><div class="line">              &#125;)&#125;&gt;</div><div class="line">              Count: &#123;this.state.count&#125;</div><div class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">          );</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">    ReactDOM.render(</div><div class="line">        <span class="xml"><span class="tag">&lt;<span class="name">CounterButton</span> /&gt;</span>,</span></div><div class="line">        document.getElementById('root')</div><div class="line">    )</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>以下贴上一段React中关于setstate的源码，便于理解；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">ReactComponent.prototype.setState = <span class="function"><span class="keyword">function</span>(<span class="params">partialState, callback</span>) </span>&#123;</div><div class="line">  (<span class="string">"production"</span> !== <span class="string">"development"</span> ? invariant(</div><div class="line">    <span class="keyword">typeof</span> partialState === <span class="string">'object'</span> ||</div><div class="line">    <span class="keyword">typeof</span> partialState === <span class="string">'function'</span> ||</div><div class="line">    partialState == <span class="literal">null</span>,</div><div class="line">    <span class="string">'setState(...): takes an object of state variables to update or a '</span> +</div><div class="line">    <span class="string">'function which returns an object of state variables.'</span></div><div class="line">  ) : invariant(<span class="keyword">typeof</span> partialState === <span class="string">'object'</span> ||</div><div class="line">  <span class="keyword">typeof</span> partialState === <span class="string">'function'</span> ||</div><div class="line">  partialState == <span class="literal">null</span>));</div><div class="line">  <span class="keyword">if</span> (<span class="string">"production"</span> !== <span class="string">"development"</span>) &#123;</div><div class="line">    (<span class="string">"production"</span> !== <span class="string">"development"</span> ? warning(</div><div class="line">      partialState != <span class="literal">null</span>,</div><div class="line">      <span class="string">'setState(...): You passed an undefined or null state object; '</span> +</div><div class="line">      <span class="string">'instead, use forceUpdate().'</span></div><div class="line">    ) : <span class="literal">null</span>);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>setState会自动调用render函数，触发视图的重新渲染，如果仅仅只是state数据的变化而没有调用setState，并不会触发更新。</p>
<h3 id="4-react组件生命周期"><a href="#4-react组件生命周期" class="headerlink" title="4 react组件生命周期"></a>4 react组件生命周期</h3><p>对于自定义组件，唯一必须实现的方法就是render()，除此之外，还有一些方法会在组件生命周期中被调用，如下</p>
<ul>
<li>constructor: 构造函数，组件被创建时执行；</li>
<li>componentDidMount: 当组件添加到DOM树之后执行；</li>
<li>componentWillUnmount: 当组件从DOM树中移除之后执行，在React中可以认为组件被销毁；</li>
<li>componentDidUpdate: 当组件更新时执行。</li>
<li>shouldComponentUpdate: 这是一个和性能非常相关的方法，在每一次render方法之前被调用。它提供了一个机会让你决定是否要对组件进行实际的render</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">shouldComponentUpdate(nextProps, nextState) &#123;</div><div class="line">  <span class="keyword">return</span> nextProps.id !== <span class="keyword">this</span>.props.id;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当此函数返回false时，组件就不会调用render方法从而避免了虚拟DOM的创建和内存中的Diff比较，从而有助于提高性能。当返回true时，则会进行正常的render的逻辑。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/19/185react-Event/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/19/185react-Event/" itemprop="url">
                  react Event
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-19T12:36:00+08:00">
                2017-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-Handling-events-with-React-elements-is-very-similar-to-handling-events-on-DOM-elements-There-are-some-syntactic-differences"><a href="#1-Handling-events-with-React-elements-is-very-similar-to-handling-events-on-DOM-elements-There-are-some-syntactic-differences" class="headerlink" title="1 Handling events with React elements is very similar to handling events on DOM elements. There are some syntactic differences:"></a>1 Handling events with React elements is very similar to handling events on DOM elements. There are some syntactic differences:</h3><ul>
<li>React events are named using camelCase, rather than lowercase.</li>
<li>With JSX you pass a function as the event handler, rather than a string.</li>
<li>函数的this指向null,而原先的HTML绑定时间this指向的是绑定事件的元素</li>
<li>react并不会真正的绑定事件到每一个具体的元素上，而是采用事件代理的模式：在根节点document上为每种事件添加唯一的Listener，然后通过事件对象的event.target找到真实的触发元素。这样从触发元素到顶层节点之间的所有节点如果有绑定这个事件，React都会触发对应的事件处理函数。这就是所谓的React模拟事件系统。</li>
</ul>
<p>建议先了解下箭头函数，我也有些过关于<a href="https://jimwmg.github.io/2016/12/07/117-ES6%E6%96%B0%E7%89%B9%E6%80%A7%20%20%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/" target="_blank" rel="external">箭头函数</a>的博文</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">onclick</span>=<span class="string">"console.log('The link was clicked.'); console.log(this);return false"</span>&gt;</span></div><div class="line">  Click me  </div><div class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">onclick</span>=<span class="string">"console.log('The link was clicked.');"</span>&gt;</span></div><div class="line">  Click me</div><div class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>以上：这里面的this代表的是a标签  ；可以通过return false阻止默认事件   ；事件绑定命名用小写字母</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">ActionLink</span>(<span class="params">props</span>)</span>&#123;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">HandlerClick</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">            e.preventDefault();</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>)</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">onClick</span> = <span class="string">&#123;HandlerClick&#125;</span>&gt;</span>click me react<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    ReactDOM.render(</div><div class="line">        <span class="xml"><span class="tag">&lt;<span class="name">ActionLink</span> /&gt;</span>,</span></div><div class="line">        document.getElementById('root')</div><div class="line">    )</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>以上：这里面的this代表的是null  ；不可以通过return false阻止默认事件 ，只能用e.preventDefalut()  ；事件绑定命名用驼峰命名的方式</p>
<p>以上函数声明组件等价于以下class类声明组件，重点注意this指向null,而不是元素标签,为了使handle函数内部的this不是指向null或者undefined，需要我们手动绑定这些函数执行的时候this的指向</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   </div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">   <span class="class"><span class="keyword">class</span> <span class="title">ActionLink</span>  <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">       HandlerClick(e)&#123;</div><div class="line">           e.preventDefault();</div><div class="line">           <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       render()&#123;</div><div class="line">           <span class="keyword">return</span> (</div><div class="line">               <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">onClick</span> = <span class="string">&#123;this.HandlerClick&#125;</span>&gt;</span>click me react<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></div><div class="line">           )</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   ReactDOM.render(</div><div class="line">       <span class="xml"><span class="tag">&lt;<span class="name">ActionLink</span> /&gt;</span>,</span></div><div class="line">       document.getElementById('root')</div><div class="line">   )</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>那么如何使得HandlerClick函数内部的this指向改变？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   </div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">   <span class="class"><span class="keyword">class</span> <span class="title">ActionLink</span>  <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">       <span class="keyword">constructor</span>(props)&#123;</div><div class="line">           <span class="keyword">super</span>(props);</div><div class="line">           <span class="keyword">this</span>.HandlerClick = <span class="keyword">this</span>.HandlerClick.bind(<span class="keyword">this</span>);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       HandlerClick(e)&#123;</div><div class="line">           e.preventDefault();</div><div class="line">           <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       render()&#123;</div><div class="line">           <span class="keyword">return</span> (</div><div class="line">               <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">onClick</span> = <span class="string">&#123;this.HandlerClick&#125;</span>&gt;</span>click me bind<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></div><div class="line">           )</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   ReactDOM.render(</div><div class="line">       <span class="xml"><span class="tag">&lt;<span class="name">ActionLink</span> /&gt;</span>,</span></div><div class="line">       document.getElementById('root')</div><div class="line">   )</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这个时候可以发现控制台输出的this指向的是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ActionLink &#123;props: Object, context: Object, refs: Object, updater: Object, HandlerClick: function…&#125;</div></pre></td></tr></table></figure>
<h3 id="2-接下来走一个改变this指向应用的实例"><a href="#2-接下来走一个改变this指向应用的实例" class="headerlink" title="2 接下来走一个改变this指向应用的实例"></a>2 接下来走一个改变this指向应用的实例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Toggle</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">       <span class="keyword">constructor</span>(props)&#123;</div><div class="line">           <span class="keyword">super</span>(props);</div><div class="line">           <span class="keyword">this</span>.state = &#123;<span class="attr">isToggleOn</span> : <span class="literal">true</span>&#125;;</div><div class="line">           <span class="keyword">this</span>.handlerClick = <span class="keyword">this</span>.handlerClick.bind(<span class="keyword">this</span>);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       handlerClick()&#123;</div><div class="line">           <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">           <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState</span>)=&gt;</span>(&#123;<span class="attr">isToggleOn</span> : !prevState.isToggleOn&#125;));</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       render()&#123;</div><div class="line">           <span class="keyword">return</span> (</div><div class="line">               <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span> = <span class="string">&#123;this.handlerClick&#125;</span>&gt;</span></span></div><div class="line">                   &#123;this.state.isToggleOn?'on':'off'&#125;</div><div class="line">               <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">           );</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   ReactDOM.render(</div><div class="line">       <span class="xml"><span class="tag">&lt;<span class="name">Toggle</span> /&gt;</span>,</span></div><div class="line">       document.getElementById('root')</div><div class="line">   )</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>同样使用箭头函数也可以达到类似的效果，改变render函数，一定要明确箭头函数的特性，同时()不要忘记加；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">render()&#123;</div><div class="line">           return (</div><div class="line">               <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span> = <span class="string">&#123;()</span>=&gt;</span>this.handlerClick()&#125;&gt;</div><div class="line">                   &#123;this.state.isToggleOn?'on':'off'&#125;</div><div class="line">               <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">           );</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
<p>看一下这段代码,也是通过箭头函数指定的this指向.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">import React, &#123; Component &#125; from &apos;react&apos;</div><div class="line">import PropTypes from &apos;prop-types&apos;</div><div class="line"></div><div class="line">class Counter extends Component &#123;</div><div class="line">  static propTypes = &#123;</div><div class="line">    value: PropTypes.number.isRequired,</div><div class="line">    onIncrement: PropTypes.func.isRequired,</div><div class="line">    onDecrement: PropTypes.func.isRequired</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  incrementIfOdd = () =&gt; &#123;</div><div class="line">    if (this.props.value % 2 !== 0) &#123;</div><div class="line">      this.props.onIncrement()</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  incrementAsync = () =&gt; &#123;</div><div class="line">    setTimeout(this.props.onIncrement, 1000)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    const &#123; value, onIncrement, onDecrement &#125; = this.props</div><div class="line">    return (</div><div class="line">      &lt;p&gt;</div><div class="line">        Clicked: &#123;value&#125; times</div><div class="line">        &#123;&apos; &apos;&#125;</div><div class="line">        &lt;button onClick=&#123;onIncrement&#125;&gt;</div><div class="line">          +</div><div class="line">        &lt;/button&gt;</div><div class="line">        &#123;&apos; &apos;&#125;</div><div class="line">        &lt;button onClick=&#123;onDecrement&#125;&gt;</div><div class="line">          -</div><div class="line">        &lt;/button&gt;</div><div class="line">        &#123;&apos; &apos;&#125;</div><div class="line">        &lt;button onClick=&#123;this.incrementIfOdd&#125;&gt;</div><div class="line">          Increment if odd</div><div class="line">        &lt;/button&gt;</div><div class="line">        &#123;&apos; &apos;&#125;</div><div class="line">        &lt;button onClick=&#123;this.incrementAsync&#125;&gt;</div><div class="line">          Increment async</div><div class="line">        &lt;/button&gt;</div><div class="line">      &lt;/p&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default Counter</div></pre></td></tr></table></figure>
<p>理解箭头函数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">'btn'</span> <span class="attr">value</span> = <span class="string">'button'</span>  <span class="attr">type</span>=<span class="string">"button"</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">arrow</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'this is arrow func'</span>);</div><div class="line">            </div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>).onclick = <span class="function"><span class="params">()</span>=&gt;</span>arrow()</div><div class="line">        <span class="comment">//等价于</span></div><div class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)(<span class="params"></span></span></div><div class="line">        	arrow() ;</div><div class="line">        )</div><div class="line">        //当点击按钮的时候 <span class="title">onclick</span>的事件监听函数执行,该函数执行的过程中,内部代码 <span class="title">arrow</span>(<span class="params"></span>)会执行函数<span class="title">arrow</span>，所以这就是(<span class="params"></span>)不要忘记加的原因</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>控制台输出的this都是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Toggle &#123;props: Object, handlerClick:function (),context: Object, refs: Object, updater: Object, state: Object…&#125;</div></pre></td></tr></table></figure>
<h3 id="3-使用箭头函数注意细节"><a href="#3-使用箭头函数注意细节" class="headerlink" title="3 使用箭头函数注意细节"></a>3 使用箭头函数注意细节</h3><p>但是如果使用以下写法就不会绑定this到Togglel了</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/19/187isNaN-And-NumberisNaN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/19/187isNaN-And-NumberisNaN/" itemprop="url">
                  isNaN And NumberisNaN
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-19T12:36:00+08:00">
                2017-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ES6/" itemprop="url" rel="index">
                    <span itemprop="name">ES6</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line">        //Number.isNaN() 不会进行类型转化，直接进行isNaN的判断；简而言之就是分两步</div><div class="line">        //第一步，如果传入的参数不是类型不是number直接返回 false </div><div class="line">        //第二步，如果传入的参数类型是number,判断是不是NaN，如果是返回true,否则返回false</div><div class="line">        //这里需要注意的一点是  NaN也是number类型的数据</div><div class="line">        /*</div><div class="line">        Number.isNan() does not convert the values to a Number, and will  return false for any value that is not of the type Number【</div><div class="line"></div><div class="line">If Type(number) is not Number, return false.</div><div class="line">If number is NaN, return true.</div><div class="line">Otherwise, return false.*/</div><div class="line">        console.log(Number.isNaN(1));//false</div><div class="line">        console.log(Number.isNaN('str'));//false  </div><div class="line">        console.log(Number.isNaN(NaN));//True  </div><div class="line"></div><div class="line">        //全局方法isNaN（）会先将参数转为Number 类型，在判断是否为NaN ，所以在类型转换失败或运算错误时值为NaN，返回true，其他全为false</div><div class="line"></div><div class="line">        //全局isNaN会先进行类型转化为Number类型,这个时候需要掌握Number类型转化的规则，如果转化结果是NaN，那么isNaN返回true,其他全部为false</div><div class="line"></div><div class="line">        /*</div><div class="line">        The global isNaN() function converts the tested value to a Number, then tests it.【</div><div class="line"></div><div class="line">            If value can not convert to Number, return true.</div><div class="line">            else If number arithmethic result  is NaN, return true.</div><div class="line">            Otherwise, return false.*/</div><div class="line">        console.log(isNaN('str'));//true</div><div class="line">        console.log(isNaN(1));//fasle</div><div class="line">        console.log(isNaN(undefined));//true</div><div class="line">        console.log(isNaN("Hello"));//true</div><div class="line"></div><div class="line">        /*</div><div class="line">        isNaN() 函数通常用于检测 parseFloat() 和 parseInt() 的结果，以判断它们表示的是否是合法的数字。当然也可以用 isNaN() 函数来检测算数错误，比如用 0 作除数的情况。*/</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/19/186react-Compare-Vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/19/186react-Compare-Vue/" itemprop="url">
                  react Compare Vue
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-19T12:36:00+08:00">
                2017-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/work/" itemprop="url" rel="index">
                    <span itemprop="name">work</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-react和vue优劣对比"><a href="#1-react和vue优劣对比" class="headerlink" title="1 react和vue优劣对比"></a>1 react和vue优劣对比</h3><p>1.1 react  </p>
<ul>
<li>更适合大型应用和更好的可测试性</li>
<li>Web端和移动端原生APP通用</li>
<li>更大的生态系统，更多的支持和好用的工具，大量数据渲染react优势明显</li>
<li>可以创建一个同时适用于Web端和原生APP的框架</li>
<li>react由facebook维护，并且相应的社区以及组件都比较成熟</li>
</ul>
<p>1.2 vue </p>
<ul>
<li>模板和渲染函数的弹性选择</li>
<li>简单的语法和项目配置</li>
<li>更快的渲染速度和更小的体积</li>
<li>更加适合小且快，‘简单能用’，的单页面应用程序</li>
<li>vue 不适合持续的工程迭代，因为数据可以在view和model双向流动，但是带来的一个缺点是：工程规模比较大的时候，数据双向流动会带来难以预测的结果</li>
<li>vue是尤雨溪个人开发和维护，相应 的社区和组件不够成熟</li>
</ul>
<h3 id="2-react-和-vue-技术点对比"><a href="#2-react-和-vue-技术点对比" class="headerlink" title="2 react 和 vue 技术点对比"></a>2 react 和 vue 技术点对比</h3><p>2.1 react </p>
<ul>
<li>采用ES6语法规范以及jsx语法</li>
<li>创建virtualDOM ,因为虚拟DOM是内存数据，大大提高了性能。</li>
<li>组件化的开发思路，带来了UI功能模块之间的分离</li>
<li>数据绑定: 采用单向数据流</li>
<li>React可以拓展到服务端，移动端Native部分</li>
</ul>
<p>2.2 vue</p>
<ul>
<li>采用模板语法，通过模板渲染前端页面</li>
<li>同时借鉴了angular和react,更加轻量级、简单、快捷</li>
<li>数据绑定默认单向数据流，也可以实现双向绑定</li>
<li>同样可以组件化开发，对于部署小型应用特别方便</li>
<li>Vue因为比较轻量，还能用于业务场景非常轻的页面中。</li>
</ul>
<p>### </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/18/181svn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/18/181svn/" itemprop="url">
                  svn
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-18T12:36:00+08:00">
                2017-04-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tools/" itemprop="url" rel="index">
                    <span itemprop="name">tools</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、SVN工作原理"><a href="#一、SVN工作原理" class="headerlink" title="一、SVN工作原理"></a>一、SVN工作原理</h2><p>SVN（SubVersion）的基本工作思路是这样的：在一台服务器上建立一个源代码库，库里可以存放许多不同项目的源程序，由源代码库管理员统一管理这些源程序。</p>
<p>每个用户在使用源代码库之前，首先要把源代码库里的项目文件下载到本地（Checkout），然后用户可以在本地任意修改，最后用svn命令进行提交（Commit），由svn源代码库统一管理修改;update可以更新服务器上的最新的代码；</p>
<ul>
<li><strong>SVN服务器：</strong>运行SubVersion服务的计算机，SubVersion支持Linux和Windows，更多的是安装在Linux下。SVN提供服务有两种方式（运行方式）：独立服务器和借助Apache服务器，分别使用SVN协议和Http协议。</li>
<li><strong>SVN客户端：</strong>用户通过SVN客户端同SVN服务器打交道，SVN客户端分为命令行工具和图形化工具。最流行的客户端是TortoiseSVN。也可以在Eclipse中使用SVN插件。</li>
</ul>
<h2 id="二、SubVersion的使用"><a href="#二、SubVersion的使用" class="headerlink" title="二、SubVersion的使用"></a>二、SubVersion的使用</h2><p>shift+右键   可以直接在摸个目录打开终端命令行</p>
<p><strong>1、创建SVN仓库</strong></p>
<p>1）先创建一个目录：E:\svnrepo\repoDemo1。后面就使用该目录作为SVN仓库。</p>
<p>2）创建仓库：svnadmin create E:\svnrepo\repoDemo1。</p>
<p>3）启动SVN服务：svnserve -d -r E:\svnrepo\repoDemo1，</p>
<p>这样就启动了repoDemo1这个仓库的服务（单仓库），如果在svnrepo目录下还有其他仓库，且要同时启动多个仓库，执行svnserve -d -r E:\svnrepo即可（多仓库）。</p>
<p>注：-d参数效果同于-daemon<br>-r参数效果同于-root<br>svnserve 将会在端口 3690 等待请求，-daemon（两个短横线）告诉 svnserve 以守护 进程方式运行，这样在手动终止之前不会退出。不要关闭命令行窗口，关闭窗口会把 svnserve 停止。-root设置根位置来限制服务器的访问目录，从而增加安全性和节约输入svnserve URL的时间。<br>如果不加root参数，服务url为：svn://192.168.1.188/svnrepo/repoDemo1<br>如果加上root参数，服务url为：svn://192.168.1.188/repoDemo1<br>此处的启动配置会影响服务url，如果输入url错误，会导致访问的时候出现异常。</p>
<p>一般情况下，访问SVN仓库的URL格式形如：svn://192.168.1.6/repoDemo1，但如果启动的是单仓库，则URL直接用：svn://192.168.1.6表示。svn协议的默认端口号为3690。</p>
<p><strong>2、SVN客户端操作（命令行）</strong></p>
<p><strong>重点：checkout（检出）、commit（提交）、update（更新）</strong></p>
<p>1）在E盘下建立user1、user2两个目录，模拟两个协同工作的用户的workspace。</p>
<p>2）<strong>检出：第一次</strong>和SVN服务器交互时，需要使用checkout将仓库检出到本地。</p>
<p><strong>说明：</strong>检出一次，就建立了与SVN仓库的连接。</p>
<p>3）<strong>提交：commit</strong></p>
<p>在user1目录下新建Demo1.java文件，将该文件提交到SVN仓库，提交之后，别人就可以从这个源代码库进行更新代码了</p>
<p>4）<strong>更新：update</strong></p>
<p>切换到user2的工作空间（user2目录下），user2第一次使用SVN仓库，需要检出。user2修改Demo1.java后提交。切换到user1目录，更新（update）。</p>
<p>5）启动SVN服务。这步需要在命令行中输入：svnserve -d -r E:\svnrepo</p>
<p>6）访问SVN仓库。在任意空白位置右击 — TortoiseSVN — Repo browser，URL输入：svn://192.168.1.6/repoDemo2即可浏览SVN仓库中的内容</p>
<h2 id="三、SVN的目录约定"><a href="#三、SVN的目录约定" class="headerlink" title="三、SVN的目录约定"></a>三、SVN的目录约定</h2><ul>
<li><strong>/trunck：</strong>开发主线</li>
<li><strong>/branches：</strong>支线副本</li>
<li><strong>/tags：</strong>标签副本（一旦创建，不允许修改）</li>
</ul>
<p><strong>1 使用trunk作为主要的开发目录</strong></p>
<p>一般的，我们的所有的开发都是基于trunk进行开发，当一个版本（release）开发告一段落（开发、测试、文档、制作安装程序、打包等结束后），代码处于冻结状态（人为规定，可以通过hook来进行管理）。此时应该基于当前冻结的代码库，打tag。</p>
<p>当下一个版本/阶段的开发任务开始时，继续在trunk进行开发。此时，如果发现了上一个已发行版本（Released Version）有一些bug，或者一些很急迫的功能要求，而正在开发的版本（Developing Version）无法满足时间要求，这时候就需要在上一个版本上进行修改了。解决方法是基于发行版对应的tag，做相应的分支（branch）进行开发。</p>
<p><strong>2、其他操作</strong></p>
<p><strong>下面的操作都位于右键菜单的TortoiseSVN中。</strong></p>
<p>1）删除：delete</p>
<p>删除文件或目录，不能直接用Windows的删除命令来操作，那样只是没有显示出来，实际并没有删除，在更新后，删除的文件又会被更新出来的。要想从库中 删除，必须选中你要删除的内容，TortoiseSVN — delete，这样才会将这个文件标记成要删除的。<strong>确认需要删除后，使用前面所讲的提交命令，就会真正的在库中删除了。</strong>否则版本库中依旧存在这原先的代码</p>
<p>2）重命名：rename</p>
<p>重命名也不能直接用Windows的重命名命令来操作，必须选中你要重命名的文件，TortoiseSVN — rename。修改后提交就可以更新到仓库。</p>
<p>改名的处理方式相当于新增了一个以新名称命名的文件，原名称命名的文件进行了删除。</p>
<p><strong>3）还原：revert</strong></p>
<p>在未提交之前，你对前面做的操作反悔了，可以使用revert来恢复。</p>
<p><strong>4）检查更新：Check for modifications</strong></p>
<p>① 此功能可以显示你所做的修改有哪些还没有提交的。② 还可以看到版本库里的改动，即别人提交了哪些文件的改动，你还没更新到本地。</p>
<p><strong>5）导出：export</strong></p>
<p>使用SVN的工作空间每个目录下面都有一个.svn隐藏目录，利用SVN的export命令可轻松地导出不含.svn目录的工作空间。</p>
<p><strong>3、冲突问题的解决（☆）</strong></p>
<p><strong>何时发生：</strong>假设user3和user4目录下的Demo1.java都更新到了最新版本号100。user3修改Demo1.java，提交至仓库，此时显示提交成功，这个时候Demo.java文件版本号变成了101。若 user4也修改Demo1.java并提交(在版本号为100的上面进行文件修改，由于不是在最新的101版本号上进行的修改和提交，所以显示提交失败)，此时user4的TortoiseSVN会报提交版本过时的错误，并提醒user4需要更新，更新时就会发 生冲突。</p>
<p><strong>如果两个程序员同时修改了同一个文件呢, SVN可以合并这两个程序员的改动，实际上SVN管理源代码是以行为单位的，就是说两个程序员只要不是修改了同一行程序，SVN都会自动合并两种修改。如果是同一行，SVN会提示文件Confict, 冲突，需要手动确认。</strong></p>
<p>也就是说，如果两个人同时修改了文件，然后同时进行提交，那么就会出现冲突，解决冲突的办法就是编辑冲突，或者在另外一个人提交之后，先update到最新版本，然后进行文件修改。</p>
<p>对于每个更新冲突的文件，Subversion会在冲突文件所在目录下放置了三个文件：</p>
<ul>
<li>Demo1.java.mine：发生冲突时的本地版本。</li>
<li>Demo1.java.r3：最后更新之后的本地版本。</li>
<li>Demo1.java.r4：仓库中的最新版本。</li>
</ul>
<p><strong>解决方法 1：</strong></p>
<p>① 在Demo1.java上右击 — TortoiseSVN — Edit conflicts，这时你需要确定哪些代码是需要的，做一些必要的修改然后保存。小技巧：编辑冲突时，可使用直接复制需要的代码到Merged窗口即可。</p>
<p>② 编辑完成后保存，直接选择Mark as resolved，即标记为冲突已解决。退出编辑冲突窗口，发现冲突发生时生成的三个文件被自动删除了，且Demo1.java变成了未提交状态。</p>
<p>③ commit，OK。</p>
<p><strong>解决方法 2：</strong></p>
<p>直接修改Demo1.java，把其中的一些标记删除即可（前提是服务器上的和本地的内容都需要保存）。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/18/183react-元素渲染和组件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/18/183react-元素渲染和组件/" itemprop="url">
                  react 元素渲染和组件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-18T12:36:00+08:00">
                2017-04-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="react特点"><a href="#react特点" class="headerlink" title="react特点"></a>react特点</h3><ul>
<li><strong>1.声明式设计</strong> −React采用声明范式，可以轻松描述应用。</li>
<li><strong>2.高效</strong> −React通过对DOM的模拟，最大限度地减少与DOM的交互。</li>
<li><strong>3.灵活</strong> −React可以与已知的库或框架很好地配合。</li>
<li><strong>4.JSX</strong> − JSX 是 JavaScript 语法的扩展。React 开发不一定使用 JSX ，但我们建议使用它。</li>
<li><strong>5.组件</strong> − 通过 React 构建组件，使得代码更加容易得到复用，能够很好的应用在大项目的开发中。</li>
<li><strong>6.单向响应的数据流</strong> − React 实现了单向响应的数据流，从而减少了重复代码，这也是它为什么比传统数据绑定更简单。</li>
</ul>
<h3 id="React的原理"><a href="#React的原理" class="headerlink" title="React的原理"></a>React的原理</h3><p>在Web开发中，我们总需要将变化的数据实时反应到UI上，这时就需要对DOM进行操作。而复杂或频繁的DOM操作通常是性能瓶颈产生的原因（如何进行高性能的复杂DOM操作通常是衡量一个前端开发人员技能的重要指标）。React为此引入了虚拟DOM（Virtual DOM）的机制：在浏览器端用Javascript实现了一套DOM API。基于React进行开发时所有的DOM构造都是通过虚拟DOM进行，每当数据变化时，React都会重新构建整个DOM树，然后React将当前整个DOM树和上一次的DOM树进行对比，得到DOM结构的区别，然后仅仅将需要变化的部分进行实际的浏览器DOM更新。而且React能够批处理虚拟DOM的刷新，在一个事件循环（Event Loop）内的两次数据变化会被合并，例如你连续的先将节点内容从A变成B，然后又从B变成A，React会认为UI不发生任何变化，而如果通过手动控制，这种逻辑通常是极其复杂的。尽管每一次都需要构造完整的虚拟DOM树，但是因为虚拟DOM是内存数据，性能是极高的，而对实际DOM进行操作的仅仅是Diff部分，因而能达到提高性能的目的。这样，在保证性能的同时，开发者将不再需要关注某个数据的变化如何更新到一个或多个具体的DOM元素，而只需要关心在任意一个数据状态下，整个界面是如何Render的。</p>
<h3 id="1-HTML-标签-vs-React-组件"><a href="#1-HTML-标签-vs-React-组件" class="headerlink" title="1 HTML 标签 vs. React 组件"></a>1 HTML 标签 vs. React 组件</h3><p>React 可以渲染 HTML 标签 (strings) 或 React 组件 (classes)。</p>
<p>要渲染 HTML 标签，只需在 JSX 里使用小写字母的标签名。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myDivElement = <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"foo"</span> /&gt;</span>;</span></div><div class="line">ReactDOM.render(myDivElement, document.getElementById('example'));</div></pre></td></tr></table></figure>
<p>要渲染 React 组件，只需创建一个大写字母开头的本地变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyComponent = React.createClass(&#123;<span class="comment">/*...*/</span>&#125;);</div><div class="line"><span class="keyword">var</span> myElement = <span class="xml"><span class="tag">&lt; <span class="attr">MyComponent</span> <span class="attr">someProperty</span>=<span class="string">&#123;true&#125;</span> /&gt;</span>;</span></div><div class="line">ReactDOM.render(myElement, document.getElementById('example'));</div></pre></td></tr></table></figure>
<p>React 的 JSX 使用大、小写的约定来区分本地组件的类和 HTML 标签。</p>
<p>注意，</p>
<ul>
<li>原生 HTML 元素名以小写字母开头，而自定义的 React 类名以大写字母开头，比如 HelloMessage 不能写成 helloMessage。除此之外还需要注意组件类只能包含一个顶层标签，否则也会报错。</li>
<li>在定义一个组件的时候,output的所有的标签必须被正确的闭合，这样子react框架才能正确识别每个标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">render()&#123;</div><div class="line">return (</div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span> = <span class="string">&#123;this.handleSubmit&#125;</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"name"</span>&gt;</span>name</div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span> = <span class="string">&#123;this.state.value&#125;</span> <span class="attr">onChange</span> = <span class="string">&#123;this.handleChange&#125;/</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>  <span class="attr">value</span>=<span class="string">"submit"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>注意每一个input标签里面的 最后的  /  不能缺少</strong> </p>
<p><strong>Components must return a single root element.</strong> </p>
<h3 id="2-react-元素的不可变性"><a href="#2-react-元素的不可变性" class="headerlink" title="2 react 元素的不可变性"></a>2 react 元素的不可变性</h3><p>2.1 React Only Updates What’s Necessary</p>
<p>React DOM compares the element and its children to the previous one, and only applies the DOM updates necessary to bring the DOM to the desired state.</p>
<h3 id="3-react组件"><a href="#3-react组件" class="headerlink" title="3 react组件"></a>3 react组件</h3><ul>
<li>组件是React中构建用户界面的基本单位。它们和外界的交互除了状态（state）之外，还有就是属性（props）。事实上，状态更多的是一个组件内部去自己维护，而属性则由外部在初始化这个组件时传递进来（一般是组件需要管理的数据）。React认为属性应该是只读的，一旦赋值过去后就不应该变化。</li>
<li>每个组件只需要前端开发者提供一个 render 函数，把 props 和 state 映射成网页元素。</li>
<li>setState : 组件规范中定义了setState方法，每次调用时都会更新组件的状态，触发render方法。需要注意，render方法是被异步调用的，这可以保证同步的多个setState方法只会触发一次render，有利于提高性能。和props不同，state是组件的内部状态，除了初始化时可能由props来决定，之后就完全由组件自身去维护。在组件的整个生命周期中，React强烈不推荐去修改自身的props，因为这会破坏UI和Model的一致性，props只能够由使用者来决定。</li>
<li>props :  组件自身定义了一组props作为对外接口，展示一个组件时只需要指定props作为XML节点的属性。组件很少需要对外公开方法，唯一的交互途径就是props。这使得使用组件就像使用函数一样简单，给定一个输入，组件给定一个界面输出。</li>
<li>this.props.children :  <code>this.props.children</code> 的值有三种可能：如果当前组件没有子节点，它就是 <code>undefined</code> ;如果有一个子节点，数据类型是 <code>object</code> ；如果有多个子节点，数据类型就是 <code>array</code> 。所以，处理 <code>this.props.children</code> 的时候要小心。</li>
</ul>
<p>声明组件有两种方式，一种是直接函数function声明 一种是直接class类声明</p>
<p>Components let you split the UI into independent, reusable pieces, and think about each piece in isolation.</p>
<p>Conceptually, components are like JavaScript functions. They accept arbitrary inputs (called “props”) and return React elements describing what should appear on the screen.</p>
<p>函数声明组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">     <span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line">     &#125;</div><div class="line">   <span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span> = <span class="string">"Jhon"</span>/&gt;</span></span></div><div class="line">   ReactDOM.render(</div><div class="line">       element,</div><div class="line">       document.getElementById('root')</div><div class="line"></div><div class="line">   )</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>类声明组件 super调用了父类的constructor创造了父类的实例对象this，然后用子类的构造函数进行修改</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">     <span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">         render()&#123;</div><div class="line">             <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span> = <span class="string">'Jhon'</span>/&gt;</span></span></div><div class="line">     ReactDOM.render(</div><div class="line">         element,</div><div class="line">         document.getElementById('root')</div><div class="line">     )</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>当我们使用组件<code>&lt;Welcome /&gt;</code>时，其实是对Main类的实例化——new Welcome，只不过react对这个过程进行了封装，让它看起来更像是一个标签。类和模块内部默认使用严格模式，所以不需要用use strict指定运行模式。</p>
<p><code>React.Component</code> is an abstract base class, so it rarely makes sense to refer to <code>React.Component</code> directly. Instead, you will typically subclass it, and define at least a <a href="https://facebook.github.io/react/docs/react-component.html#render" target="_blank" rel="external"><code>render()</code></a> method.</p>
<p>组件的 </p>
<p>Let’s recap what happens in this example:</p>
<ol>
<li>We call <code>ReactDOM.render()</code> with the <code>&lt;Welcome name=&quot;Jhon&quot; /&gt;</code> element.</li>
<li>React calls the <code>Welcome</code> component with <code>{name: &#39;Jhon&#39;}</code> as the props.</li>
<li>Our <code>Welcome</code> component returns a <code>&lt;h1&gt;Hello, Jhon&lt;/h1&gt;</code> element as the result.</li>
<li>React DOM efficiently updates the DOM to match <code>&lt;h1&gt;Hello,Jhon&lt;/h1&gt;</code>.</li>
</ol>
<p>我们可以通过 this.props对象向组件传递参数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">      <span class="keyword">var</span> HelloWorld = React.createClass(&#123;</div><div class="line">        <span class="attr">render</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;this.props.name1&#125;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello &#123;this.props.name2&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>          </div><div class="line">                <span class="tag">&lt;/<span class="name">h1</span>&gt;</span>        </div><div class="line">        &#125;</div><div class="line">      &#125;) </div><div class="line">   ReactDOM.render(</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">name1</span> = <span class="string">'Jhon'</span> <span class="attr">name2</span> = <span class="string">"JiM"</span>/&gt;</span>,</span></div><div class="line">      document.getElementById('root')</div><div class="line">   )   </div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>复合组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   </div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line">   &#125;</div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> (</div><div class="line">           &lt;div&gt;</div><div class="line">               &lt;Welcome name = 'Jhon'/&gt;</div><div class="line">                &lt;Welcome name = 'JiM'/&gt;</div><div class="line">                 &lt;Welcome name = 'Kobe'/&gt;</div><div class="line">           &lt;/div&gt;</div><div class="line">       )</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   const element = &lt;App /&gt;</div><div class="line"></div><div class="line">   ReactDOM.render(</div><div class="line">       element ,</div><div class="line">       document.getElementById('root')</div><div class="line">   )</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>注意组件实例化的时候传入的属性是js表达式的时候，要用<code>{}</code> 括起来 </strong>, javascritpExpression必须要用<code>{ }</code> 括起来</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="xml"></span></div><div class="line">   function formateDate(date)&#123;</div><div class="line">        return date.toLocaleDateString();</div><div class="line">   &#125;</div><div class="line">   function Comment(props)&#123;</div><div class="line">       console.log(props)</div><div class="line">       return (</div><div class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">"Comment"</span>&gt;</span></div><div class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">'UserInfo'</span>&gt;</span></div><div class="line">                   <span class="tag">&lt;<span class="name">img</span> <span class="attr">className</span> = <span class="string">'avatar'</span> <span class="attr">src</span>=<span class="string">&#123;props.author.avatarUrl&#125;</span> <span class="attr">alt</span>=<span class="string">&#123;props.author.name&#125;/</span>&gt;</span></div><div class="line">                   <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">'UserInfo-name'</span>&gt;</span></div><div class="line">                       &#123;props.author.name&#125;</div><div class="line">                   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">'Comment-text'</span>&gt;</span></div><div class="line">                   &#123;props.text&#125;</div><div class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">               <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">'Comment-data'</span>&gt;</span></div><div class="line">                   &#123;formateDate(props.date)&#125;</div><div class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">       );</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   const comment = &#123;</div><div class="line">       date : new Date(),</div><div class="line">       text : 'Thank you for give me the chance',</div><div class="line">       author : &#123;</div><div class="line">           name : 'Jhon',</div><div class="line">           avatarUrl : 'http://placekitten.com/g/64/64'</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line"> </div><div class="line"></div><div class="line"> const element = <span class="tag">&lt;<span class="name">Comment</span> <span class="attr">author</span> = <span class="string">&#123;comment.author&#125;</span> <span class="attr">text</span> = <span class="string">&#123;comment.text&#125;</span> <span class="attr">date</span> = <span class="string">&#123;comment.date&#125;</span> /&gt;</span></div><div class="line">  ReactDOM.render(</div><div class="line">    element,</div><div class="line">    document.getElementById('root')</div><div class="line">  )</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>对于组合组件要进行抽取出来，即使功能在小，要充分利用react的组件化思想,以上代码通过组件化思想进行抽取之后</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="xml"></span></div><div class="line">  function formateDate(date)&#123;</div><div class="line">       return date.toLocaleDateString();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  function UserInfo(props)&#123;</div><div class="line">      return (</div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">'UserInfo'</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">img</span> <span class="attr">calssName</span> = <span class="string">'avatar'</span> <span class="attr">src</span> = <span class="string">&#123;props.author.avatarUrl&#125;</span> <span class="attr">alt</span> = <span class="string">&#123;props.author.name&#125;/</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">'UserInfo-name'</span>&gt;</span></div><div class="line">                  &#123;props.author.name&#125;</div><div class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  function CommentText(props)&#123;</div><div class="line">      return (</div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">'Comment-text'</span>&gt;</span></div><div class="line">                  &#123;props.text&#125;</div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      )</div><div class="line">           </div><div class="line">      </div><div class="line">  &#125;</div><div class="line"></div><div class="line">  function CommentData (props)&#123;</div><div class="line">      return (</div><div class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">'Comment-data'</span>&gt;</span></div><div class="line">                  &#123;formateDate(props.date)&#125;</div><div class="line">           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  function Comment(props)&#123;</div><div class="line">      console.log(props)</div><div class="line">      return (</div><div class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span> = <span class="string">"Comment"</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">UserInfo</span> <span class="attr">author</span> =  <span class="string">&#123;props.author&#125;</span> /&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">CommentText</span> <span class="attr">text</span> = <span class="string">&#123;props.text&#125;/</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">CommentData</span> <span class="attr">date</span> = <span class="string">&#123;props.date&#125;/</span>&gt;</span>   </div><div class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  const comment = &#123;</div><div class="line">      date : new Date(),</div><div class="line">      text : 'Thank you for give me the chance',</div><div class="line">      author : &#123;</div><div class="line">          name : 'Jhon',</div><div class="line">          avatarUrl : 'http://placekitten.com/g/64/64'</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">const element = <span class="tag">&lt;<span class="name">Comment</span> <span class="attr">author</span> = <span class="string">&#123;comment.author&#125;</span> <span class="attr">text</span> = <span class="string">&#123;comment.text&#125;</span> <span class="attr">date</span> = <span class="string">&#123;comment.date&#125;</span> /&gt;</span></div><div class="line"> ReactDOM.render(</div><div class="line">   element,</div><div class="line">   document.getElementById('root')</div><div class="line"> )</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="xml"></span></div><div class="line">     var WebSite = React.createClass(&#123;</div><div class="line">         render : function()&#123;</div><div class="line">             return (</div><div class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">Name</span> <span class="attr">name</span> = <span class="string">&#123;this.props.name&#125;/</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">link</span> = <span class="string">&#123;this.props.link&#125;/</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">             );</div><div class="line">         &#125;</div><div class="line">     &#125;)</div><div class="line">   </div><div class="line">   var Name = React.createClass(&#123;</div><div class="line">       render : function()&#123;</div><div class="line">           return (</div><div class="line">               <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">           );</div><div class="line">       &#125;</div><div class="line">   &#125;)</div><div class="line"></div><div class="line">   var Link = React.createClass(&#123;</div><div class="line">       render : function()&#123;</div><div class="line">           return (</div><div class="line">               <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&#123;this.props.link&#125;</span>&gt;</span> &#123;this.props.link&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">           );</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line">)</div><div class="line"></div><div class="line">   ReactDOM.render(</div><div class="line">       <span class="tag">&lt;<span class="name">WebSite</span> <span class="attr">name</span> = <span class="string">'Jhon'</span> <span class="attr">link</span> = <span class="string">'www.baidu.com'</span>/&gt;</span>,</div><div class="line">       document.getElementById('root')</div><div class="line">   )</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="4-组件的属性"><a href="#4-组件的属性" class="headerlink" title="4 组件的属性"></a>4 组件的属性</h3><p>我们声明一个组件，然后看下组件到底是什么</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ListItem</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">        render()&#123;</div><div class="line">            <span class="keyword">return</span> (</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line">            )</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">      </div><div class="line">      <span class="keyword">var</span> element = <span class="xml"><span class="tag">&lt;<span class="name">ListItem</span> <span class="attr">name</span> = <span class="string">'Jhon'</span>/&gt;</span> ;</span></div><div class="line">       console.log(element);</div><div class="line">       ReactDOM.render(</div><div class="line">           element,</div><div class="line">           document.getElementById('root')</div><div class="line">       )</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>控制台输出如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Object &#123;$$typeof: Symbol(react.element), key: null, ref: null, props: Object, type: function…&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   </div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line">       <span class="keyword">constructor</span>(props) &#123;</div><div class="line">           <span class="keyword">super</span>(props);</div><div class="line">           <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">       &#125;</div><div class="line"></div><div class="line"></div><div class="line">       render()&#123;</div><div class="line">           <span class="keyword">return</span> (</div><div class="line">               <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">                   <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                  </div><div class="line">               <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">           );</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line">  </div><div class="line">   </div><div class="line">   ReactDOM.render(</div><div class="line">       <span class="xml"><span class="tag">&lt;<span class="name">Clock</span> /&gt;</span>,</span></div><div class="line">       document.getElementById('root')</div><div class="line">   )</div><div class="line">   </div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>console.log(this)输出如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Clock &#123;props: Object, context: undefined, refs: Object, updater: Object&#125;</div></pre></td></tr></table></figure>
<p>console.log(<code>&lt;Clock /&gt;</code>) 输出如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Object &#123;$$typeof: Symbol(react.element), key: null, ref: null, props: Object, type: function…&#125;</div></pre></td></tr></table></figure>
<p>刚开始学习React,总是有点模糊 props和state的区别，可以看出在打印this的时候，props就是存在的，而state需要定义之后才会显示</p>
<p>改变constructor函数，可以看出输出了state对象</p>
<p><strong>state必须被设置为一个对象，否则React编译会报错，大家可以自行尝试下</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">constructor(props) &#123;</div><div class="line">            super(props);</div><div class="line">            this.state = &#123;color : &apos;red&apos;&#125;</div><div class="line">            console.log(this);</div><div class="line">            console.log(this.setState);</div><div class="line">            console.log(this.props);</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Clock &#123;props: Object, context: undefined, refs: Object, updater: Object, state: Object&#125;</div></pre></td></tr></table></figure>
<p>以上consturctor函数中，我们也打印了  console.log(this.setState);  其实在React源码中，setState是存在于 React.Component上的原型上的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ReactComponent.prototype.setState = function (partialState, callback) &#123; sonmeCode &#125; ;</div></pre></td></tr></table></figure>
<h3 id="5-组件的render函数"><a href="#5-组件的render函数" class="headerlink" title="5 组件的render函数"></a>5 组件的render函数</h3><p>The <code>render()</code> method is required.</p>
<p>When called, it should examine <code>this.props</code> and <code>this.state</code> and return a single React element. This element can be either a representation of a native DOM component, such as <code>&lt;div /&gt;</code>, or another composite component that you’ve defined yourself.</p>
<p>You can also return <code>null</code> or <code>false</code> to indicate that you don’t want anything rendered. When returning <code>null</code> or <code>false</code>, <code>ReactDOM.findDOMNode(this)</code> will return <code>null</code>.</p>
<p>The <code>render()</code> function should be pure, meaning that it does not modify component state, it returns the same result each time it’s invoked, and it does not directly interact with the browser. If you need to interact with the browser, perform your work in <code>componentDidMount()</code>or the other lifecycle methods instead. Keeping <code>render()</code> pure makes components easier to think about.</p>
<p>需要注意的是:</p>
<p><code>render()</code> will not be invoked if <a href="https://facebook.github.io/react/docs/react-component.html#shouldcomponentupdate" target="_blank" rel="external"><code>shouldComponentUpdate()</code></a> returns false.</p>
<h3 id="6-PropTypes"><a href="#6-PropTypes" class="headerlink" title="6 PropTypes"></a>6 PropTypes</h3><p>该属性用来规范组件的props属性的类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">React.PropTypes.array           // 陣列</div><div class="line"></div><div class="line">React.PropTypes.bool.isRequired // Boolean 且必要。</div><div class="line"></div><div class="line">React.PropTypes.func            // 函式</div><div class="line"></div><div class="line">React.PropTypes.number          // 數字</div><div class="line"></div><div class="line">React.PropTypes.object          // 物件</div><div class="line"></div><div class="line">React.PropTypes.string          // 字串</div><div class="line"></div><div class="line">React.PropTypes.node            // 任何類型的: numbers, strings, elements 或者任何這種類型的陣列</div><div class="line"></div><div class="line">React.PropTypes.element         // React 元素</div><div class="line"></div><div class="line">React.PropTypes.instanceOf(XXX) // 某種XXX類別的實體</div><div class="line"></div><div class="line">React.PropTypes.oneOf([&apos;foo&apos;, &apos;bar&apos;]) // 其中一個字串</div><div class="line"></div><div class="line">React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.array]) // 其中一種格式類型</div><div class="line"></div><div class="line">React.PropTypes.arrayOf(React.PropTypes.string)  // 某種類型的陣列(字串類型)</div><div class="line"></div><div class="line">React.PropTypes.objectOf(React.PropTypes.string) // 具有某種屬性類型的物件(字串類型)</div><div class="line"></div><div class="line">React.PropTypes.shape(&#123;                          // 是否符合指定格式的物件</div><div class="line"></div><div class="line">  color: React.PropTypes.string,</div><div class="line">  fontSize: React.PropTypes.number</div><div class="line">&#125;);</div><div class="line">React.PropTypes.any.isRequired  // 可以是任何格式，且必要。</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/18/182jsx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/18/182jsx/" itemprop="url">
                  jsx基础
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-18T12:36:00+08:00">
                2017-04-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-初识jsx"><a href="#1-初识jsx" class="headerlink" title="1 初识jsx"></a>1 初识jsx</h3><p>React 使用 JSX 来替代常规的 JavaScript。</p>
<p>JSX 是一个看起来很像 XML 的 JavaScript 语法扩展。</p>
<p>我们不需要一定使用 JSX，但它有以下优点：</p>
<ul>
<li>JSX 执行更快，因为它在编译为 JavaScript 代码后进行了优化。</li>
<li>它是类型安全的，在编译过程中就能发现错误。</li>
<li><p>使用 JSX 编写模板更加简单快速。</p>
<p>JSX 的基本语法规则：遇到 HTML 标签（以 <code>&lt;</code> 开头），就用 HTML 规则解析；遇到代码块（以 <code>{</code> 开头），就用 JavaScript 规则解析。上面代码的运行结果如下。</p>
</li>
</ul>
<p>JSX语法，像是在Javascript代码里直接写XML的语法，实质上这只是一个语法糖，每一个XML标签都会被JSX转换工具转换成纯Javascript代码，React 官方推荐使用JSX， 当然你想直接使用纯Javascript代码写也是可以的，只是使用JSX，组件的结构和组件之间的关系看上去更加清晰。</p>
<p>JSX是一种语法糖，关于如何编译JSX代码可以参见如下链接</p>
<p><a href="https://babeljs.io/repl/#?babili=false&amp;evaluate=true&amp;lineWrap=false&amp;presets=es2015%2Creact%2Cstage-0&amp;targets=&amp;browsers=&amp;builtIns=false&amp;debug=false&amp;code=function%20hello(" target="_blank" rel="external">bable</a>%20%7B%0A%20%20return%20%3Cdiv%3EHello%20world!%3C%2Fdiv%3E%3B%0A%7D)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> person = &lt;Person name=&#123;window.isLoggedIn ? window.name : ''&#125; /&gt;;</div></pre></td></tr></table></figure>
<p>上述代码经过JSX编译后会得到：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> person = React.createElement(</div><div class="line">  Person,</div><div class="line">  &#123;<span class="attr">name</span>: <span class="built_in">window</span>.isLoggedIn ? <span class="built_in">window</span>.name : <span class="string">''</span>&#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;MyButton color=&quot;blue&quot; shadowSize=&#123;2&#125;&gt;</div><div class="line">  Click Me</div><div class="line">&lt;/MyButton&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">React.createElement(</div><div class="line">  MyButton,</div><div class="line">  &#123;color: &apos;blue&apos;, shadowSize: 2&#125;,</div><div class="line">  &apos;Click Me&apos;</div><div class="line">)</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//使用JSX</div><div class="line">React.render(</div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>,</div><div class="line">    document.getElementById('example')</div><div class="line">);</div><div class="line"> </div><div class="line">//不使用JSX</div><div class="line">React.render(</div><div class="line">    React.createElement('div', null,</div><div class="line">        React.createElement('div', null,</div><div class="line">            React.createElement('div', null, 'content')</div><div class="line">        )</div><div class="line">    ),</div><div class="line">    document.getElementById('example')</div><div class="line">);</div></pre></td></tr></table></figure>
<ul>
<li>r如果标签是以小写字母开头，那么React会寻找内置标签，比如div  sapn等</li>
<li>如果标签是以大写字母开头，React会调用React.createElement去编译这个标签</li>
</ul>
<h3 id="2-我们可以在JSX中"><a href="#2-我们可以在JSX中" class="headerlink" title="2 我们可以在JSX中"></a>2 我们可以在JSX中</h3><ul>
<li>插入任何js表达式</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">function getGreeting(user) &#123;</div><div class="line">  if (user) &#123;</div><div class="line">    return <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;formatName(user)&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>;</div><div class="line">  &#125;</div><div class="line">  return <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, Stranger.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">    ReactDOM.render(</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> &gt;</span>&#123;1+3&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">    ,</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</div><div class="line">  )</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>props如果没有提供值，那么默认值是true,以下声明是等价的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;MyTextBox autocomplete /&gt;</div><div class="line"></div><div class="line">&lt;MyTextBox autocomplete=&#123;true&#125; /&gt;</div></pre></td></tr></table></figure>
<ul>
<li>props声明可以是字符串类型以及js表达式 <code>{}</code> 包括的代码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;MyComponent message=&quot;hello world&quot; /&gt;</div><div class="line"></div><div class="line">&lt;MyComponent message=&#123;&apos;hello world&apos;&#125; /&gt;</div></pre></td></tr></table></figure>
<ul>
<li>指明类</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> element1 = <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">'hello'</span>&gt;</span>hello1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line"><span class="comment">//等价于以下</span></div><div class="line"><span class="keyword">const</span> element2 = React.createElement(</div><div class="line">  <span class="string">'div'</span>,</div><div class="line">  &#123;<span class="attr">className</span>:<span class="string">'sayHello2'</span>&#125;,</div><div class="line">  <span class="string">'hello2'</span> </div><div class="line">)</div><div class="line"><span class="comment">//内部大概的解析过程</span></div><div class="line"><span class="comment">// Note: this structure is simplified</span></div><div class="line"><span class="keyword">const</span> element = &#123;</div><div class="line">  <span class="attr">type</span>: <span class="string">'h1'</span>,</div><div class="line">  <span class="attr">props</span>: &#123;</div><div class="line">    <span class="attr">className</span>: <span class="string">'greeting'</span>,</div><div class="line">    <span class="attr">children</span>: <span class="string">'Hello, world'</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>完整代码如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="keyword">const</span> user = &#123;</div><div class="line">            <span class="attr">firstName</span>:<span class="string">'Jhon'</span>,</div><div class="line">            <span class="attr">lastName</span>:<span class="string">'Kobe'</span></div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">formatName</span>(<span class="params">user</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span>(user)&#123;</div><div class="line">                <span class="keyword">return</span> user.firstName + <span class="string">" "</span> + user.lastName ;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> <span class="string">'stranger hello '</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">const</span> element1 = <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">'hello'</span>&gt;</span>hello1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="keyword">const</span> element2 = React.createElement(</div><div class="line">            <span class="string">'div'</span>,</div><div class="line">            &#123;<span class="attr">className</span>:<span class="string">'sayHello2'</span>&#125;,</div><div class="line">            <span class="string">'hello2'</span> </div><div class="line">        )</div><div class="line"></div><div class="line">        ReactDOM.render(</div><div class="line">            element1,</div><div class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'root1'</span>)</div><div class="line">        )</div><div class="line"></div><div class="line">        ReactDOM.render(</div><div class="line">            element2,</div><div class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'root2'</span>)</div><div class="line">        )</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>注意render函数中只能有一个顶层标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">        ReactDOM.render(</div><div class="line">           <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-attr</span> = <span class="string">'name'</span>&gt;</span>this is a test</span></div><div class="line">               <span class="tag">&lt;<span class="name">h2</span>&gt;</span>this is a test 2 <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">  		<span class="tag">&lt;/<span class="name">div</span>&gt;</span>,</div><div class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</div><div class="line">        )</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>以下是错误写法,顶层标签只能含有一个。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </div><div class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="xml">        </span></div><div class="line">        ReactDOM.render(</div><div class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">data-attr</span> = <span class="string">'name'</span>&gt;</span>this is a test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">h2</span>&gt;</span>this is a test 2 <span class="tag">&lt;/<span class="name">h2</span>&gt;</span>,</div><div class="line">            document.getElementById('root')</div><div class="line">        )   </div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="xml"></span></div><div class="line">      var HelloWorld = React.createClass(&#123;</div><div class="line">        render : function()&#123;</div><div class="line">          return <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;this.props.name1&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;this.props.name2&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">        &#125;</div><div class="line">      &#125;) </div><div class="line">   </div><div class="line">   <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">name1</span> = <span class="string">'Jhon'</span> <span class="attr">name2</span> = <span class="string">"JiM"</span>/&gt;</span></div><div class="line">       //这样也无法渲染出来</div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>可以使用三元运算符，但是不能使用if-else表达式</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">const i = 1 ;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="tag">&lt;<span class="name">div</span> &gt;</span>&#123;</div><div class="line">    i == 1 ? ' 2' : '3' </div><div class="line">  &#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  ,</div><div class="line">  document.getElementById('root')</div><div class="line">)</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/13/180面试题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/13/180面试题/" itemprop="url">
                  面试题
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-13T12:36:00+08:00">
                2017-04-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/forwork/" itemprop="url" rel="index">
                    <span itemprop="name">forwork</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>总结一些平时在电脑上写的很溜，但是在面试白班测试总是写不好的一些面试题吧!个人不喜欢白板测试，没有那种敲代码的感觉，并且一些细节也不好把控。</p>
<p>1 编写函数sum(2,3)和sum(2)(3)都能得到5</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>)</span>&#123;</div><div class="line">     <span class="keyword">var</span> cache = <span class="built_in">arguments</span>[<span class="number">0</span>];</div><div class="line">     <span class="keyword">if</span>(!<span class="built_in">arguments</span>)&#123;</div><div class="line">         <span class="keyword">return</span> ;</div><div class="line">     &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">1</span>)&#123;</div><div class="line">         <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">num</span>)</span>&#123;</div><div class="line">             <span class="keyword">return</span> cache+num</div><div class="line">         &#125;;</div><div class="line">     &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">2</span> )&#123;</div><div class="line">         <span class="keyword">return</span> <span class="built_in">arguments</span>[<span class="number">0</span>]+<span class="built_in">arguments</span>[<span class="number">1</span>];</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> <span class="built_in">console</span>.log(sum(<span class="number">2</span>,<span class="number">3</span>));</div><div class="line"> <span class="built_in">console</span>.log(sum(<span class="number">2</span>)(<span class="number">3</span>));</div></pre></td></tr></table></figure>
<p>2 url地址的操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> url =<span class="string">' http://item.taobao.com/item.htm?a=1&amp;b=2&amp;c=&amp;d=xxx&amp;e'</span>;</div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">getJson</span> (<span class="params">url</span>)</span>&#123;</div><div class="line">       <span class="keyword">var</span> flag = url.indexOf(<span class="string">'?'</span>)+<span class="number">1</span>;</div><div class="line">       <span class="built_in">console</span>.log(flag);</div><div class="line"></div><div class="line">       <span class="keyword">var</span> res = url.slice(flag);</div><div class="line">       <span class="built_in">console</span>.log(res);</div><div class="line"></div><div class="line">       <span class="keyword">var</span> arr = res.split(<span class="string">'&amp;'</span>);</div><div class="line">       <span class="keyword">var</span> Json = &#123;&#125;;</div><div class="line"></div><div class="line">       <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt;arr.length ;i++)&#123;</div><div class="line">           <span class="keyword">var</span> temp = arr[i].split(<span class="string">'='</span>);</div><div class="line">           <span class="built_in">console</span>.log(temp);</div><div class="line">           <span class="built_in">console</span>.log(temp[<span class="number">0</span>]);</div><div class="line">           <span class="built_in">console</span>.log(temp[<span class="number">1</span>]);</div><div class="line">           Json[temp[<span class="number">0</span>]] = temp[<span class="number">1</span>];</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> Json ;</div><div class="line">   &#125;</div><div class="line">   getJson(url);</div><div class="line">   <span class="built_in">console</span>.log(getJson(url));</div></pre></td></tr></table></figure>
<p>3 运算符的操作，主要是 +    ++    -   &amp;&amp;   ||   以及运算符的优先级的问题(感兴趣可以看看我这篇总结)</p>
<p>这里在回顾一下</p>
<p>+  运算符    </p>
<ul>
<li>如果一个运算数是字符串，那么这个运算环境就是字符串环境，另外一个运算数，不论是布尔类型，数字类型，undefined  null NaN 以及数组，对象都会转化为字符串，然后进行字符串拼接</li>
<li>如果一个运算数是数字，另外一个运算数是布尔类型，会将布尔类型转化为数字</li>
<li>如果一个运算数是数组或者对象，会将数组或者对象转化为原始数据类型(调用toString方法)，然后进行运算(一般也就是将数组或者对象转化为字符串，所以后续也是进行的字符串的拼接)</li>
</ul>
<p>-  运算符</p>
<ul>
<li>-运算符提供的是一个数字运行环境，会将字符串，布尔类型的值转化为数字(Number和parseInt方法)，如果转化失败则返回NaN</li>
<li>如果有运算数是对象或者数组，会先调用对象或者数组的toString方法，然后调用Number和parseInt方法转化为数字，进行数字的运算，如果转化失败则返回NaN</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="literal">true</span> + <span class="literal">false</span>);<span class="comment">//1</span></div><div class="line"><span class="built_in">console</span>.log(&#123;&#125;+<span class="literal">true</span>);<span class="comment">//[object Object]true</span></div><div class="line"><span class="built_in">console</span>.log([]+<span class="literal">true</span>);<span class="comment">//true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="literal">true</span> + []);<span class="comment">//true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="number">1</span> + [] + <span class="number">1</span> );<span class="comment">//11</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>(<span class="number">1</span> + []));<span class="comment">//string</span></div><div class="line"><span class="built_in">console</span>.log([].valueOf());<span class="comment">//[]</span></div><div class="line"><span class="built_in">console</span>.log([] - <span class="literal">true</span>);<span class="comment">//-1</span></div><div class="line"><span class="built_in">console</span>.log(&#123;&#125; - <span class="literal">true</span>);<span class="comment">//NaN</span></div><div class="line"><span class="built_in">console</span>.log(<span class="number">1</span> - [] - <span class="number">1</span> );<span class="comment">//0</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'2'</span> - <span class="literal">false</span>);<span class="comment">//2</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"2"</span> - <span class="literal">undefined</span>);<span class="comment">//NaN</span></div></pre></td></tr></table></figure>
<p>4 有关闭包的一个测试  如何实现点击每个 li 输出其 index 值，注册事件之后，触发事件，然后事件监听器函数就会执行</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span> = <span class="string">'test'</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>ee<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>ee<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>ee<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> liObj = <span class="built_in">document</span>.getElementById(<span class="string">'test'</span>).children;</div><div class="line"><span class="built_in">console</span>.log(liObj);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; liObj.length ; i++)&#123;</div><div class="line">  liObj[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(i);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//这个是不行的   注册事件之后，当点击的时候，i的值已经是 3 的，所以每次输出都是3</span></div></pre></td></tr></table></figure>
<p>利用闭包  返回一个函数作为listener</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; liObj.length ; i++)&#123;</div><div class="line">  liObj[i].onclick = (<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(n);</div><div class="line">    &#125;</div><div class="line">  &#125;)(i+<span class="number">1</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有一个简单的实现思路就是  给每一个li设置一个属性即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; liObj.length ; i++)&#123;</div><div class="line">  liObj[i].setAttribute(<span class="string">'index'</span>,i+<span class="number">1</span>);</div><div class="line">  liObj[i].onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.getAttribute(<span class="string">'index'</span>));</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>5 类数组转化为数组  apply，call 第一个参数改变函数的this指向,第二个参数表示传入函数的参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arrayLike = &#123;</div><div class="line">  <span class="number">0</span> : <span class="string">"hai"</span>,</div><div class="line">  <span class="number">1</span> : <span class="string">"Jhon"</span>,</div><div class="line">  <span class="number">2</span> : <span class="string">"nam"</span>,</div><div class="line">  <span class="attr">length</span> : <span class="number">3</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ret = <span class="built_in">Array</span>.prototype.slice.call(arrayLike,<span class="number">0</span>);</div><div class="line"><span class="built_in">console</span>.log(ret);</div></pre></td></tr></table></figure>
<p>6 数组的去重</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">9</span>];</div><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> arr = [<span class="keyword">this</span>[<span class="number">0</span>]];</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; <span class="keyword">this</span>.length ; i++)&#123;</div><div class="line">    <span class="comment">//如果新数组中没有当前比较项，则将当前比较项加入新数组</span></div><div class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span> ;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span> ; j &lt; arr.length ; j++)&#123;</div><div class="line">      <span class="keyword">if</span>(<span class="keyword">this</span>[i] === arr[j])&#123;</div><div class="line">        flag = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">break</span> ;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(flag == <span class="literal">true</span>)&#123;</div><div class="line">      arr.push(<span class="keyword">this</span>[i]);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> arr ;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(arr.unique());</div></pre></td></tr></table></figure>
<p>7 字符串的去重</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> arr = [<span class="keyword">this</span>[<span class="number">0</span>]];</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; <span class="keyword">this</span>.length ; i++)&#123;</div><div class="line">    <span class="comment">//如果新数组中没有当前比较项，则将当前比较项加入新数组</span></div><div class="line">    <span class="keyword">var</span> flag = <span class="literal">true</span> ;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> j = <span class="number">0</span> ; j &lt; arr.length ; j++)&#123;</div><div class="line">      <span class="keyword">if</span>(<span class="keyword">this</span>[i] === arr[j])&#123;</div><div class="line">        flag = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">break</span> ;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(flag == <span class="literal">true</span>)&#123;</div><div class="line">      arr.push(<span class="keyword">this</span>[i]);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> arr ;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> str = <span class="string">'aaasdafafaasdddfggh'</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">detRep</span>(<span class="params">str</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> arr = str.split(<span class="string">''</span>);</div><div class="line">  <span class="keyword">var</span> newArr = arr.unique();</div><div class="line">  <span class="keyword">var</span> newStr = newArr.join(<span class="string">''</span>);</div><div class="line">  <span class="keyword">return</span> newStr ;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(detRep(str));</div></pre></td></tr></table></figure>
<p>8 break和continue</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//break会直接跳出循环</span></div><div class="line"><span class="keyword">var</span> iNum = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;<span class="number">10</span>; i++) &#123;</div><div class="line">  <span class="keyword">if</span> (i % <span class="number">5</span> == <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  &#125;</div><div class="line">  iNum++;</div><div class="line">&#125;</div><div class="line">alert(iNum);<span class="comment">//4</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//continue会退出当前这一次的循环，进行下一次循环，后面表达式都不会在执行</span></div><div class="line"><span class="keyword">var</span> iNum = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;<span class="number">10</span>; i++) &#123;</div><div class="line">  <span class="keyword">if</span> (i % <span class="number">5</span> == <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">continue</span>;</div><div class="line">  &#125;</div><div class="line">  iNum++;</div><div class="line">&#125;</div><div class="line">alert(iNum);<span class="comment">//8</span></div></pre></td></tr></table></figure>
<p>9 + - 运算符以及NaN  undefined </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a;<span class="comment">//undefined </span></div><div class="line"><span class="keyword">var</span> b = a * <span class="number">0</span>;<span class="comment">//NaN</span></div><div class="line"><span class="built_in">console</span>.log(b * <span class="number">2</span> + <span class="string">"2"</span> - <span class="number">0</span> + <span class="number">4</span>);</div><div class="line"><span class="keyword">if</span> (b == b) &#123; <span class="comment">//false</span></div><div class="line">    <span class="built_in">console</span>.log(b * <span class="number">2</span> + <span class="string">"2"</span> - <span class="number">0</span> + <span class="number">4</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(!b * <span class="number">2</span> + <span class="string">"2"</span> - <span class="number">0</span> + <span class="number">4</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">//输出26</span></div></pre></td></tr></table></figure>
<p>主要考察以下知识点</p>
<ul>
<li>带有undefined的基本运算结果返回NaN ：  undefined*2   undefined+2等  </li>
<li>带有NaN的比较运算符结果返回false; NaN == NaN  也是false</li>
<li>x 和+ 运算中数字和布尔类型的运算，会将布尔类型转化为数字在进行运算  !b*2 = 2 </li>
<li>带有字符串的 +  性环境中，会将另外一个运算数转化为字符串，然后进行字符串的拼接 !b*2+’2’ : ‘22’;</li>
<li>- 性环境中，会将字符串，如果一个是字符串，另外一个是数字会将字符串转化为数字(即使两个都是字符串也会将两个都转化为字符串)  ‘22’-0  : 22  数字类型的22</li>
<li>如果没有 - 0 这步运算，那么返回的结果将是 字符串  ‘224’;</li>
</ul>
<p>10 日期操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//假设今天是  2017-4-12</span></div><div class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="built_in">console</span>.log(date.getFullYear());<span class="comment">//2017</span></div><div class="line"><span class="built_in">console</span>.log(date.getMonth());<span class="comment">//3  注意Month获取的月份是从0开始的</span></div><div class="line"><span class="built_in">console</span>.log(date.getDate());<span class="comment">//12</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> year = date.getFullYear();</div><div class="line"><span class="keyword">var</span> Month = date.getMonth()+<span class="number">1</span> ;</div><div class="line"><span class="keyword">var</span> day = date.getDate();</div><div class="line"></div><div class="line">Month = Month &lt; <span class="number">10</span> ? <span class="string">'0'</span>+Month : Month ;</div><div class="line">day = day &lt; <span class="number">10</span> ? <span class="string">'0'</span>+day : day ;</div><div class="line"><span class="keyword">var</span> res = year + <span class="string">'-'</span>+ Month + <span class="string">'-'</span>+day;</div><div class="line"><span class="built_in">console</span>.log(res);</div></pre></td></tr></table></figure>
<p>11 实时获取页面中的元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Item<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="keyword">var</span> items = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>);</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; items.length; i++)&#123;</div><div class="line">    <span class="keyword">if</span>(items[i].innerHTML == <span class="string">'1'</span>)&#123;</div><div class="line">      <span class="built_in">console</span>.log(i);</div><div class="line">      items[i].parentNode.removeChild(items[i]);</div><div class="line">      <span class="built_in">console</span>.dir(items);<span class="comment">//items已经剩下四个了而此时的索引值并没有改变</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>执行后</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Item</div><div class="line">1</div><div class="line">Item</div><div class="line">Item</div></pre></td></tr></table></figure>
<p>这里需要注意的一点是 DOM获取的元素  items是实时更新的；</p>
<p>12 变量声明提升  函数声明优先于变量声明</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(a);<span class="comment">//是一个函数</span></div><div class="line"><span class="keyword">var</span> a = <span class="number">3</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"><span class="built_in">console</span>.log(a);<span class="comment">////3</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="JiM-W" />
          <p class="site-author-name" itemprop="name">JiM-W</p>
           
              <p class="site-description motion-element" itemprop="description">keep fighting！</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">194</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">52</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">89</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JiM-W</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
