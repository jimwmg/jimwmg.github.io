<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="keep fighting！">
<meta property="og:type" content="website">
<meta property="og:title" content="JiM-W">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="JiM-W">
<meta property="og:description" content="keep fighting！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JiM-W">
<meta name="twitter:description" content="keep fighting！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/"/>





  <title> JiM-W </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JiM-W</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">keep Moving</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/21/68JSON数据处理的方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/21/68JSON数据处理的方法/" itemprop="url">
                  JSON operate
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-21T20:36:00+08:00">
                2016-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>JSON数据处理的方法</p>
<p>1 json数据格式:</p>
<ul>
<li>以键值对的形式存在 json={“key”:”value”,”key1”:”value1”,”key2”:”value2”};</li>
<li>key对应的值可以使数组或者对象 json={“key” :  {  } , “key1” : [   ] , “key2” : function(){ } } ;</li>
<li>json是一种规范，一种数据格式的规范</li>
<li>json实际上是字符串</li>
</ul>
<p>2 json数据格式，”存前读后”，也就是说存储json格式的数据之前，要进行将其转化为字符串，读取的时候，要转化为对象</p>
<p> JSON.stringify()  将一个<strong>对象</strong>解析成<strong>字符串</strong>  将<strong>JavaScript值</strong>转换为<strong>JSON字符串</strong></p>
<p> JSON.parse() 将一个<strong>字符串</strong>解析成<strong>对象</strong> ，构造由字符串描述的JavaScript值或对象。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> myJson=&#123;<span class="string">"UserName"</span>:<span class="string">"Jim"</span>&#125;;</div><div class="line">    <span class="built_in">console</span>.log(myJson);<span class="comment">//Object &#123;UserName: "Jim"&#125;</span></div><div class="line">    <span class="keyword">var</span> strMyJson = <span class="built_in">JSON</span>.stringify(myJson);<span class="comment">//将myJson存进去，记得JSON.stringify转成字符串</span></div><div class="line">    <span class="built_in">console</span>.log(strMyJson);<span class="comment">//  字符串   '&#123;UserName: "Jim"&#125;'</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> strMyJson);<span class="comment">//string</span></div><div class="line">    <span class="keyword">var</span> objMyJson=<span class="built_in">JSON</span>.parse(strMyJson);<span class="comment">//取出来的是字符串，记得JSON.parse还原为对象</span></div><div class="line">    <span class="built_in">console</span>.log(objMyJson);<span class="comment">//Object &#123;UserName: "Jim"&#125;</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> objMyJson);<span class="comment">//object</span></div><div class="line"> 	<span class="keyword">var</span> data = [&#123;<span class="string">"name"</span>:<span class="string">"jhon"</span>&#125;,&#123;<span class="string">"age"</span>:<span class="number">16</span>&#125;];<span class="comment">//数组也可以</span></div><div class="line">    <span class="keyword">var</span> strData = <span class="built_in">JSON</span>.stringify(data);</div><div class="line">	<span class="built_in">console</span>.dir(strData);</div><div class="line">    <span class="built_in">console</span>.dir(<span class="keyword">typeof</span> strData);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>3 JSON.parse用法在JSON.parse and eval 博文已经总结过</p>
<p>4 JSON.stringify()详解 (参阅MDN)</p>
<p>语法  返回值是一个JSON格式的字符串</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">JSON</span>.stringify(value[, replacer [, space]])</div></pre></td></tr></table></figure>
<ul>
<li>value是要序列化为一个JSON字符串的值</li>
<li>replacer可选参数<ul>
<li>如果该参数是一个函数，那么在序列化的过程中的被序列化的每个属性都会经过该函数的转换和处理</li>
<li>如果该参数是一个数组，那么只有包含在该数组中的属性名才能被最终序列化为JSON字符串</li>
<li>如果该参数为null或者未提供， 那么对象的所有属性都会被序列化</li>
</ul>
</li>
<li>space 可选参数，用于梅花输出<ul>
<li>如果该参数是一个数字，代表有多少个空格，上限为10 ，如果该数字小于1，则没有空格</li>
<li>如果该参数为null或者没有提供将没有空格</li>
</ul>
</li>
</ul>
<p>注意事项</p>
<ul>
<li>字符串，数字，布尔类型的数据值会被直接 转化为原始值</li>
<li>undefined  函数  以及symbol值<ul>
<li>在数组中出现的时候，会被转化为null</li>
<li>作为对象的属性值出现的时候，整个键值对都会被忽略</li>
</ul>
</li>
<li>不可枚举的属性不会被序列化为字符串</li>
</ul>
<p>走几个demo便于理解和记忆</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(&#123; <span class="attr">foo</span>: <span class="number">1</span> &#125;, &#123; <span class="comment">// foo is on obj's prototype chain.</span></div><div class="line">       bar: &#123;</div><div class="line">           <span class="attr">value</span>: <span class="number">2</span>  <span class="comment">// bar is a non-enumerable property.默认值false</span></div><div class="line">       &#125;,</div><div class="line">       <span class="attr">baz</span>: &#123;</div><div class="line">           <span class="attr">value</span>: <span class="number">3</span>,</div><div class="line">           <span class="attr">enumerable</span>: <span class="literal">true</span>  <span class="comment">// baz is an own enumerable property.</span></div><div class="line">       &#125;</div><div class="line">   &#125;);</div><div class="line">  </div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(obj));<span class="comment">//'&#123;"baz":3&#125;'</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(&#123;&#125;));<span class="comment">//'&#123;&#125;'</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(<span class="literal">false</span>));<span class="comment">//"false"</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(<span class="number">4</span>));<span class="comment">//"4"</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(<span class="string">'foo'</span>));<span class="comment">//"foo"</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify([<span class="string">'foo'</span>,<span class="number">2</span>,<span class="literal">true</span>]));<span class="comment">//'["foo",2,true]'</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify([<span class="literal">undefined</span>,<span class="built_in">Array</span>,<span class="built_in">Symbol</span>(<span class="string">""</span>)]));<span class="comment">//'[null,null,null]'</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(&#123;<span class="attr">x</span>:<span class="literal">undefined</span>,<span class="attr">y</span>:<span class="built_in">Array</span>,<span class="attr">z</span>:<span class="built_in">Symbol</span>(<span class="string">""</span>)&#125;));<span class="comment">//'&#123;&#125;'</span></div></pre></td></tr></table></figure>
<p>replacer函数 </p>
<ul>
<li>如果返回一个 Number 转换成相应的字符串被添加入JSON字符串。</li>
<li>如果返回一个 String, 该字符串作为属性值被添加入JSON。</li>
<li>如果返回一个 Boolean, “true” 或者 “false”被作为属性值被添加入JSON字符串。</li>
<li>如果返回任何其他对象，该对象递归地序列化成JSON字符串，对每个属性调用replaceer方法。除非该对象是一个函数，这种情况将不会被序列化成JSON字符串。</li>
<li>如果返回undefined，该属性值不会在JSON字符串中输出。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">'Jhon'</span>,<span class="attr">age</span>:<span class="number">19</span>,<span class="attr">gender</span>:<span class="string">"man"</span>&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span> (<span class="params">key,value</span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> value === <span class="string">'number'</span>)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">undefined</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> value ;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> jsonString = <span class="built_in">JSON</span>.stringify(obj,replacer);</div><div class="line"><span class="built_in">console</span>.log(jsonString);</div><div class="line"><span class="comment">//'&#123;"name":"Jhon","gender":"man"&#125;'</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">'Jhon'</span>,<span class="attr">age</span>:<span class="number">19</span>,<span class="attr">gender</span>:<span class="string">"man"</span>&#125;;</div><div class="line"><span class="keyword">var</span> jsonString = <span class="built_in">JSON</span>.stringify(obj,[<span class="string">'age'</span>,<span class="string">'other'</span>]);<span class="comment">//多余的会被忽略</span></div><div class="line"><span class="built_in">console</span>.log(jsonString);<span class="comment">//'&#123;"age":19&#125;' ;</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/21/162AngularJsdirective/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/21/162AngularJsdirective/" itemprop="url">
                  Angular Js directive
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-21T00:00:00+08:00">
                2016-11-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>建议大家看angular英文文档，然后实践出真知</p>
<h3 id="1-angular-directive的自定义用法-我们在定义一个指令的时候使用驼峰法来命名一个指令，例如-runoobDirective-但在使用它时需要以-分割-runoob-directive；"><a href="#1-angular-directive的自定义用法-我们在定义一个指令的时候使用驼峰法来命名一个指令，例如-runoobDirective-但在使用它时需要以-分割-runoob-directive；" class="headerlink" title="1 angular directive的自定义用法    我们在定义一个指令的时候使用驼峰法来命名一个指令，例如 runoobDirective, 但在使用它时需要以 -分割, runoob-directive；"></a>1 angular directive的自定义用法    我们在定义一个指令的时候使用驼峰法来命名一个指令，例如 <strong>runoobDirective</strong>, 但在使用它时需要以 <code>-</code>分割, <strong>runoob-directive</strong>；</h3><p>先来看下自定义指令的语法结构</p>
<p>首先定义指令前需要首先定义一个模块</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>,[]);<span class="comment">//定义一个模块</span></div></pre></td></tr></table></figure>
<p>在定义了模块之后，可以在定义指令</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">'directiveName'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> config</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>return的配置参数有很多，接下来一一进行分析</p>
<h3 id="1-1-限制使用-restrict-值为字符串-可以的值有-ECMA-E设置指令可以通过元素的形式进行调用-A-设置指令可以通过属性的形式调用-M设置指令可以通过注释的形式调用-C设置指令可以通过类名进行调用；"><a href="#1-1-限制使用-restrict-值为字符串-可以的值有-ECMA-E设置指令可以通过元素的形式进行调用-A-设置指令可以通过属性的形式调用-M设置指令可以通过注释的形式调用-C设置指令可以通过类名进行调用；" class="headerlink" title="1.1 限制使用  restrict  值为字符串  可以的值有  ECMA  E设置指令可以通过元素的形式进行调用 A 设置指令可以通过属性的形式调用 M设置指令可以通过注释的形式调用 C设置指令可以通过类名进行调用；"></a>1.1 限制使用  restrict  值为字符串  可以的值有  ECMA  E设置指令可以通过元素的形式进行调用 A 设置指令可以通过属性的形式调用 M设置指令可以通过注释的形式调用 C设置指令可以通过类名进行调用；</h3><p><strong>默认值是EA</strong> ，表示我们定义的指令可以通过元素名或者属性的形式进行调用</p>
<p>你可以限制你的指令只能通过特定的方式来调用。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- E (element) --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">directiveName</span>&gt;</span><span class="tag">&lt;/<span class="name">directiveName</span>&gt;</span></div><div class="line">比如<span class="tag">&lt;<span class="name">ng-view</span>&gt;</span><span class="tag">&lt;/<span class="name">ng-view</span>&gt;</span>等</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- A (attribute) --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">directiveName</span>=<span class="string">"expression"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">比如<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-init</span>=<span class="string">"name= 'Jhon'"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-hide</span>=<span class="string">"name= 'Jhon'"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> 等</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- C (class) --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"directiveName"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- M(comment) --&gt;</span></div><div class="line"><span class="comment">&lt;!--directive:directiveName expression--&gt;</span></div></pre></td></tr></table></figure>
<h3 id="1-2-priority-默认值为0"><a href="#1-2-priority-默认值为0" class="headerlink" title="1.2  priority 默认值为0"></a>1.2  priority 默认值为0</h3><p>数字，可选参数，致命指令的优先级，若在单个DOM元素上有多个指令，则优先级高的先执行。</p>
<p>当然，设置指令的优先级不太常用，但是比较特殊的例子是，内置指令ng-repeat的优先级为1000，而ng-init的优先级为 450。</p>
<h3 id="1-3-terminal"><a href="#1-3-terminal" class="headerlink" title="1.3 terminal"></a>1.3 terminal</h3><p>布尔型，可选参数，可以被设置为true或者false，若设置为true，则优先级低于此指令的其他指令则无效，不会被调用优先级相同任然会执行。</p>
<h3 id="1-4-template"><a href="#1-4-template" class="headerlink" title="1.4. template"></a>1.4. template</h3><p><strong>字符串或者函数</strong>，可选参数。 其中字符串可以是html标签，可以是一个页面，也可以是一个简单的字符串比如 “this is  str”</p>
<ul>
<li>如下栗子我们简单的定义了一个指令，template是字符串的形式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">'hello'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="comment">//默认restrict是EA</span></div><div class="line">    template:<span class="string">'&lt;div&gt;try your best&lt;/div&gt;'</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>然后可以使用该指令，通过属性或者元素的方式进行指令的使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></div></pre></td></tr></table></figure>
<p>显示结果如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">try your best</div><div class="line">try your best</div></pre></td></tr></table></figure>
<ul>
<li>如下栗子我们定义的一个指令，template是函数的形式，function函数接受两个参数，第一个是element,表示使用此指令的元素，attrs是 实例的属性，它有一个元素上所有的属性组成集合</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">'hello1'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">template</span>:<span class="function"><span class="keyword">function</span>(<span class="params">ele,attr</span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">      <span class="comment">//为了便于说明函数传入的参数ele和attr到底代表的是哪些，我们可以打印出来看下具体的结果</span></div><div class="line">      <span class="keyword">return</span> <span class="string">'&lt;div&gt;'</span>+<span class="string">'hello '</span>+attr.info+<span class="string">'&lt;/div&gt;'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>然后可以使用该指令，通过属性或者元素的方式进行指令的调用，可以发现第一个调用输出arguments，ele参数代表hello1元素，attr参数代表hello1上面的属性的集合 ，第二次输出arguments,ele代表div元素，attr参数代表div上面的所有的属性的集合</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">hello1</span> <span class="attr">info</span> = <span class="string">'Jhon'</span>&gt;</span><span class="tag">&lt;/<span class="name">hello1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">hello1</span> <span class="attr">info</span>=<span class="string">'JiM'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>显示结果如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hello Jhon</div><div class="line">hello JiM</div></pre></td></tr></table></figure>
<p>html的结构如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">hello1</span> <span class="attr">info</span> = <span class="string">'Jhon'</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span>hello Jhon<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">hello1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">hello1</span> <span class="attr">info</span>=<span class="string">'JiM'</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span>hello JiM<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="1-5-replace-布尔型，默认值为false，设置为true的时候，表示可以用自定义的模板内容的标签替换自定义的元素标签。在上例子的基础上，变化如下，大家可以对比下上述两者html的结构的区别"><a href="#1-5-replace-布尔型，默认值为false，设置为true的时候，表示可以用自定义的模板内容的标签替换自定义的元素标签。在上例子的基础上，变化如下，大家可以对比下上述两者html的结构的区别" class="headerlink" title="1.5 replace  布尔型，默认值为false，设置为true的时候，表示可以用自定义的模板内容的标签替换自定义的元素标签。在上例子的基础上，变化如下，大家可以对比下上述两者html的结构的区别"></a>1.5 replace  布尔型，<strong>默认值为false</strong>，设置为true的时候，表示可以用自定义的模板<strong>内容的标签</strong>替换自定义的<strong>元素标签</strong>。在上例子的基础上，变化如下，大家可以对比下上述两者html的结构的区别</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">'hello1'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">replace</span>:<span class="literal">true</span>,</div><div class="line">    <span class="attr">template</span>:<span class="function"><span class="keyword">function</span>(<span class="params">ele,attr</span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">      <span class="keyword">return</span> <span class="string">'&lt;div&gt;'</span>+<span class="string">'hello '</span>+attr.info+<span class="string">'&lt;/div&gt;'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>html结构</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">hello1</span>=<span class="string">""</span> <span class="attr">info</span>=<span class="string">"JiM"</span>&gt;</span>hello JiM<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">info</span>=<span class="string">"Jhon"</span>&gt;</span>hello Jhon<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="1-6-templateUrl-（字符串或者函数），可选参数，可以是"><a href="#1-6-templateUrl-（字符串或者函数），可选参数，可以是" class="headerlink" title="1.6 templateUrl （字符串或者函数），可选参数，可以是"></a>1.6 templateUrl <strong>（字符串或者函数），可选参数，可以是</strong></h3><p>（1）一个代表HTML文件路径的字符串</p>
<p>（2）一个函数，可接受两个参数tElement和tAttrs（大致同上）</p>
<p>1.6.1  templateUrl接受一个字符串</p>
<p>index.html页面中有如下代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/ng-template'</span> <span class="attr">id</span>=<span class="string">'courage.html'</span>&gt;</span><span class="xml"></span></div><div class="line">//注意，模板文件的type属性必须是  ng-template ,表示以angular的规则进行模板的解析</div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>that is awesome to learn more about IT <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>我们可以定义一个指令</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">'courage'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">templateUrl</span>:<span class="string">"courage.html"</span>,</div><div class="line">    <span class="attr">replace</span>:<span class="literal">true</span>,</div><div class="line">    <span class="attr">restrict</span>:<span class="string">'E'</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>调用指令</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">conrage</span>&gt;</span><span class="tag">&lt;/<span class="name">conrage</span>&gt;</span></div></pre></td></tr></table></figure>
<p>页面显示的html结构如下(注意restrict和replace属性的设置对于显示的影响)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>this is awesome to learn more about IT <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.6.2 templateUrl接受一个函数</p>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'myApp'</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'myCtrl'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">courage</span> <span class="attr">type</span>=<span class="string">'one'</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">courage</span> <span class="attr">type</span>=<span class="string">'two'</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../libs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">    app.controller(<span class="string">'myCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.info = &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">'Jhon'</span>,</div><div class="line">            <span class="attr">age</span>  : <span class="string">'19'</span></div><div class="line">        &#125;</div><div class="line">    &#125;])</div><div class="line">    app.directive(<span class="string">'courage'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">templateUrl</span> : <span class="function"><span class="keyword">function</span>(<span class="params">ele,attr</span>)</span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">                <span class="keyword">return</span> <span class="string">'courage'</span>+ attr.type+<span class="string">'.html'</span>;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>courageone.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>this is courage1:`&#123;&#123;info.name&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>couragetwo.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>this is courage2:`&#123;&#123;info.age&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="1-7-scope-默认值是false"><a href="#1-7-scope-默认值是false" class="headerlink" title="1.7 scope 默认值是false"></a>1.7 scope <strong>默认值是false</strong></h3><p>false表示继承父作用域的值，<strong>且不进行隔离</strong>，子作用域和父作用域的改变都将影响变量的值；</p>
<p>true表示继承父作用域的值，但是进行隔离，这种效果和设置两个控制器的效果是一样的；</p>
<p><code>{}</code>：没有继承父亲的值，所以儿子的值为空，改变任何一方的值都不会影响另一方，这就是不继承且隔离;</p>
<p>当想要创建一个可重用的组件时，隔离作用域是一个很好的选择，通过隔离作用域，我们可以确保指令是独立的，并且可以轻松的插入到任何HTML APP中，并且这种做法防止了父作用域被污染。</p>
<p>先来看下作用域，我们知道，每定义一个控制器就会形成一个scope对象，该对象可以表示一个作用域，并且继承了父作用域的数据；我们从下面的例子可以改变输入的名字，</p>
<ul>
<li>子作用域继承了父作用域的变量</li>
<li>子作用域和父作用域的变量的改变是相互独立的，也就是说子作用域是继承且隔离的</li>
</ul>
<p>1.7.1 先来看下controller控制器下面的作用的效果，子作用域和父作用域是继承且隔离的效果，子作用域的变量的变化不会污染到父作用域；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'app'</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'parent'</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'name'</span> <span class="attr">placeholder</span>=<span class="string">'please input your name'</span>/&gt;</span></div><div class="line">    parent:`&#123;&#123;name&#125;&#125;`</div><div class="line">    age:`&#123;&#123;age&#125;&#125;`</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'child'</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'name'</span> <span class="attr">placeholder</span>=<span class="string">'please input your name'</span>/&gt;</span></div><div class="line">        child:`&#123;&#123;name&#125;&#125;`</div><div class="line">        age :`&#123;&#123;age&#125;&#125;`</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>,[]);</div><div class="line">    app.controller(<span class="string">'parent'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.name = <span class="string">"Jhon"</span>;</div><div class="line">        $scope.age = <span class="number">19</span> ;</div><div class="line">    &#125;]);</div><div class="line">    app.controller(<span class="string">'child'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.name = <span class="string">"JiM"</span>;</div><div class="line">    &#125;]);</div><div class="line"></div><div class="line">    <span class="comment">//这种情势下的scope作用域是继承且隔离的，子作用域内的变量的改变不会对父作用域内的变量有任何的影响</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.7.2 再来看下我们自定义directive的时候的scope不同的设置情况的效果</p>
<p>false的情况(或者没有设置的时候默认的情况)，子作用域会污染父作用域的变量，<strong>继承且不隔离</strong></p>
<p>true的情况，和1.7.1controller的效果一样，<strong>继承且隔离</strong>，这种情况下也就是一般的原型继承的情况</p>
<p><code>{ }</code> 的情况，表示<strong>不继承且隔离</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'app'</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'parent'</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'name'</span>/&gt;</span></div><div class="line">    parent:`&#123;&#123;name&#125;&#125;`</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">child</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>,[]);</div><div class="line">    app.controller(<span class="string">'parent'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.name = <span class="string">"Jhon"</span>;</div><div class="line">    &#125;]);</div><div class="line">    app.directive(<span class="string">'child'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> &#123;</div><div class="line">           <span class="attr">replace</span>:<span class="literal">true</span> ,<span class="comment">//默认值是false</span></div><div class="line">           restrict:<span class="string">'EA'</span>,</div><div class="line">           <span class="attr">scope</span>:<span class="literal">false</span>,</div><div class="line">           <span class="attr">template</span>:<span class="string">''</span>+</div><div class="line">           <span class="string">'&lt;div&gt;'</span>+</div><div class="line">                <span class="string">'&lt;input type="text" ng-model = "name"/&gt;'</span>+</div><div class="line">                <span class="string">`'child:&#123;&#123;name&#125;&#125;'`</span>+</div><div class="line">           <span class="string">'&lt;/div&gt;'</span></div><div class="line">       &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">//这种情势下的scope作用域是继承且隔离的，子作用域内的变量的改变不会对父作用域内的变量有任何的影响</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.7.3  当我们将scope设置为{ }  的时候，此时子作用域无法再访问父作用域的变量值，这个时候需要我们做出一些调整，让子作用域可以访问父作用域的变量，但是不会污染父作用域</p>
<ul>
<li>采用 @ 进行单向绑定，也就是说，改变父作用域的name的值，directive里面的name也会改变，但是改变隔离区directive里面的name,父作用域里面的name是不会发生改变的;也就是达到<strong>继承且隔离</strong>的效果</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'app'</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'parent'</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'name'</span>/&gt;</span></div><div class="line">    parent:`&#123;&#123;name&#125;&#125;`</div><div class="line"></div><div class="line">    <span class="comment">&lt;!--&lt;child name="&#123;&#123;name&#125;&#125;"&gt;&lt;/child&gt;--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">your-name</span>=`"&#123;&#123;<span class="attr">name</span>&#125;&#125;"`&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>,[]);</div><div class="line">    app.controller(<span class="string">'parent'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.name = <span class="string">"Jhon"</span>;</div><div class="line">    &#125;]);</div><div class="line">    app.directive(<span class="string">'child'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">replace</span>:<span class="literal">true</span> ,<span class="comment">//默认值是false</span></div><div class="line">            restrict:<span class="string">'EA'</span>,</div><div class="line">            <span class="attr">scope</span>:&#123;</div><div class="line">              <span class="comment">//如果绑定的隔离作用域属性名与元素的属性名相同，则可以采用缺省写法</span></div><div class="line"><span class="comment">//                name:'@'   //对应&lt;child name="&#123;&#123;name&#125;&#125;"&gt;&lt;/child&gt; </span></div><div class="line">                name:<span class="string">"@yourName"</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">template</span>:<span class="string">''</span>+</div><div class="line">            <span class="string">'&lt;div&gt;'</span>+</div><div class="line">            <span class="string">'&lt;input type="text" ng-model = "name"/&gt;'</span>+</div><div class="line">            <span class="string">`'child:&#123;&#123;name&#125;&#125;'`</span>+</div><div class="line">            <span class="string">'&lt;/div&gt;'</span></div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">//这种情势下的scope作用域是继承且隔离的，子作用域内的变量的改变不会对父作用域内的变量有任何的影响</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>此时template生成的html结构如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">your-name</span>=<span class="string">"Jhon"</span> <span class="attr">class</span>=<span class="string">"ng-binding ng-isolate-scope"</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"name"</span> <span class="attr">class</span>=<span class="string">"ng-valid ng-not-empty ng-dirty ng-touched"</span>&gt;</span>child:Jhon</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//我们可以大致的模拟下ng-controller的实现原理</span></div><div class="line">app.directive(<span class="string">"myController"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;    </div><div class="line">  <span class="keyword">return</span> &#123;        </div><div class="line">    <span class="attr">scope</span>: <span class="literal">true</span>,   <span class="comment">//scope设置为true，     </span></div><div class="line">    controller: <span class="string">'@'</span>   </div><div class="line">  &#125;&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>采用 = 进行双向绑定，也就是说，改变父作用域的name的值，directive里面的name也会改变，同样改变隔离区directive里面的name,父作用域里面的name是也会发生改变的;此时达到了 <strong>继承且不隔离</strong>的效果</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'app'</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'parent'</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'name'</span>/&gt;</span></div><div class="line">    parent:`&#123;&#123;name&#125;&#125;`</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--需要注意的一点是和&lt;child name="&#123;&#123;name&#125;&#125;"&gt;&lt;/child&gt;的写法不同，不然效果出不来--&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>,[]);</div><div class="line">    app.controller(<span class="string">'parent'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.name = <span class="string">"Jhon"</span>;</div><div class="line">    &#125;]);</div><div class="line">    app.directive(<span class="string">'child'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">replace</span>:<span class="literal">true</span> ,<span class="comment">//默认值是false</span></div><div class="line">            restrict:<span class="string">'EA'</span>,</div><div class="line">            <span class="attr">scope</span>:&#123;</div><div class="line"><span class="comment">//</span></div><div class="line">                name:<span class="string">'='</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">template</span>:<span class="string">''</span>+</div><div class="line">            <span class="string">'&lt;div&gt;'</span>+</div><div class="line">            <span class="string">'&lt;input type="text" ng-model = "name"/&gt;'</span>+</div><div class="line">            <span class="string">`'child:&#123;&#123;name&#125;&#125;'`</span>+</div><div class="line">            <span class="string">'&lt;/div&gt;'</span></div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">//这种情势下的scope作用域是继承且隔离的，子作用域内的变量的改变不会对父作用域内的变量有任何的影响</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>此时template生成的html结构如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">class</span>=<span class="string">"ng-binding ng-isolate-scope"</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"name"</span> <span class="attr">class</span>=<span class="string">"ng-valid ng-not-empty ng-dirty ng-touched ng-valid-parse"</span>&gt;</span>child:Jhon</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上面这个栗子当时选择的不好，关于name容易混淆，这里在写一个清晰一点的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'myApp'</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'stuInfoCtrl'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">stu-info</span> <span class="attr">info</span> = <span class="string">'jhon'</span>&gt;</span><span class="tag">&lt;/<span class="name">stu-info</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">stu-info</span> <span class="attr">info</span> = <span class="string">'merry'</span>&gt;</span><span class="tag">&lt;/<span class="name">stu-info</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../libs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">    app.controller(<span class="string">'stuInfoCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.jhon = &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">"Jhon"</span>,</div><div class="line">            <span class="attr">age</span>  : <span class="number">17</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        $scope.merry = &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">"merry"</span>,</div><div class="line">            <span class="attr">age</span>  : <span class="number">18</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;]);</div><div class="line"></div><div class="line">    app.directive(<span class="string">'stuInfo'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">restrict</span> : <span class="string">'E'</span>,</div><div class="line">            <span class="comment">// = 号表示继承父作用域变量，通过这种方式可以将controller中的scope中的属性Jhon merry传递给给info属性,然后可以这里理解: isoleStuInfo = info = $scope.jack</span></div><div class="line">            scope :&#123;</div><div class="line">                <span class="attr">isoleStuInfo</span> : <span class="string">'=info'</span></div><div class="line">            &#125;,</div><div class="line"></div><div class="line">            <span class="attr">template</span> : <span class="string">'&lt;div&gt;stuName:`&#123;&#123;isoleStuInfo.name&#125;&#125;`&lt;/div&gt;&lt;div&gt;stuAge:`&#123;&#123;isoleStuInfo.age&#125;&#125;`&lt;/div&gt;'</span></div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>通过以上示例我们这样可以将字符串或者一个对象传入isolate scope中</p>
<h3 id="1-8-transclude属性-表明自定义的指令是否可以被嵌入，配合ng-transclude指令使用"><a href="#1-8-transclude属性-表明自定义的指令是否可以被嵌入，配合ng-transclude指令使用" class="headerlink" title="1.8  transclude属性  表明自定义的指令是否可以被嵌入，配合ng-transclude指令使用"></a>1.8  transclude属性  表明自定义的指令是否可以被嵌入，配合ng-transclude指令使用</h3><p> transclude是一个可选的参数。如果设置了,其值必须为true,它的默认值是false。我们可以将整个模板,包括其中的指令通过嵌入全部传入一个指令中。这样做可以将任意内 容和作用域传递给指令。transclude参数就是用来实现这个目的的,指令的内部可以访问外部 指令的作用域,并且模板也可以访问外部的作用域对象。 为了将作用域传递进去,scope参数的值必须通过{}或true设置成隔离作用域。如果没有设 置scope参数,那么指令内部的作用域将被设置为传入模板的作用域</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'myApp'</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'stuInfoCtrl'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>this is Jhon<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">stu-info</span>  <span class="attr">ng-transclude</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>原来的内容jhon<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>`&#123;&#123;jhon.name&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">stu-info</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>this is merry<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">stu-info</span> <span class="attr">ng-transclude</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>原来的内容merry<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>`&#123;&#123;merry.name&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">stu-info</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../libs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">    app.controller(<span class="string">'stuInfoCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.jhon = &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">"Jhon"</span>,</div><div class="line">            <span class="attr">age</span>  : <span class="number">17</span></div><div class="line">        &#125;</div><div class="line">        $scope.merry = &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">"merry"</span>,</div><div class="line">            <span class="attr">age</span>  : <span class="number">18</span></div><div class="line">        &#125;</div><div class="line">    &#125;]);</div><div class="line"></div><div class="line">    app.directive(<span class="string">'stuInfo'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">restrict</span> : <span class="string">'E'</span>,</div><div class="line">            <span class="comment">// = 号表示继承父作用域变量，通过这种方式可以将scope中的属性传递给给info属性的方式</span></div><div class="line">             transclude : <span class="literal">true</span> ,</div><div class="line">            <span class="attr">scope</span>:&#123;&#125;,</div><div class="line">            <span class="attr">template</span> : <span class="string">'&lt;div&gt;模板的内容&lt;/div&gt;'</span></div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>控制台最终的结果如下:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">this is Jhon</div><div class="line"></div><div class="line">模板的内容</div><div class="line">原来的内容jhon</div><div class="line">Jhon</div><div class="line"></div><div class="line">this is merry</div><div class="line"></div><div class="line">模板的内容</div><div class="line">原来的内容merry</div><div class="line">merry</div></pre></td></tr></table></figure>
<p>1.9 </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/20/126nodeJS /">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/20/126nodeJS /" itemprop="url">
                  NodeJsFoundation
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-20T12:36:00+08:00">
                2016-11-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/nodejs/" itemprop="url" rel="index">
                    <span itemprop="name">nodejs</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##1 node.js基础</p>
<ul>
<li>是建立在Chrome的JavaScript运行时很容易构建快速，可扩展的网络应用程序的平台。 Node.js使用<strong>事件驱动</strong>，<strong>非阻塞I/O模型</strong>，使得它重量轻，效率高，完美的跨分布式设备<strong>运行数据密集型</strong>实时应用。</li>
<li>传统的网络服务技术，是每个新增一个连接（请求）便生成一个新的线程，这个新的线程会占用系统内存，最终会占掉所有的可用内存。而 Node.js 仅仅只运行在一个单线程中，使用非 阻塞的异步 I/O 调用，所有连接都由该线程处理，在 libuv 的加分下，可以允许其<strong>支持数万并发连接</strong>（全部挂在该线程的<a href="http://en.wikipedia.org/wiki/Nodejs" target="_blank" rel="external">事件循环</a>中）。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Node.js = Runtime Environment + JavaScript Library</div></pre></td></tr></table></figure>
<h3 id="1-1-node-js的特性"><a href="#1-1-node-js的特性" class="headerlink" title="1.1 node.js的特性"></a>1.1 node.js的特性</h3><ul>
<li><strong>Node.js库异步和事件驱动 - </strong>所有API异步是非阻塞。 这意味着一个基于Node.js的服务器不会等待API返回数据。 服务器移动到下一个API后调用它，Node.js事件的一个通知机制有助于服务器，以获得从以API调用的响应。</li>
<li><strong>非常快</strong> - 正在构建在谷歌Chrome的V8 JavaScript引擎，Node.js库代码执行是非常快的。</li>
<li><strong>单线程但高度可扩展</strong> - Node.js使用事件循环单线程模型。事件机制有助于服务器在非阻塞的方式作出反应，并使得服务器的高可扩展性，而不是它创建线程限制来处理请求的传统服务器。 Node.js使用单线程的程序和同样的程序处理比传统的服务器要大的多，比如：比Apache HTTP服务器请求服务的数量大得多。</li>
<li><strong>无缓冲</strong> - Node.js的应用从来没有缓冲任何数据。这些应用程序只需输出块中的数据。</li>
<li><strong>许可证</strong> - Node.js是在MIT许可下发布的。</li>
</ul>
<h3 id="1-2-node-js使用"><a href="#1-2-node-js使用" class="headerlink" title="1.2 node.js使用"></a>1.2 node.js使用</h3><ul>
<li><p>引入 required 模块：我们可以使用 require 指令来载入 Node.js 模块。</p>
<p>这个是Node.js自带的http模块，然后将其赋值给http变量</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>);</div></pre></td></tr></table></figure>
<ul>
<li>创建服务器：服务器可以监听客户端的请求，类似于 Apache 、Nginx 等 HTTP 服务器。以下代码可以建立一个正常工作的HTTP服务器；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line"><span class="comment">//http模块提供的函数:createSever，该函数会返回一个对象，这个对象有一个listen方法，listen方法有一个数值参数，指定  这个HTTP服务器监听的端口号</span></div><div class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">// 发送 HTTP 头部 </span></div><div class="line">	<span class="comment">// HTTP 状态值: 200 : OK</span></div><div class="line">	<span class="comment">// 内容类型: text/plain</span></div><div class="line">	response.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>&#125;);</div><div class="line"></div><div class="line">	<span class="comment">// 发送响应数据 "Hello World"</span></div><div class="line">	response.end(<span class="string">'Hello World\n'</span>);</div><div class="line">&#125;).listen(<span class="number">8888</span>);</div><div class="line"></div><div class="line"><span class="comment">// 终端打印如下信息</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Server running at http://127.0.0.1:8888/'</span>);</div></pre></td></tr></table></figure>
<ul>
<li>接收请求与响应请求 服务器很容易创建，客户端可以使用浏览器或终端发送 HTTP 请求，服务器接收请求后返回响应数据。</li>
</ul>
<h3 id="1-3-nodejs组成"><a href="#1-3-nodejs组成" class="headerlink" title="1.3 nodejs组成"></a>1.3 nodejs组成</h3><ul>
<li>核心模块  由node环境提供，比如http  fs，url , path等模块</li>
<li>第三方模块，由社区，比如第三方提供，例如gulp browerSync moment等</li>
</ul>
<p>##2 npm使用简介</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ npm -v  查看版本号</div><div class="line">$ npm install &lt;Module name&gt;  安装Node.js的模块的语法格式，比如</div><div class="line">$ npm install express (本地安装)这个是常用的web框架模块 express</div><div class="line">$ npm install express -g (全局安装)</div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>) ; <span class="comment">//安装好之后，express 包就放在了工程目录下的 node_modules 目录中，因此在代码中只需要通过 require('express') 的方式就好，无需指定第三方包路径。</span></div><div class="line">$ npm uninstall express <span class="comment">//卸载Node.js模块</span></div><div class="line">$ npm ls 命令可以查看本地安装的包</div><div class="line">$ npm ls -g 命令可以查看全局安装的包</div><div class="line">$ npm search express 可以用来搜索模块</div><div class="line">$ npm init 可以创建模块，这个模块是你自己的模块，会创建一个package。json文件</div><div class="line">$ npm publish 可以发布模块，发布以后就可以像其他模块一样使用npm来进行安装</div><div class="line">比如 创建一个 $ npm init myMoudle 信息填写正确之后</div><div class="line">$ npm install myModule 可以安装这个模块</div></pre></td></tr></table></figure>
<h3 id="Package-json-属性说明"><a href="#Package-json-属性说明" class="headerlink" title="Package.json 属性说明"></a>Package.json 属性说明</h3><ul>
<li><strong>name</strong> - 包名。</li>
<li><strong>version</strong> - 包的版本号。</li>
<li><strong>description</strong> - 包的描述。</li>
<li><strong>homepage</strong> - 包的官网 url 。</li>
<li><strong>author</strong> - 包的作者姓名。</li>
<li><strong>contributors</strong> - 包的其他贡献者姓名。</li>
<li><strong>dependencies</strong> - 依赖包列表。如果依赖包没有安装，npm 会自动将依赖包安装在 node_module 目录下。</li>
<li><strong>repository</strong> - 包代码存放的地方的类型，可以是 git 或 svn，git 可在 Github 上。</li>
<li><strong>main</strong> - main 字段是一个模块ID，它是一个指向你程序的主要项目。就是说，如果你包的名字叫 express，然后用户安装它，然后require(“express”)。</li>
<li><strong>keywords</strong> - 关键字</li>
</ul>
<h3 id="NPM-常用命令"><a href="#NPM-常用命令" class="headerlink" title="NPM 常用命令"></a>NPM 常用命令</h3><p>除了本章介绍的部分外，NPM还提供了很多功能，package.json里也有很多其它有用的字段。</p>
<p>NPM提供了很多命令，例如install和publish，使用npm help可查看所有命令。</p>
<ul>
<li>NPM提供了很多命令，例如<code>install</code>和<code>publish</code>，使用<code>npm help</code>可查看所有命令。</li>
<li>使用<code>npm help</code>可查看某条命令的详细帮助，例如<code>npm help install</code>。</li>
<li>在<code>package.json</code>所在目录下使用<code>npm install . -g</code>可先在本地安装当前命令行程序，可用于发布前的本地测试。</li>
<li>使用<code>npm update</code>可以把当前目录下<code>node_modules</code>子目录里边的对应模块更新至最新版本。</li>
<li>使用<code>npm update  -g</code>可以把全局安装的对应命令行程序更新至最新版。</li>
<li>使用<code>npm cache clear</code>可以清空NPM本地缓存，用于对付使用相同版本号发布新版本代码的人。</li>
<li>使用<code>npm unpublish @</code>可以撤销发布自己发布过的某个版本代码。</li>
</ul>
<h2 id="3-Node-js-REPL-Read-Eval-Print-Loop-交互式解释器"><a href="#3-Node-js-REPL-Read-Eval-Print-Loop-交互式解释器" class="headerlink" title="3 Node.js REPL(Read Eval Print Loop) (交互式解释器)"></a>3 Node.js REPL(Read Eval Print Loop) (交互式解释器)</h2><ul>
<li><strong>读取</strong> - 读取用户输入，解析输入了Javascript 数据结构并存储在内存中。</li>
<li><strong>执行</strong> - 执行输入的数据结构</li>
<li><strong>打印</strong> - 输出结果</li>
<li><strong>循环</strong> - 循环操作以上步骤直到用户两次按下 <strong>ctrl-c</strong> 按钮退出。</li>
</ul>
<p>Node 的交互式解释器可以很好的调试 Javascript 代码。并且可以直接调试node核心模块的代码;</p>
<p>比如下面的一些调试方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">$ node   <span class="comment">//可以启动node的终端</span></div><div class="line">&gt; url.parse(<span class="string">'http://localhost:3000/a/b/c/d?name=Jhon'</span>,<span class="literal">true</span>)</div><div class="line">Url &#123;</div><div class="line">  <span class="attr">protocol</span>: <span class="string">'http:'</span>,</div><div class="line">  <span class="attr">slashes</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">auth</span>: <span class="literal">null</span>,</div><div class="line">  <span class="attr">host</span>: <span class="string">'localhost:3000'</span>,</div><div class="line">  <span class="attr">port</span>: <span class="string">'3000'</span>,</div><div class="line">  <span class="attr">hostname</span>: <span class="string">'localhost'</span>,</div><div class="line">  <span class="attr">hash</span>: <span class="literal">null</span>,</div><div class="line">  <span class="attr">search</span>: <span class="string">'?name=Jhon'</span>,</div><div class="line">  <span class="attr">query</span>: &#123; <span class="attr">name</span>: <span class="string">'Jhon'</span> &#125;,</div><div class="line">  <span class="attr">pathname</span>: <span class="string">'/a/b/c/d'</span>,</div><div class="line">  <span class="attr">path</span>: <span class="string">'/a/b/c/d?name=Jhon'</span>,</div><div class="line">  <span class="attr">href</span>: <span class="string">'http://localhost:3000/a/b/c/d?name=Jhon'</span> &#125;</div><div class="line"><span class="comment">//使用简单表达式</span></div><div class="line">&gt; <span class="number">3</span>*<span class="number">6</span></div><div class="line"><span class="number">18</span></div><div class="line"><span class="comment">//使用变量</span></div><div class="line">&gt; <span class="keyword">var</span> x = <span class="number">10</span> </div><div class="line"><span class="literal">undefined</span>  <span class="comment">//使用var生命的变量可以使用console.log打印出来</span></div><div class="line">&gt; <span class="built_in">console</span>.log(x)</div><div class="line">&gt; <span class="built_in">console</span>.log(<span class="string">'hello there'</span>)</div><div class="line">&gt; x = <span class="number">10</span> </div><div class="line"><span class="number">10</span>       <span class="comment">//没有使用var声明的变量在回车键之后会直接打印出来</span></div><div class="line"><span class="comment">//多行表达式</span></div><div class="line">&gt; <span class="keyword">var</span> x = <span class="number">0</span></div><div class="line"><span class="literal">undefined</span></div><div class="line">&gt; <span class="keyword">do</span> &#123;</div><div class="line">... x++;  <span class="comment">//···符号是系统自动生成的，node会自动检测是否是连续的表达式</span></div><div class="line">... console.log(<span class="string">"x: "</span> + x);</div><div class="line">... &#125; <span class="keyword">while</span> ( x &lt; <span class="number">5</span> );</div><div class="line">x: <span class="number">1</span></div><div class="line">x: <span class="number">2</span></div><div class="line">x: <span class="number">3</span></div><div class="line">x: <span class="number">4</span></div><div class="line">x: <span class="number">5</span></div><div class="line"><span class="literal">undefined</span></div><div class="line"><span class="comment">//下划线(_) 变量可以直接获取表达式的运算结果</span></div><div class="line">&gt; <span class="keyword">var</span> x =<span class="number">100</span></div><div class="line"><span class="literal">undefined</span>    <span class="comment">//var声明的变量不会直接打印出来</span></div><div class="line">&gt; <span class="keyword">var</span> y = _  <span class="comment">// _ 变量可以获取表达式运算的结果</span></div><div class="line"><span class="literal">undefined</span>	<span class="comment">//var声明的变量不会直接打印出来</span></div><div class="line">&gt; x++      <span class="comment">//表达式运算的结果也会直接打印出来</span></div><div class="line"><span class="number">100</span></div><div class="line">&gt; <span class="keyword">var</span> y = _  </div><div class="line"><span class="literal">undefined</span></div><div class="line">&gt; <span class="built_in">console</span>.log(y)  <span class="comment">//打印运算结果</span></div><div class="line"><span class="number">100</span></div><div class="line"><span class="literal">undefined</span></div><div class="line">&gt; ++x</div><div class="line"><span class="number">102</span></div><div class="line">&gt; <span class="keyword">var</span> y = _</div><div class="line"><span class="literal">undefined</span></div><div class="line">&gt; <span class="built_in">console</span>.log(y)</div><div class="line"><span class="number">102</span></div><div class="line"><span class="literal">undefined</span></div><div class="line">&gt; x+y</div><div class="line"><span class="number">204</span></div><div class="line">&gt; <span class="keyword">var</span> z = _</div><div class="line"><span class="literal">undefined</span></div><div class="line">&gt; <span class="built_in">console</span>.log(z)</div><div class="line"><span class="number">204</span></div><div class="line">&gt;</div></pre></td></tr></table></figure>
<h3 id="REPL-命令"><a href="#REPL-命令" class="headerlink" title="REPL 命令"></a>REPL 命令</h3><ul>
<li><strong>ctrl + c</strong> - 退出当前终端。</li>
<li><strong>ctrl + c 按下两次</strong> - 退出 Node REPL。</li>
<li><strong>ctrl + d</strong> - 退出 Node REPL.</li>
<li><strong>向上/向下 键</strong> - 查看输入的历史命令</li>
<li><strong>tab 键</strong> - 列出当前命令</li>
<li><strong>.help</strong> - 列出使用命令</li>
<li><strong>.break</strong> - 退出多行表达式</li>
<li><strong>.clear</strong> - 退出多行表达式</li>
<li><strong>.save filename</strong> - 保存当前的 Node REPL 会话到指定文件</li>
<li><strong>.load filename</strong> - 载入当前 Node REPL 会话的文件内容。</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/19/19-transform(3d)：/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/19/19-transform(3d)：/" itemprop="url">
                  Transform
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-19T12:36:00+08:00">
                2016-11-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Transform(3d)：x轴向右是正方向，y轴向下是正方向，z轴垂直向外是正方向；注意transform:rotate(angle)，可以使元素发生旋转，发生旋转之后的元素，其对应的  x  y  z的方向指向会发生变化，本文重点讲解；</p>
<p><strong>在设置transition的前提下，transform变换才会有类似动画的效果</strong></p>
<p>一：首先看一些有关3d的常用属性：</p>
<ul>
<li><p>transform-origin：参数1   参数2 </p>
<p>设置对象的围绕的旋转中心，默认值是50% 50% </p>
</li>
</ul>
<p>参数1 取值：百分比  基准是元素自身宽度，length 值，left center right  分别旋转中心是水平方向的左边界  居中 和右边界</p>
<p>参数2  取值：百分比  基准是元素自身高度，length 值，top center bottom  分别旋转中心是水平方向的左边界  居中 和右边界</p>
<p>如果第二个值没有设置默认是50%；</p>
<ul>
<li><p>transform-style:flat | preserve-3d  默认是flat</p>
<p>指定某元素的子元素是（看起来）位于三维空间内，还是在该元素所在的平面内被扁平化。只有在设置该属性值为preserve-3d的时候，才会有rotatex  rotatey rotatez属性值，因为在2d里面只有rotate  </p>
</li>
</ul>
<p>当该属性值为「preserve-3d」时，元素将会创建局部堆叠上下文。<br>决定一个变换元素看起来是处在三维空间还是平面内，需要该元素的父元素上定义 &lt;’ transform-style ‘&gt; 属性。</p>
<ul>
<li>perspective ：none |length    默认是none</li>
</ul>
<p>指定某元素距离浏览器窗口的垂直于浏览器窗口的距离，当length&gt;0  的时候，会使得元素看起来比实际要大，length&lt;0 的时候，会使得元素看起来比实际要小。</p>
<ul>
<li>translate3d(x,y,z )三个参数不允许省略；</li>
</ul>
<p>二  老司机带带我，不要走错路</p>
<p>transform: rotate(angle)  translate(length  | percentage)之间的关系。translate的百分比取值元素自身的宽(x)和高(y)来确定移动的距离。</p>
<p>1 明确浏览器的解析过程，从上到下  从左到右</p>
<p>2 明确rotate()会使坐标也跟着旋转  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">        img &#123;</div><div class="line">           /*transform: translateX(1000px) translateY(500px) rotateZ(90deg);*/</div><div class="line">          transform: translateX(1000px) rotateZ(90deg) translateX(500px);</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/car.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>代码执行过程1：</li>
</ul>
<p>transform: translateX(1000px) translateY(500px) rotateZ(90deg);</p>
<p>对应的图片如下：执行过程是先向x轴正方向移动1000px，在向y轴正方向移动500px,然后图片围绕元素中心旋转90deg。 </p>
<p><img src="img/xy1.jpg" alt="图xy1 : xy轴如下  "></p>
<p>执行完之后是</p>
<p><img src="img/xy2.jpg" alt="图xy2  :执行完rotateZ(90deg)"></p>
<ul>
<li><p>代码执行2 </p>
<p>transform: translateX(1000px) rotateZ(90deg) translateX(500px);</p>
</li>
</ul>
<p>最初状态是     图xy1  先向x轴正方向移动1000px 然后执行rotateZ(90deg),此时图片变换为   图xy2  所以这一步还是对应translateX(500px)来移动飞车。</p>
<p>注意：一般建议将旋转放在最后。不过还是眼看项目实际需求来</p>
<p>三  撸一段动画大家体验下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">        img &#123;</div><div class="line">            width: 200px;</div><div class="line">        &#125;</div><div class="line">        @keyframes autoMove&#123;</div><div class="line">            20%&#123;</div><div class="line">                /*0~40%的时候的变换过程,初始默认x向右 y向下 z垂直向外*/</div><div class="line">                transform:translatex(1000px)</div><div class="line">            &#125;</div><div class="line">            25%&#123;</div><div class="line">                /*40%~50%的时候的变换过程*/</div><div class="line">                transform: translatex(1000px)  rotatez(90deg);</div><div class="line">            &#125;</div><div class="line">            50%&#123;</div><div class="line">                /*50%~90%时候的变换过程*/</div><div class="line">                transform: translatex(1000px) translatey(500px) rotatez(90deg) ;</div><div class="line">            &#125;</div><div class="line">            55%&#123;</div><div class="line">                /*注意每次的变化都是在上一次的基础上进行变化*/</div><div class="line">                transform:translatex(1000px) translatey(500px)  rotatez(180deg);</div><div class="line">            &#125;</div><div class="line">            75% &#123;</div><div class="line">                transform:translatex(0px) translatey(500px) rotate(180deg);</div><div class="line">            &#125;</div><div class="line">            80% &#123;</div><div class="line">                transform: translatex(0px) translatey(500px) rotate(270deg);</div><div class="line">            &#125;</div><div class="line">            95% &#123;</div><div class="line">                transform: translatex(0px) translatey(0px) rotate(270deg);</div><div class="line">            &#125;</div><div class="line">            100%&#123;</div><div class="line">                transform:translatex(0px) translatey(0px) rotate(360deg);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">        .autoMove&#123;</div><div class="line">            </div><div class="line">            animation:autoMove 5s linear ;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    /*注意，每次动画都要保持上一步动画的结果，才能继续进行动画，如果不保持上一步动画的结果，那么会导致动画回归到原来的值*/</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/car.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"autoMove"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1 建议将每个阶段的动画注释掉，看下效果。</p>
<p>2  旋转的效果都是放在了最后，避免混乱。</p>
<p><img src="img/car.gif" alt="gif动画效果"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/17/174Angular-Js-MVVM-双向数据绑定如何实现/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/17/174Angular-Js-MVVM-双向数据绑定如何实现/" itemprop="url">
                  Angular Js MVVM 双向数据绑定如何实现
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-17T12:36:00+08:00">
                2016-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-我们先来看一个简单的双向数据绑定的demo"><a href="#1-我们先来看一个简单的双向数据绑定的demo" class="headerlink" title="1 我们先来看一个简单的双向数据绑定的demo"></a>1 我们先来看一个简单的双向数据绑定的demo</h3><p>1.1点击按钮，数据的变化会实现在页面上显示出来</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">"myApp"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'myCtrl'</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>  <span class="attr">ng-bind</span> = <span class="string">'count'</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">sapn</span> <span class="attr">ng-click</span> =<span class="string">' increase() '</span> &gt;</span>icrease<span class="tag">&lt;/<span class="name">sapn</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../libs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">    app.controller(<span class="string">'myCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.count = <span class="number">1</span> ;</div><div class="line">        $scope.increase = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            $scope.count++;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;])   </div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.2 angular底层是如何实现这种数据的双向绑定的呢？(参阅angular沉思录)</p>
<p>铺垫一点基础知识</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span> = <span class="string">'inc1'</span> <span class="attr">id</span> = <span class="string">'btn'</span>&gt;</span>increase<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> ret = <span class="built_in">document</span>.querySelector(<span class="string">'#btn'</span>).getAttribute(<span class="string">'ng-click'</span>);</div><div class="line">    <span class="built_in">console</span>.log(ret);<span class="comment">//inc1</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> ret);<span class="comment">//string</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>[ret]);<span class="comment">//function inc1()&#123;&#125;函数</span></div><div class="line">    <span class="built_in">window</span>[ret]();<span class="comment">//inc1被执行了</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inc1</span> (<span class="params"></span>)</span>&#123;  <span class="comment">//这个相当于给window对象添加一个属性，属性名是 inc1</span></div><div class="line">        counter++ ;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'inc1倍执行了'</span>);</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>two-way binding<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">"init()"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"inc"</span>&gt;</span></div><div class="line">    increase 1</div><div class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"inc2"</span>&gt;</span></div><div class="line">    increase 2</div><div class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color:red"</span> <span class="attr">ng-bind</span>=<span class="string">"counter"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color:blue"</span> <span class="attr">ng-bind</span>=<span class="string">"counter"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color:green"</span> <span class="attr">ng-bind</span>=<span class="string">"counter"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line">    <span class="comment">/* 数据模型区开始 */</span></div><div class="line">    <span class="keyword">var</span> counter = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inc</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"1"</span>);</div><div class="line">        counter++;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inc2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"2"</span>);</div><div class="line">        counter+=<span class="number">2</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/* 数据模型区结束 */</span></div><div class="line"></div><div class="line">    <span class="comment">/* 绑定关系区开始 */</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        bind();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> list = <span class="built_in">document</span>.querySelectorAll(<span class="string">"[ng-click]"</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;list.length; i++) &#123;</div><div class="line">            list[i].onclick = (<span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                    <span class="built_in">window</span>[  list[index].getAttribute(<span class="string">"ng-click"</span>)  ]();<span class="comment">//inc函数会执行</span></div><div class="line">                    apply();</div><div class="line">                &#125;;</div><div class="line">            &#125;)(i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">apply</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> list = <span class="built_in">document</span>.querySelectorAll(<span class="string">"[ng-bind='counter']"</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;list.length; i++) &#123;</div><div class="line">            list[i].innerHTML = counter;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">/* 绑定关系区结束 */</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="2-angular中的-apply-digest"><a href="#2-angular中的-apply-digest" class="headerlink" title="2 angular中的\$apply   \$digest"></a>2 angular中的\$apply   \$digest</h3><p>首先我们来看下它们的作用，当我们在angularjs之外的上下文改变了model的时候，如何让angular进行页面的刷新呢？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"test"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"CounterCtrl"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">myclick</span>&gt;</span>increase<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-bind</span>=<span class="string">"counter"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../libs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">"test"</span>, []);</div><div class="line"></div><div class="line">    app.directive(<span class="string">"myclick"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">scope, element, attr</span>) </span>&#123;</div><div class="line">            element.on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                scope.counter++;</div><div class="line">                <span class="built_in">console</span>.log(scope.counter);</div><div class="line">            &#125;);</div><div class="line">        &#125;;</div><div class="line">    &#125;);</div><div class="line">    app.controller(<span class="string">"CounterCtrl"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">        $scope.counter = <span class="number">0</span>;</div><div class="line">    &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这个时候我们是通过javascript处理函数改变了scope的counter值，此时会发现view视图上并不会跟随变化，但是控制打印出来的却是变化了的值。这是因为</p>
<ul>
<li>angularjs只负责发生在angularjs上下文中的对于models 的更改会做出自动的回应(也就是$apply方法中对于model的更改orangular内置的其他服务)</li>
<li>对于angular上下之外的其他地方修改的model,这个时候就需要手动调用$apply来触发一轮\$digest检测</li>
<li>build-in的一些 ng-event指令以及ng-model $timeout等都会自动触发一次\$digest循环</li>
</ul>
<p>以上代码指令自定义可以变成以下三种方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">"myclick"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">scope, element, attr</span>) </span>&#123;</div><div class="line">            element.on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                scope.counter++;</div><div class="line">                scope.$digest();</div><div class="line">              <span class="comment">// scope.$apply(); //不推荐这种写法</span></div><div class="line">                <span class="built_in">console</span>.log(scope.counter);</div><div class="line">            &#125;);</div><div class="line">        &#125;;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">app.directive(<span class="string">"myclick"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">scope, element, attr</span>) </span>&#123;</div><div class="line">            element.on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                scope.counter++;</div><div class="line"></div><div class="line">               scope.$apply(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                    scope.counter++;</div><div class="line">               &#125;);</div><div class="line">                <span class="built_in">console</span>.log(scope.counter);</div><div class="line">            &#125;);</div><div class="line">        &#125;;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>此时会发现view视图会随着model的改变实时更新了</p>
<p>再聚以个栗子</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'myApp'</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'myCtrl'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">ng-modle</span> = <span class="string">'name'</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'name'</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../libs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"> <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">app.controller(<span class="string">'myCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.setInfo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">           setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">              $scope.$apply(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                  $scope.name = <span class="string">'Jhon'</span>;</div><div class="line">                  $scope.age = <span class="number">19</span>;</div><div class="line">              &#125;)</div><div class="line">           &#125;,<span class="number">2000</span>)</div><div class="line">        &#125;</div><div class="line">        $scope.setInfo();</div><div class="line">    &#125;])</div><div class="line"><span class="comment">//两秒后，会显示修改的scope内容</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">app.controller(<span class="string">'myCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">      $scope.setInfo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">              $scope.name = <span class="string">'Jhon'</span>;</div><div class="line">              $scope.age = <span class="number">19</span> ;</div><div class="line">              $scope.$apply();</div><div class="line">          &#125;,<span class="number">2000</span>);</div><div class="line">      &#125;</div><div class="line">      $scope.setInfo();</div><div class="line">      <span class="built_in">console</span>.log($scope);</div><div class="line">  &#125;])</div></pre></td></tr></table></figure>
<h3 id="3-angular中的-watcher"><a href="#3-angular中的-watcher" class="headerlink" title="3 angular中的 $ watcher"></a>3 angular中的 $ watcher</h3><p>在上面的情况中，我们通过$apply \$digest函数的调用就可以将model模型上的数据变化实时反应在view层上，但是我们有没有思考为什么会model层的改变会实时显示在view层呢？这个时候就是watch的主要作用了当我们写下表达式，比如　<code></code>　的时候，angularjs在幕后为我们做了一件事情，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$scope.$watch(<span class="string">'somevalue'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">  <span class="comment">//这里实现更新view的逻辑，model层的数据变化实时更新到view层</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>也就是说，底层原理来讲是$watch回调函数的调用来执行的实时的数据更新，那么angularjs是怎么知道什么时候去调用这个回调函数呢？先抛出这个问题，看下这个demo，</p>
<ul>
<li>这种情况是scope模型上的数据改变了但是没有触发watch函数的情况，因为我们没有进行脏值检测$digest或者\$apply</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'myApp'</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'myCtrl'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../libs/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">    app.controller(<span class="string">'myCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">      $scope.age = <span class="number">19</span> ;</div><div class="line">      $scope.change = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          $scope.age++;</div><div class="line">          <span class="built_in">console</span>.log(<span class="string">"1"</span>);</div><div class="line">          <span class="built_in">console</span>.log($scope.age);</div><div class="line">        &#125;,<span class="number">2000</span>)</div><div class="line">      &#125;</div><div class="line">      $scope.change(); </div><div class="line">      $scope.$watch(<span class="string">'age'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);<span class="comment">//看下回调函数的参数</span></div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"age变化触发了我的出现"</span>);</div><div class="line">      &#125;)</div><div class="line">    &#125;])</div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>控制台会循环输出　1　和　　age的递增 ；</p>
<p>这个时候我们就需要思考了？通过什么方式触发$watch呢？修改change函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$scope.change = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    $scope.$apply(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      $scope.age++ ;</div><div class="line">    &#125;)</div><div class="line">  &#125;,<span class="number">2000</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个时候我们会发现控制台会循环执行watch函数</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/17/165AngularJsService/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/17/165AngularJsService/" itemprop="url">
                  AngularJsService
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-17T12:36:00+08:00">
                2016-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript-Angular/" itemprop="url" rel="index">
                    <span itemprop="name">javascript Angular</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>文墨(末)有彩蛋00哦</p>
<h3 id="1-先来了解以下angular的依赖"><a href="#1-先来了解以下angular的依赖" class="headerlink" title="1 先来了解以下angular的依赖"></a>1 先来了解以下angular的依赖</h3><p>Module依赖：在声明app模块时，需要给出依赖模块的列表。同时这些模块对应的JS需要在HTML中加以引入。在中可以直接使用依赖模块中声明的Service、Directive、Filter。</p>
<p>Service依赖：在声明Controller、Service、Directive、Filter的工厂方法中，把依赖的Service直接放到参数列表，Angular Injector会为你生成这些Service的实例。</p>
<h3 id="1-1-Services-定义"><a href="#1-1-Services-定义" class="headerlink" title="1.1  Services 定义"></a>1.1  Services 定义</h3><p>AngularJS services are substitutable objects that are wired together using <a href="https://docs.angularjs.org/guide/di" target="_blank" rel="external">dependency injection (DI)</a>. You can use services to organize and share code across your app.</p>
<p>AngularJS services are:</p>
<ul>
<li>Lazily instantiated – AngularJS only instantiates a service when an application component depends on it.</li>
<li>Singletons – Each component dependent on a service gets a reference to the single instance generated by the service factory.</li>
</ul>
<p>service通常用来进行不同的controller之间进行通信;</p>
<h3 id="1-2-service声明方式-provider-下面有五个API-factory-service-value-constant-provider-这些都是provider的封装-可以用来声明服务"><a href="#1-2-service声明方式-provider-下面有五个API-factory-service-value-constant-provider-这些都是provider的封装-可以用来声明服务" class="headerlink" title="1.2 service声明方式 $provider 下面有五个API  factory   service  value constant  provider(这些都是provider的封装) 可以用来声明服务"></a>1.2 service声明方式 $provider 下面有五个API  factory   service  value constant  provider(这些都是provider的封装) 可以用来声明服务</h3><p>1.2.1 最常见的方式：工厂方式,当someService作为依赖的时候，angular Injector会调用工厂方法，然后将返回值作为Service的实例传入依赖它的工厂方法</p>
<p>factory(name, fn)registers a service <strong>factory function</strong> that will be wrapped in a <strong>service provider</strong> object, whose $get  property will contain the given factory function.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">app.factory(<span class="string">'someService'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">dependency1, ...</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">property1</span>: value1,</div><div class="line">        <span class="attr">property2</span>: value2</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>走个小栗子</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'myApp'</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"myCtrl"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'info.name'</span> <span class="attr">placeholder</span>=<span class="string">"please input your name"</span>/&gt;</span></div><div class="line">   name:<span class="tag">&lt;<span class="name">p</span>&gt;</span>`&#123;&#123;info.name&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'info.age'</span> <span class="attr">placeholder</span>=<span class="string">"please input your age"</span>/&gt;</span></div><div class="line">    age:<span class="tag">&lt;<span class="name">p</span>&gt;</span>`&#123;&#123;info.age&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> myApp = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line"></div><div class="line">    myApp.factory(<span class="string">'myService'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">"Jhon"</span>,</div><div class="line">            <span class="attr">age</span> : <span class="number">18</span>,</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    myApp.controller(<span class="string">'myCtrl'</span>,[<span class="string">"$scope"</span>,<span class="string">"myService"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope,myService</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">        $scope.info = myService ;</div><div class="line">    &#125;]);</div><div class="line">    </div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.2.2  最直接的方式：构造函数 当someService作为依赖的时候，angular Injector会以new的方式调用该构造函数，然后将返回值作为Service的实例传入依赖它的工厂方法</p>
<p>service(name, Fn)  registers a <strong>constructor function</strong> that will be wrapped in a <strong>service provider</strong> object, whose $get  property will instantiate a new object using the given constructor function.</p>
<p>我们可以定义私有变量和共有变量</p>
<p>先来看下内部实现机制,angular Injector会以new的方式调用构造函数，然后将返回值传入依赖；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Service</span> (<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.public = &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">"Jhon"</span>,</div><div class="line">            <span class="attr">age</span> :<span class="number">18</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> private = &#123;</div><div class="line">            <span class="attr">name</span> :<span class="string">"JiM"</span>,</div><div class="line">            <span class="attr">age</span> : <span class="number">20</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.getPri = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> private ;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> service = <span class="keyword">new</span> Service();</div><div class="line">    <span class="built_in">console</span>.log(service);</div><div class="line">    <span class="built_in">console</span>.log(service.getPri());</div><div class="line">   </div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">app.service(<span class="string">'someService'</span>, someService(dependency1, ...)&#123;</div><div class="line">    <span class="keyword">this</span>.property1 = value1;</div><div class="line">    <span class="keyword">this</span>.property2 = value2;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'myApp'</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"myCtrl"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'info.name'</span> <span class="attr">placeholder</span>=<span class="string">"please input your name"</span>/&gt;</span></div><div class="line">    public name:<span class="tag">&lt;<span class="name">p</span>&gt;</span>`&#123;&#123;info.name&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span> = <span class="string">'info.age'</span> <span class="attr">placeholder</span>=<span class="string">"please input your age"</span>/&gt;</span></div><div class="line">    public age:<span class="tag">&lt;<span class="name">p</span>&gt;</span>`&#123;&#123;info.age&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">    private name : <span class="tag">&lt;<span class="name">p</span>&gt;</span>`&#123;&#123;infoPri.name&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    private name : <span class="tag">&lt;<span class="name">p</span>&gt;</span>`&#123;&#123;infoPri.age&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> myApp = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">    myApp.service(<span class="string">'myService'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.public = &#123;</div><div class="line">            <span class="attr">name</span> : <span class="string">"Jhon"</span>,</div><div class="line">            <span class="attr">age</span> :<span class="number">18</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> private = &#123;</div><div class="line">            <span class="attr">name</span> :<span class="string">"JiM"</span>,</div><div class="line">            <span class="attr">age</span> : <span class="number">20</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.getPri = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> private ;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    myApp.controller(<span class="string">'myCtrl'</span>,[<span class="string">"$scope"</span>,<span class="string">"myService"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope,myService</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">        $scope.info = myService.public ;</div><div class="line">        $scope.infoPri = myService.getPri();</div><div class="line">    &#125;]);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.2.3 最简单的方式</p>
<h3 id="value-name-value"><a href="#value-name-value" class="headerlink" title="value(name, value);"></a>value(name, value);</h3><p>Register a <strong>value service</strong> with the <a href="https://docs.angularjs.org/api/auto/service/$injector" target="_blank" rel="external">$injector</a>, such as a string, a number, an array, an object or a function. This is short for registering a service where its provider’s <code>$get</code> property is a factory function that takes no arguments and returns the <strong>value service</strong>. That also means it is not possible to inject other services into a value service.</p>
<p>Value services are similar to constant services, except that they cannot be injected into a module configuration function (see <a href="https://docs.angularjs.org/api/ng/type/angular.Module#config" target="_blank" rel="external"><code>angular.Module</code></a>) but they can be overridden by an AngularJS <a href="https://docs.angularjs.org/api/auto/service/$provide#decorator" target="_blank" rel="external">decorator</a>.</p>
<h3 id="constant-name-value"><a href="#constant-name-value" class="headerlink" title="constant(name, value);"></a>constant(name, value);</h3><p>Register a <strong>constant service</strong> with the <a href="https://docs.angularjs.org/api/auto/service/$injector" target="_blank" rel="external">$injector</a>, such as a string, a number, an array, an object or a function. Like the <a href="https://docs.angularjs.org/api/auto/service/$provide#value" target="_blank" rel="external">value</a>, it is not possible to inject other services into a constant.</p>
<p>But unlike <a href="https://docs.angularjs.org/api/auto/service/$provide#value" target="_blank" rel="external">value</a>, a constant can be injected into a module configuration function (see <a href="https://docs.angularjs.org/api/ng/type/angular.Module#config" target="_blank" rel="external"><code>angular.Module</code></a>) and it cannot be overridden by an AngularJS <a href="https://docs.angularjs.org/api/auto/service/$provide#decorator" target="_blank" rel="external">decorator</a>.</p>
<ul>
<li>两者的相同之处就是不能依赖其他的service,</li>
<li>两者的不同之处就是value不能注册进其他模块，但是constant可以被注册进其他模块</li>
<li>两者的不同之处还有就是value可以被decorator重写，但是constant不能被重写，constant常量的意思</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">app.value(<span class="string">'someService'</span>, &#123; <span class="attr">property1</span>: value1, <span class="attr">property2</span>: value2&#125;);</div><div class="line"></div><div class="line">app.constant(<span class="string">'anotherService'</span>, <span class="string">'I am a simple string'</span>);</div></pre></td></tr></table></figure>
<h3 id="decorator-name-decorator"><a href="#decorator-name-decorator" class="headerlink" title="decorator(name, decorator);"></a>decorator(name, decorator);</h3><p>Register a <strong>decorator function</strong> with the <a href="https://docs.angularjs.org/api/auto/service/$injector" target="_blank" rel="external">$injector</a>. A decorator function intercepts the creation of a service, allowing it to override or modify the behavior of the service. The return value of the decorator function may be the original service, or a new service that replaces (or wraps and delegates to) the original service.</p>
<p>You can find out more about using decorators in the <a href="https://docs.angularjs.org/guide/decorators" target="_blank" rel="external">decorators</a> guide.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/13/136GetAndSet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/13/136GetAndSet/" itemprop="url">
                  get and set
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-13T12:36:00+08:00">
                2016-11-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1 设置对象的属性，Object.definedProperty(obj.prop,descriptor)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第一种方式</span></div><div class="line"><span class="keyword">var</span> obj= &#123;&#125;;</div><div class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"name"</span>,&#123;     </div><div class="line">  <span class="attr">configurable</span>:<span class="literal">true</span>,</div><div class="line">  <span class="attr">enumerable</span> : <span class="literal">false</span>, </div><div class="line">  <span class="attr">value</span>:<span class="string">"Jhon"</span>,</div><div class="line">  <span class="attr">writable</span>:<span class="literal">true</span>,     </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//第二种方式</span></div><div class="line"><span class="keyword">var</span> obj= &#123;&#125;;</div><div class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"name"</span>,&#123;</div><div class="line">  <span class="attr">configurable</span>:<span class="literal">true</span>,</div><div class="line">  <span class="attr">enumerable</span> : <span class="literal">false</span>,    </div><div class="line">  <span class="attr">get</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"JiM"</span>;</div><div class="line">  &#125;</div><div class="line">  set:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>2 一个属性的descriptor可能由以下组成 value writable configurable emuerable get set  , descriptor是一个属性的详细信息描述的对象；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//通过键值对的方式直接设置对象的属性</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">   <span class="attr">foo</span>:<span class="string">'bar'</span>,</div><div class="line"> &#125;;</div><div class="line"><span class="keyword">var</span> descriptors = <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj);</div><div class="line"><span class="built_in">console</span>.log(descriptors);<span class="comment">//foo属性的descriptor对象的详细信息</span></div><div class="line"><span class="built_in">console</span>.log(obj);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//通过get set方法可以直接给对象设置属性以及设置属性值，大致了解下get和set的作用，以及对obj对象的属性改变</span></div><div class="line"><span class="keyword">const</span> obj = &#123;</div><div class="line">  get foo() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'bar'</span>;</div><div class="line">  &#125;,</div><div class="line">  get foo1() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'bar1'</span>;</div><div class="line">  &#125;,</div><div class="line">  get foo2()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'bar2'</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> descriptors = <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj);</div><div class="line"><span class="built_in">console</span>.log(descriptors);</div><div class="line"><span class="built_in">console</span>.log(obj);</div><div class="line"><span class="built_in">console</span>.log(obj.foo);<span class="comment">//bar</span></div><div class="line"><span class="built_in">console</span>.log(obj.foo1);<span class="comment">//bar1</span></div><div class="line"><span class="built_in">console</span>.log(obj.foo2);<span class="comment">//bar2</span></div><div class="line">obj.foo = <span class="string">'bar4'</span>;<span class="comment">//不会修改foo属性的值</span></div><div class="line"><span class="built_in">console</span>.log(obj.foo);<span class="comment">//bar</span></div></pre></td></tr></table></figure>
<p>3 set方法可以用来设置属性的值，get可以用来获取属性的值，来个栗子感受下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> test = &#123;  </div><div class="line"><span class="attr">_Name</span> : <span class="string">"Lilei"</span>,  </div><div class="line"><span class="attr">_Age</span> : <span class="number">20</span>,    </div><div class="line"><span class="comment">//_Name的只读   </span></div><div class="line">get name() &#123;<span class="keyword">return</span> <span class="keyword">this</span>._Name;&#125;,  <span class="comment">//通过</span></div><div class="line"><span class="comment">//_Age的读写  </span></div><div class="line">set age(age) &#123;<span class="keyword">this</span>._Age = age;&#125;,   </div><div class="line">get age() &#123;<span class="keyword">return</span> <span class="keyword">this</span>._Age;&#125;  </div><div class="line">&#125;  </div><div class="line"><span class="built_in">console</span>.log(test);<span class="comment">//可以查看obj对象的所有属性，加深理解</span></div><div class="line"><span class="keyword">var</span> descriptors = <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj);</div><div class="line"><span class="built_in">console</span>.log(descriptors);<span class="comment">//查看obj对象的所有属性的descriptor对象</span></div><div class="line"><span class="comment">//------------------------------------------------</span></div><div class="line"><span class="built_in">console</span>.log(test.name + <span class="string">" "</span> + test.age);<span class="comment">//Lilei 20  </span></div><div class="line">test.name = <span class="string">'Lily'</span>;  </div><div class="line">test.age = <span class="number">18</span>;  </div><div class="line"><span class="built_in">console</span>.log(test.name + <span class="string">" "</span> + test.age);<span class="comment">//Lilei 18   </span></div><div class="line"><span class="built_in">console</span>.log(test._Name + <span class="string">" "</span> + test._Age);<span class="comment">//Lilei 18 _Name 只读，只写了_Age属性</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/12/05transition  transform body渐变色填充/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/12/05transition  transform body渐变色填充/" itemprop="url">
                  transition  transform 效果进阶1     body如何渐变色填充
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-12T12:36:00+08:00">
                2016-11-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/css/" itemprop="url" rel="index">
                    <span itemprop="name">css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>transition  transform 效果进阶1     body如何渐变色填充</p>
<p>一  transition的拆分写</p>
<ul>
<li><p>明确其拥有的四个属性值</p>
<p>transition-property   发生渐变效果的属性</p>
</li>
</ul>
<p>transition-duration  完成过渡效果的时间</p>
<p>transition- timing-function  完成过渡效果的动画效果 linear  ease ease-in ease-out</p>
<p>step-start= step(1 ,start)</p>
<p>step-end=step(1,end)  </p>
<p>steps( n1,n2),n1代表完成的步数，n2代表start或者end ,指定每一步的值发生变化的时间点。第二个参数是可选的，默认值为end。</p>
<p>transition-deplay  开始进行过渡效果的延迟</p>
<ul>
<li>transition 属性连写</li>
</ul>
<p>transition :all  2s  ease-in 1s</p>
<p>all 代表所有的属性都会有过渡效果，只要设置了，2s代表一个过渡效果的时间，ease-in代表过渡的方式，1s代表延迟</p>
<p>二  transform属性(2d)(x 正方向水平向右，y正方向垂直向下，z正方向在垂直于窗口向外)</p>
<ul>
<li><p>translate(x,y )  指定对象移动，基准是父盒子左上角，移动 x y z是代表距离左上角的距离translatex(length|percentage),translatey(number)指定x  y的移动距离。如果第二个参数省略，那么默认为0 ；其中百分比的基准是以元素自身的宽高为基准，然后乘以百分比，得到移动的距离值。</p>
<p>​    transform：translate(50px,40px)代表向右和向下移动50px  40px；</p>
</li>
<li><p>scale(x,y) ,代表指定对象缩放比例，x，y分别对应x y轴的缩放。scalex(number) scaley(number),如果第二个参数省略默认和第一个参数相等。</p>
</li>
<li>rotate(angle) 输入角度值，代表元素2d的旋转角度 需要有个transition-origin属性。关于旋转的方向：遵循“左手定则”大拇指指向轴的正方向，四指的方向就是旋转的方向，也是角度值为正的方向;rotate(angle),默认以z轴为基准进行旋转，rotatex(angel)，rotatey(angle),rotatez(angle) 以x和y轴为基准进行旋转(3D)。注意在3d里面才有rotatex(angel)，rotatey(angle),rotatez(angle)，在2d里面只有rotate(angle)</li>
<li>skew(x,y) 指定x  y的扭曲距离。如果第二个参数省略，那么默认为0 ;skewx(number) skewy(number).</li>
</ul>
<p>三：有关body的渐变色填充问题：</p>
<p>​    body默认是没有高度的，但是却可以直接给body设置背景颜色，这是为什么呢?好多人会问，不是应该元素有了宽高才能有背景色吗？</p>
<p>这里明确一点，body设置背景色是浏览器自动配置的，如果直接给body设置背景色，默认全部填充整个文档；即使body的高度是默认的高度。</p>
<p>走个小demo理解下这个问题、</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">		body &#123;</div><div class="line">			background-color: blue;</div><div class="line">			/* background: linear-gradient(to bottom,rgba(0,0,255,0.1),rgba(0,0,255,0.5),rgb(0,0,255));*/</div><div class="line">		&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="img/1.jpg" alt="纯色填充"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">body &#123;</div><div class="line">	background: linear-gradient(to</div><div class="line">bottom,rgba(0,0,255,0.1),rgba(0,0,255,0.5),rgb(0,0,255));</div><div class="line">		&#125;</div></pre></td></tr></table></figure>
<p><img src="img/gradient.jpg" alt="渐变填充出问题了"></p>
<p>给body一个高度：</p>
<p>​    height:100px    ;</p>
<p><img src="img/h.jpg" alt="给个高度"></p>
<p>我们会发现的问题是：纯色填充body没有问题，那么如何解决渐变填充body这种情况呢？</p>
<p>很简单，</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">html,body &#123;</div><div class="line">  height :100% ;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="img/solve.jpg" alt="解决问题"></p>
<p>四  ，写个demo玩一下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span>	</div><div class="line">	<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">		html,body&#123;</div><div class="line">			height: 100%;</div><div class="line">			margin: 0;</div><div class="line">		&#125;</div><div class="line">		body&#123;</div><div class="line">			background: linear-gradient(to bottom,rgba(0,0,255,0.1),rgba(0,0,255,0.5),rgb(0,0,255));</div><div class="line">			box-sizing:border-box;</div><div class="line">		&#125;</div><div class="line">		.fish &#123;</div><div class="line">			width: 174px;</div><div class="line">			height: 126px;</div><div class="line">			background:url(img/fish.png) no-repeat;</div><div class="line">			/*border: 1px solid #000;*/</div><div class="line">			transition: all 2s linear;</div><div class="line">		&#125;</div><div class="line">		body:hover .fish&#123;</div><div class="line">			transform:translate(1000px,500px) rotate(45deg) scale(.5,.5);</div><div class="line">		&#125; </div><div class="line">		/*背景图片默认左上角平铺，然后改变背景图片的位置即可*/</div><div class="line">		.animation &#123;</div><div class="line">      		animation: autoMove 1s steps(8) infinite;</div><div class="line">    	&#125;</div><div class="line">     /*动画关键字 */</div><div class="line">    </div><div class="line">	    @keyframes autoMove &#123;</div><div class="line">	    from &#123;&#125;</div><div class="line">	      to &#123;</div><div class="line">	        background-position: 0 -1008px;</div><div class="line">	      &#125;</div><div class="line">	    &#125;</div><div class="line"></div><div class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fish animation"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="img/gif.gif" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/10/157AngularJS-Initialization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/10/157AngularJS-Initialization/" itemprop="url">
                  Angular Js
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-10T12:36:00+08:00">
                2016-11-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript-Angular/" itemprop="url" rel="index">
                    <span itemprop="name">javascript Angular</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1 angularJs初始化应用模块有两种方式</p>
<p>1.1、绑定初始化，自动加载</p>
<p>通过绑定来进行angular的初始化，会把js代码侵入到html中。</p>
<p>ng-app是angular的一个指令，代表一个angular应用（也叫模块）。使用ng-app或ng-app=””来标记一个DOM结点，让框架会自动加载。也就是说，ng-app是可以带属性值的。如果没有ng-app指令将会报错；</p>
<p>自动初始化流程如下</p>
<p><strong>ng-app</strong> 指令定义了 AngularJS 应用程序的 <strong>根元素</strong></p>
<p>AngularJS 在 HTML DOMContentLoaded 事件后会<strong>自动引导</strong>（自动初始化）应用程序。如果找到 ng-app 指令 ， AngularJS 载入<strong>指令中的模块</strong>，然后创建应用的<strong>注入器</strong>，并将 ng-app 作为应用的根<strong>进行编译</strong>。同时，启动应用的时候，会在其子元素范围内构成一个$scope;</p>
<p>应用的根可以是整个页面，或者页面的一小部分，如果是一小部分会更快编译和执行。</p>
<p>AngularJS initializes automatically upon <code>DOMContentLoaded</code> event or when the <code>angular.js</code> script is evaluated if at that time <code>document.readyState</code> is set to <code>&#39;complete&#39;</code>. At this point AngularJS looks for the <a href="https://docs.angularjs.org/api/ng/directive/ngApp" target="_blank" rel="external"><code>ngApp</code></a> directive which designates your application root. If the <a href="https://docs.angularjs.org/api/ng/directive/ngApp" target="_blank" rel="external"><code>ngApp</code></a> directive is found then AngularJS will:</p>
<ul>
<li>load the module associated with the directive.</li>
<li>create the application injector</li>
<li>compile the DOM treating the ngApp directive as the root of the compilation. This allows you to tell it to treat only a portion of the DOM as an AngularJS application.</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">通过控制体controller进行数据绑定</div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'Demo'</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'DemoCtrl'</span>&gt;</span></div><div class="line">    `&#123;&#123;a&#125;&#125;+&#123;&#123;b&#125;&#125; = &#123;&#123;a+b&#125;&#125;`</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  <span class="comment">//如果要对angular应用添加控制器，那么必须关联Demo到module模块，如果不关联那么则会提示没有</span></div><div class="line">  <span class="comment">//The controller with the name 'xxx' is not registered.</span></div><div class="line">    angular.module(<span class="string">'Demo'</span>,[]).controller(<span class="string">'DemoCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.a = <span class="number">1</span> ;</div><div class="line">        $scope.b = <span class="number">2</span> ;</div><div class="line">    &#125;]);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">通过run方法进行数据绑定，这个只能提供全局的变量</div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span> = <span class="string">'Demo'</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> &gt;</span></div><div class="line">    `&#123;&#123;a&#125;&#125;+&#123;&#123;b&#125;&#125; = &#123;&#123;a+b&#125;&#125;`</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> myapp =   angular.module(<span class="string">'Demo'</span>,[]);</div><div class="line">    <span class="built_in">console</span>.log(myapp);</div><div class="line">    myapp.run(<span class="function"><span class="keyword">function</span>(<span class="params">$rootScope</span>)</span>&#123;</div><div class="line">        $rootScope.a = <span class="number">1</span> ;</div><div class="line">        $rootScope.b = <span class="number">2</span> ;</div><div class="line">    &#125;)</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">通过ng-init初始化数据</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-app</span> <span class="attr">ng-init</span>=<span class="string">'name = "Jhon"'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-bind</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ng-app指令作用如下</p>
<p>There are a few things to keep in mind when using <code>ngApp</code>:</p>
<ul>
<li>only one AngularJS application can be auto-bootstrapped per HTML document. The first <code>ngApp</code> found in the document will be used to define the root element to auto-bootstrap as an application. To run multiple applications in an HTML document you must manually bootstrap them using <a href="https://docs.angularjs.org/api/ng/function/angular.bootstrap" target="_blank" rel="external"><code>angular.bootstrap</code></a> instead.</li>
<li>AngularJS applications cannot be nested within each other.</li>
<li>Do not use a directive that uses <a href="https://docs.angularjs.org/api/ng/service/$compile#transclusion" target="_blank" rel="external">transclusion</a> on the same element as <code>ngApp</code>. This includes directives such as <a href="https://docs.angularjs.org/api/ng/directive/ngIf" target="_blank" rel="external"><code>ngIf</code></a>, <a href="https://docs.angularjs.org/api/ng/directive/ngInclude" target="_blank" rel="external"><code>ngInclude</code></a>and <a href="https://docs.angularjs.org/api/ngRoute/directive/ngView" target="_blank" rel="external"><code>ngView</code></a>. Doing this misplaces the app <a href="https://docs.angularjs.org/api/ng/service/$rootElement" target="_blank" rel="external"><code>$rootElement</code></a> and the app’s <a href="https://docs.angularjs.org/api/auto/service/$injector" target="_blank" rel="external">injector</a>, causing animations to stop working and making the injector inaccessible from outside the app.</li>
</ul>
<p>You can specify an <strong>AngularJS module</strong> to be used as the root module for the application. This module will be loaded into the <a href="https://docs.angularjs.org/api/auto/service/$injector" target="_blank" rel="external"><code>$injector</code></a>when the application is bootstrapped. It should contain the application code needed or have dependencies on other modules that will contain the code. See <a href="https://docs.angularjs.org/api/ng/function/angular.module" target="_blank" rel="external"><code>angular.module</code></a> for more information.</p>
<p>1.2 当同一个页面中包含多个app的时候(不能嵌套)，这个时候angular就不能自动启动应用，需要我们用bootstrp手动启动应用</p>
<p>手动初始化一个angular应用模块,可以使用angular.bootstrap()，该方法可以初始化一个angularjs应用，注意该方法不会创建模块，我们在将模块作为参数传递之前必须先创建了一个模块或者已经先加载了一个模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">angular.bootstrap(element, [modules], [config]);</div></pre></td></tr></table></figure>
<p>其中第一个参数element:是绑定ng-app的dom元素；<br>modules：绑定的模块名字<br>config：附加的配置</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span> &gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span> = <span class="string">'DemoCtrl'</span>&gt;</span></div><div class="line">   ` &#123;&#123;a&#125;&#125;+&#123;&#123;b&#125;&#125; = &#123;&#123;a+b&#125;&#125; `</div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    angular.module(<span class="string">'Demo'</span>,[]).controller(<span class="string">'DemoCtrl'</span>,[<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">        $scope.a = <span class="number">1</span> ;</div><div class="line">        $scope.b = <span class="number">2</span> ;</div><div class="line"></div><div class="line">    &#125;]);</div><div class="line">  <span class="comment">//页面加载完毕之后在进行初始化模块</span></div><div class="line">    angular.element(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        angular.bootstrap(<span class="built_in">document</span>,[<span class="string">'Demo'</span>]);</div><div class="line">      	<span class="comment">//angular.bootstrap(document.body,['Demo'])</span></div><div class="line">     <span class="comment">//上面两行代码绑定同一个模块会报错，只能存在一个</span></div><div class="line">    &#125;)</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line">        <span class="comment">// 创建moudle1</span></div><div class="line">        <span class="keyword">var</span> rootMoudle = angular.module(<span class="string">'moudle1'</span>, []);</div><div class="line">        rootMoudle.controller(<span class="string">"controller1"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;$scope.name=<span class="string">"aty"</span>&#125;);</div><div class="line"></div><div class="line">        <span class="comment">// 创建moudle2</span></div><div class="line">        <span class="keyword">var</span> m2 = angular.module(<span class="string">'moudle2'</span>, []);</div><div class="line">        m2.controller(<span class="string">"controller2"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;$scope.name=<span class="string">"aty"</span>&#125;);</div><div class="line">        <span class="comment">// 页面加载完成后,再加载模块</span></div><div class="line">        angular.element(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            angular.bootstrap(<span class="built_in">document</span>.getElementById(<span class="string">"div1"</span>),[<span class="string">"moudle1"</span>]);</div><div class="line">            angular.bootstrap(<span class="built_in">document</span>.getElementById(<span class="string">"div2"</span>),[<span class="string">"moudle2"</span>]);</div><div class="line">          <span class="comment">//绑定不同的模块是可以的</span></div><div class="line">        &#125;);</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>  <span class="attr">ng-controller</span>=<span class="string">"controller1"</span>&gt;</span>div1:`&#123;&#123;name&#125;&#125;`<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div2"</span>  <span class="attr">ng-controller</span>=<span class="string">"controller2"</span>&gt;</span>div2:`&#123;&#123;name&#125;&#125;`<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.3 一个ng-app所在的标签就是一个angular应用，该标签下的所有子标签会被angular编译，不是其子标签的话不会被angular编译</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-app</span> = <span class="string">'app'</span> <span class="attr">ng-controller</span> = <span class="string">'myCtrl'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>`&#123;&#123;name&#125;&#125;`<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>`&#123;&#123;age&#125;&#125;`<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  </div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>`&#123;&#123;age&#125;&#125;`<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--初始化ng-app，那么ng-app标签下面的子标签就是整个应用，其他的就不是angular应用，然后angular不会编译其余的标签</span></div><div class="line">第二个age不会被angular编译，因此不会被显示19，只会显示&#123;&#123;age&#125;&#125;</div><div class="line">--&gt;</div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'app'</span>,[]);</div><div class="line">    app.controller(<span class="string">'myCtrl'</span>,[<span class="string">'$rootScope'</span>,<span class="string">'$scope'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope,$rootScope</span>)</span>&#123;</div><div class="line">        $rootScope.name = <span class="string">"Jhon"</span>;</div><div class="line">        $scope.age = <span class="number">19</span> ;</div><div class="line">    &#125;]);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.4注意</p>
<ul>
<li><p>ng-app和angular.bootstrap不能同时使用</p>
</li>
<li><p>ng-app只能出现一次，所以就只能出现一个angularjs应用，但是angular.bootstrap可以出现多次，但是这种做法是不推荐的</p>
</li>
<li><p>二者初始化的一个应用的时候，所在元素的不能有ngIf   ngView  ngInclude指令</p>
</li>
<li><p>ng-app所在的标签的就是一个angular应用，该标签下面的所有的子标签都会被angular编译，不是该标签的子标签不会被angular编译</p>
</li>
<li><p>初始化angular应用之后可以进行创建模块以及控制器、服务等其他操作</p>
</li>
<li><p>初始化的angular应用里面的表达式会被编译，编译之后的表达式会按照angular的规定进行解析，如果没有ng-app指令或者bootstrap手动初始化angular应用，则表达式不会进行运算，将直接显示出来</p>
</li>
<li><p>HTML5 允许扩展的（自制的）属性，以 <strong>data-</strong> 开头。<br>AngularJS 属性以 <strong>ng-</strong> 开头，但是您可以使用 <strong>data-ng-</strong> 来让网页对 HTML5 有效。</p>
</li>
<li><p>AngularJS 表达式 与 JavaScript 表达式</p>
<p>类似于 JavaScript 表达式，AngularJS 表达式可以包含字母，操作符，变量。</p>
<p>与 JavaScript 表达式不同，AngularJS 表达式可以写在 HTML 中。</p>
<p>与 JavaScript 表达式不同，AngularJS 表达式不支持条件判断，循环及异常。</p>
<p>与 JavaScript 表达式不同，AngularJS 表达式支持过滤器。</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/04/87-Javscript中this详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/04/87-Javscript中this详解/" itemprop="url">
                  Javscript中this详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-04T21:08:00+08:00">
                2016-11-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Javscript中this详解"><a href="#Javscript中this详解" class="headerlink" title="Javscript中this详解"></a>Javscript中this详解</h2><h3 id="一-宿主环境和javascript-引擎"><a href="#一-宿主环境和javascript-引擎" class="headerlink" title="一 宿主环境和javascript 引擎"></a>一 宿主环境和javascript 引擎</h3><ul>
<li>宿主环境：一门语言在运行的时候需要一个环境，这个环境就是宿主环境，对于JavaScript来说宿主环境就是我们常说的浏览器，在这个浏览器里面提供了一些借口让javascript引擎可以和宿主环境对接；</li>
<li>jacascript引擎才是真正执行代码的地方，常见的javascript引擎包括V8，javascript core,javascript引擎主要做了以下几件事情:一套与宿主环境相互联系的规则，javascript引擎内核，规定了基本javascript语法逻辑和命令，一组内置对象和API</li>
<li>javascript不仅可以在浏览器里面运行，还可以在其他宿主环境，比如node.js</li>
</ul>
<h3 id="二-this详解"><a href="#二-this详解" class="headerlink" title="二 this详解"></a>二 this详解</h3><h2 id="1-global-this"><a href="#1-global-this" class="headerlink" title="1 global this"></a>1 global this</h2><p>1.1在浏览器里面，全局范围内，this等价于window对象(其实window对象也是Window构造函数的实例)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span> === <span class="built_in">window</span>);<span class="comment">//true  全等号还是返回true  </span></div><div class="line">   <span class="keyword">this</span>.name = <span class="string">"jhon"</span>;</div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">window</span>.name);<span class="comment">//jhon</span></div><div class="line">   <span class="built_in">window</span>.age = <span class="number">13</span> ;</div><div class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);<span class="comment">//13</span></div></pre></td></tr></table></figure>
<p>1.2 在浏览器中，在全局范围内，用var声明一个变量和给this  window 设置属性是等价的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="string">"bar"</span>;</div><div class="line">   <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar</span></div><div class="line">   <span class="built_in">console</span>.log(<span class="built_in">window</span>.foo);<span class="comment">//bar</span></div></pre></td></tr></table></figure>
<p>1.2.1 预解析对顶级对象window的属性的添加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.exp); <span class="comment">//由于预解析  var exp ;会被提升到最上部，声明的对象未被定义的话，默认为undefined</span></div><div class="line"><span class="keyword">if</span> (exp <span class="keyword">in</span> <span class="built_in">window</span>)&#123;  <span class="comment">//  返回true;</span></div><div class="line">  <span class="comment">//in  操作符，可以用来判断某个对象是否拥有某个属性，可以追溯对象所有的属性，包括原型上的;</span></div><div class="line">        <span class="keyword">var</span> exp = <span class="string">"example"</span>;<span class="comment">//会进行预解析，声明exp属性给到window,解析到这一行代码的时候，会进行赋值</span></div><div class="line">    <span class="comment">//明确预解析:所谓预解析是浏览器的动作，它会在执行javascript代码之前，全局的检索javascript代码，将变量声明以及函数声明提升到函数的额最顶部，所以，变量声明提升的时候，相当于给window对象添加了一个属性</span></div><div class="line">       <span class="built_in">console</span>.log(<span class="built_in">window</span>.exp);<span class="comment">//example </span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>1.2.2 用function声明函数和在全局用var 声明变量，或者函数体不用var声明变量，都是在给全局的window添加属性值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> amyName;			<span class="comment">// window 对象会多一个amyName 属性</span></div><div class="line">    a ;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">anewBuilder</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//window对象会多一个anerBuilder属性</span></div><div class="line">        aaa = <span class="number">1</span>;  <span class="comment">//函数执行后 ，window对象又会多一个aaa属性</span></div><div class="line">    &#125;</div><div class="line">    anewBuilder()</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>1.2.3 如果没有用var 声明，那么则不会进行变量提升，即使该变量也是隐式全局变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (exp <span class="keyword">in</span> <span class="built_in">window</span>)&#123;	<span class="comment">//报错，程序停止运行</span></div><div class="line">      exp = <span class="string">"example"</span>;<span class="comment">//隐式全局变量，不会进行预解析，声明exp属性给到window</span></div><div class="line">      <span class="built_in">console</span>.log(exp);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>1.3 在<strong>函数体内</strong> ，(即使是函数体内的函数嵌套函数),没有var或者let声明的变量或者函数，就是在给全局this  window添加属性；如果使用了var 或者 let声明变量，则不能被全局的this访问到；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="comment">//    var str = "全局的this";</span></div><div class="line">    <span class="comment">//在函数体，声明变量的时候，如果没有用var</span></div><div class="line">    <span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> str =<span class="string">"这个不能被全局的this访问到"</span>;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.str);<span class="comment">//undefined  this代表全局的window，在全局范围内，并没有str赋值</span></div><div class="line">      <span class="comment">// 如果不是被new调用函数，那么函数体的this都是指代全局范围的this,代表window对象；</span></div><div class="line">        func3 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            innerV = <span class="string">"这是函数体内的变量"</span>;</div><div class="line">        &#125;;</div><div class="line"><span class="comment">//      func3();</span></div><div class="line">    &#125;</div><div class="line">    func();</div><div class="line">    <span class="keyword">this</span>.func3();<span class="comment">//和在函数体内执行效果是一样的，func3也是全局this的属性(方法)</span></div><div class="line"><span class="comment">//这两个函数必须被执行，才能正确赋值,以下innerV 才能输出；</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.innerV);<span class="comment">//"这是函数体内的变量"</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.str);<span class="comment">//undefined</span></div><div class="line">    <span class="comment">//在函数体内，不使用var或者let声明变量，也是在给全局的this和window对象设置属性</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="2-function-this"><a href="#2-function-this" class="headerlink" title="2 function this"></a>2 function this</h2><h3 id="2-0-对于一个函数，有三种角色，普通函数，直接调用执行；构造函数，通过new调用；函数作为对象；"><a href="#2-0-对于一个函数，有三种角色，普通函数，直接调用执行；构造函数，通过new调用；函数作为对象；" class="headerlink" title="2.0 对于一个函数，有三种角色，普通函数，直接调用执行；构造函数，通过new调用；函数作为对象；"></a>2.0 对于一个函数，有三种角色，普通函数，直接调用执行；构造函数，通过new调用；函数作为对象；</h3><p>2.1  如果不是被new调用函数，</p>
<ul>
<li>普通函数:直接执行函数体，那么函数体的this都是指代全局范围的this,代表window对象；</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> foo = <span class="string">"bar"</span>;   <span class="comment">//变量的声明，相当于给window添加了一个 foo 属性，属性值是一个基础数据类型值</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>)</span>&#123;  <span class="comment">//函数的声明，相当于给window添加了一个test属性，属性值是复杂数据类型值</span></div><div class="line">        <span class="keyword">this</span>.foo = <span class="string">"bar is changed"</span>;<span class="comment">//当函数不是被new操作符调用的时候，this还是指向window对象</span></div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar</span></div><div class="line">    test();<span class="comment">//直接执行函数，this代表全局的this</span></div><div class="line">  <span class="comment">//等价于window.test()</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar is changed </span></div><div class="line">  <span class="comment">//--------------------------------------------------------------------</span></div><div class="line">  	<span class="keyword">var</span> num = <span class="number">300</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getNum</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> num = <span class="number">200</span> ;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">getInnerNum</span>(<span class="params"></span>)</span>&#123;</div><div class="line">           <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">           <span class="built_in">console</span>.log(<span class="keyword">this</span>.num);<span class="comment">//300</span></div><div class="line">           <span class="built_in">console</span>.log(num);<span class="comment">//200</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> getInnerNum;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> res = getNum();</div><div class="line">    res();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>直接执行函数体的时候，如果使用了apply  call 则代表改变了函数运行时的this指向，原先this默认指向的是其执行的上下文环境；语法  fn.apply(  thisArg[, argsArray]  ) 、 fn.call( thisArg[, arg1[, arg2[, …]]] ) 执行之后，this指向传入的第一个参数</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> foo = <span class="string">"bar"</span>;</div><div class="line">    <span class="keyword">var</span> obj = &#123;<span class="string">"foo"</span>:<span class="string">"objBar"</span>&#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);</div><div class="line">    &#125;</div><div class="line">    test();<span class="comment">//bar 函数执行的时候this指向执行的上下文环境</span></div><div class="line">  </div><div class="line">    test.apply(obj);<span class="comment">// objBar  将test函数执行的时候this的指向指向了obj</span></div><div class="line">    test.call(obj);<span class="comment">// objBar  将test函数执行的时候this的指向指向了obj</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2.2 函数作为构造函数:如果被new操作符调用函数体,那么函数体的this就变成了一个新的值，和global的this没有任何关系</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> foo = <span class="string">"bar"</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.foo = <span class="string">"bar is changed"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar</span></div><div class="line">  <span class="comment">//不使用new操作符调用</span></div><div class="line">  <span class="comment">//    test();</span></div><div class="line">  <span class="comment">//    console.log(this.foo);//bar is changed</span></div><div class="line">  <span class="comment">//使用new操作调用   </span></div><div class="line">     <span class="keyword">new</span> test();<span class="comment">//通过new操作符之后，函数体里面的this不再指向全局window，而是指向其新创建的对象</span></div><div class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar  </span></div><div class="line">     <span class="built_in">console</span>.log(<span class="keyword">new</span> test().foo);<span class="comment">//bar is changed</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2.3 接下来解释下new 操作符的作用，看下面的代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>)</span>&#123;</div><div class="line">         <span class="keyword">this</span>.foo = <span class="string">"bar is changed"</span>;</div><div class="line">  		 <span class="keyword">this</span>.func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          	<span class="built_in">console</span>.log(<span class="string">"new的解析"</span>);</div><div class="line">  		&#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(test);</div><div class="line">	<span class="comment">//function test()&#123;</span></div><div class="line">    <span class="comment">//   this.foo = "bar is changed";</span></div><div class="line">    <span class="comment">//   this.func = function()&#123;</span></div><div class="line">    <span class="comment">//    console.log("new的解析");</span></div><div class="line">   <span class="comment">//   &#125;</span></div><div class="line">   <span class="comment">// &#125;</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> test);</div><div class="line"><span class="comment">//function</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> test);</div><div class="line"><span class="comment">//test &#123;foo: "bar is changed",func:()&#125;</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="keyword">new</span> test());</div><div class="line"><span class="comment">//object</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2.3.1 解释new的作用，当以 new 操作符调用构造函数的时候，<strong>函数内部</strong> 发生以下变化：</p>
<ul>
<li><p>函数内部会创建一个空的对象，将该对象的引用指向this；所以后期只能通过this给实例添加属性和方法；</p>
</li>
<li><p>属性和方法会被添加到this 引用的对象中；</p>
</li>
<li><p>新创建的对象的引用指向了this,最后返回this</p>
</li>
</ul>
<p>2.3.2 new操作符的作用如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();<span class="comment">//实例化一个对象</span></div><div class="line">      obj.foo = <span class="string">"bar"</span>;</div><div class="line">      obj.func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          <span class="built_in">console</span>.log(<span class="string">"new的解析"</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> obj;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>2.3.3 从原型的角度理解下 new操作符的作用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>)</span>&#123;</div><div class="line">         <span class="keyword">this</span>.foo = <span class="string">"bar is changed"</span>;</div><div class="line">  		<span class="keyword">this</span>.func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          	<span class="built_in">console</span>.log(<span class="string">"new的解析"</span>);</div><div class="line">  		&#125;</div><div class="line">    &#125;</div><div class="line"><span class="keyword">var</span> </div><div class="line"><span class="comment">//1 方法new的瞬间 得到一个空的对象</span></div><div class="line"><span class="keyword">var</span> obj = &#123; &#125; ;</div><div class="line">obj.__proto__ = test.prototype;</div><div class="line"><span class="comment">//2 方法的this指向空对象obj</span></div><div class="line"><span class="comment">//3 执行构造方法</span></div><div class="line">&#123; &#125;.foo = <span class="string">"bar is changed"</span>;</div><div class="line">&#123; &#125;.func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  	<span class="built_in">console</span>.log(<span class="string">"new的解析"</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 返回该对象</span></div><div class="line">test.call(obj)</div></pre></td></tr></table></figure>
<p>2.3.4 如果使用构造函数显式的返回<strong>基本数据类型</strong>(number string boolean null undefined)不会影响输出结果 ，返回<strong>引用类型</strong> object 则不会再返回构造函数的实例对象的地址，而是返回该引用的地址；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">anotherTest</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"this is another test"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.foo = <span class="string">"bar"</span>;</div><div class="line">        <span class="keyword">this</span>.func = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"new的解析"</span>);</div><div class="line">        &#125;</div><div class="line"><span class="comment">//        返回基本数据类型，不会影响最后的结果</span></div><div class="line"><span class="comment">//        return 123;</span></div><div class="line"><span class="comment">//        return "str";</span></div><div class="line"><span class="comment">//        return null;</span></div><div class="line"><span class="comment">//        如果返回的是引用类型，则会改变返回值</span></div><div class="line"><span class="comment">//        return &#123;'name':'jhon','age':12&#125;;</span></div><div class="line"><span class="comment">//        return [1,2,3]</span></div><div class="line"> <span class="comment">//       return anotherTest ;</span></div><div class="line">        <span class="comment">//如果返回this，那么还是返回的实例化对象;new操作符默认返回实例化对象</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> obj = <span class="keyword">new</span> test();</div><div class="line">    <span class="built_in">console</span>.log(obj);<span class="comment">//基本数据类型，仍会返回构造函数的实例化对象，返回引用类型的话，就是返回了引用类型的地址，原来构造函数的实例化的对象指向该引用类型</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2.3.5 new操作符每次调用的时候，在<strong>堆</strong>  (heap)内存中开辟一块内存空间，存储<strong>实例化对象的信息</strong>;如果有变量接受该对象的地址，那么 定义变量的时候会在<strong>栈</strong>(stack) 中开辟了一块空间存储<strong>变量名和引用地址</strong> ；<strong>不同的变量</strong>指向<strong>不同的堆内存空间</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params">name</span>)</span>&#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> obj1 = <span class="keyword">new</span> test(<span class="string">'Jhon'</span>);</div><div class="line">  <span class="keyword">var</span> obj2 = <span class="keyword">new</span> test(<span class="string">"Jhon"</span>);</div><div class="line">  <span class="built_in">console</span>.log(obj1.name);<span class="comment">//Jhon</span></div><div class="line">  <span class="built_in">console</span>.log(obj2.name);<span class="comment">//Jhon</span></div><div class="line"></div><div class="line">  obj1.name = <span class="string">"kobe"</span>;</div><div class="line">  <span class="built_in">console</span>.log(obj1.name);<span class="comment">//kobe</span></div><div class="line">  <span class="built_in">console</span>.log(obj2.name);<span class="comment">//Jhon</span></div></pre></td></tr></table></figure>
<p>2.4 如果函数体是对象的方法，那么此时的函数体里面的this就是指向的<strong>调用</strong> 该函数的对象；注意区分下面这两种情况</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> foo = <span class="string">"bar"</span>;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar</span></div><div class="line">    <span class="keyword">var</span> obj = &#123;</div><div class="line">        <span class="attr">foo</span>:<span class="string">"objBar"</span>,</div><div class="line">        <span class="attr">test</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;	<span class="comment">//函数作为对象的方法，被对象调用</span></div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//objBar   此时的this指向调用函数的对象</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    obj.test();<span class="comment">//对象的方法的执行的上下文是对象，所以this指向对象</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="string">"bar"</span>;</div><div class="line"> <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar</span></div><div class="line"> <span class="keyword">var</span> obj = &#123;</div><div class="line">     <span class="attr">foo</span>:<span class="string">"objBar"</span>,</div><div class="line">     <span class="attr">test</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</div><div class="line">         <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">             <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar   </span></div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"> &#125;</div><div class="line"> obj.test()();<span class="comment">//注意区分这两种情况:test()返回的是一个函数，函数直接在Window环境下执行</span></div></pre></td></tr></table></figure>
<p>2.5 如果函数体是数组中的元素，那么函数作为数组的元素被调用的时候，指向数组,对于伪数组来书也是指向伪数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">"fn1"</span>);</div><div class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">   &#125;</div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">"fn2"</span>);</div><div class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>[<span class="number">2</span>]);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">var</span> arr = [fn1,fn2,<span class="string">'things'</span>];</div><div class="line">   arr[<span class="number">0</span>]();<span class="comment">//fn1 [function, function, "things"]</span></div><div class="line">   arr[<span class="number">1</span>]();<span class="comment">//fn2 things</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> obj = &#123;</div><div class="line">      <span class="attr">length</span> : <span class="number">10</span> ,</div><div class="line">      <span class="attr">method</span> : <span class="function"><span class="keyword">function</span>(<span class="params">f</span>)</span>&#123;</div><div class="line">          <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);<span class="comment">//10</span></div><div class="line">          <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</div><div class="line">          <span class="built_in">arguments</span>[<span class="number">0</span>]();<span class="comment">//1   this.length代表传入参数的个数</span></div><div class="line">          <span class="built_in">arguments</span>[<span class="number">0</span>].call(<span class="keyword">this</span>);<span class="comment">//10</span></div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">  obj.method(fn);</div></pre></td></tr></table></figure>
<p>this指向被调用的<strong>直接对象</strong> ，被谁调用指向谁</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> foo = <span class="string">"winBar"</span>;</div><div class="line">    <span class="keyword">var</span> out = &#123;</div><div class="line">        <span class="attr">foo</span>:<span class="string">"outerBar"</span>,</div><div class="line">        <span class="attr">outFunc</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          	<span class="built_in">console</span>.log(<span class="keyword">this</span>);<span class="comment">//this 代表out对象</span></div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//执行后输出  outerBar</span></div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="attr">inner</span>:&#123;</div><div class="line">            <span class="attr">foo</span>:<span class="string">"innerBar"</span>,</div><div class="line">            <span class="attr">innerFunc</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>);<span class="comment">//this代表 inner对象</span></div><div class="line">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//执行后输出 innerBar</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    out.outFunc();<span class="comment">//outFunc 函数被out这个对象调用，所以其内部的this指向out这个对象</span></div><div class="line">    out.inner.innerFunc();<span class="comment">//innerFunc函数被inner这个对象调用，所以其内部的this指向inner这个对象</span></div><div class="line"><span class="comment">//函数体被谁调用指向谁</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="总结-函数直接执行相当于被window调用，所以函数中的this指向window"><a href="#总结-函数直接执行相当于被window调用，所以函数中的this指向window" class="headerlink" title="总结:函数直接执行相当于被window调用，所以函数中的this指向window"></a>总结:函数直接执行相当于被window调用，所以函数中的this指向window</h3><p>2.5 javascript 中经常用的也就是事件的绑定，对应的事件处理函数中如果出现了this,那么这个this代表的所绑定的元素</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"按钮"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="built_in">document</span>.querySelector(<span class="string">"input"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);<span class="comment">//按钮     这个this指向input标签</span></div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>2.6 setInterval(fn,time)   setTimeout(fn,time)  中的this指向window;为什么呢？大家还记得 setInterval   setTimeont都是window对象的属性吗？setInterval(fn,time)  等价于  window.setInterval(fn,time)其实是window调用了setInterval方法，所以其指向window ;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> foo = <span class="string">"bar"</span>;</div><div class="line">    <span class="keyword">var</span> setTime = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> foo = <span class="string">"changedBar"</span>;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//bar</span></div><div class="line">    &#125;,<span class="number">1000</span>)</div><div class="line">    <span class="built_in">console</span>.log(setTime);<span class="comment">//setInterval函数返回以个ID值，代表当前定时器，用于后期可以清除该计时器用</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="3-prototype-this"><a href="#3-prototype-this" class="headerlink" title="3 prototype this"></a>3 prototype this</h2><p>原型里面的this指向，包括实例化的方法中的this指向:可以这么理解，它指向实例化的那个对象，但是,在找相应的属性的时候，它会顺着原型链一级级向上找，直到找到那个属性，如果没有找到，那么返回undefined;</p>
<p><strong>这个其实也是函数独立调用还是被对象调用的情况</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">this</span>.foo= <span class="string">"bar"</span>;</div><div class="line">        <span class="keyword">this</span>.logFoo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);<span class="comment">//this代表实例化之后的对象</span></div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> test1 = <span class="keyword">new</span> Test();</div><div class="line">    <span class="built_in">console</span>.log(test1);</div><div class="line">  <span class="comment">//Test&#123;foo: "bar" ,logFoo: (),__proto__: Objectconstructor: Test(),__proto__: Object&#125;</span></div><div class="line"><span class="comment">//关于new出来的对象可以暂时这么理解，然后该对象的地址赋值给test1;</span></div><div class="line">    <span class="built_in">console</span>.log(test1.foo);<span class="comment">//bar</span></div><div class="line">    test1.logFoo();<span class="comment">//bar</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>通过原型添加属性和方法：this会顺着对象的原型链一直往下找，直到找到该属性为止，如果找不到的话，那么返回undefined;原型里的this也是指向实例化的对象，this.foo就是顺着原型链一直找；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Test</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    Test.prototype.foo = <span class="string">"changedBar"</span>;</div><div class="line">    Test.prototype.logFoo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.foo);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> test1 = <span class="keyword">new</span> Test();</div><div class="line">    <span class="built_in">console</span>.log(test1);</div><div class="line"> <span class="comment">// Test&#123;__proto__: Object,constructor: Test(),foo: "changedBar",logFoo: (),__proto__: Object</span></div><div class="line">    <span class="built_in">console</span>.log(test1.foo);<span class="comment">//changedBar</span></div><div class="line">    test1.logFoo();<span class="comment">//changedBar</span></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>4 </p>
<h2 id="三-this总结"><a href="#三-this总结" class="headerlink" title="三 this总结"></a>三 this总结</h2><p>1 this永远指向函数运行的时候所在的对象，而不是被创建的时候所在的对象；</p>
<p>2 匿名函数或不处于任何对象中的函数指向window</p>
<p>3 如果是call apply with   指定的this是谁，就是谁，如果是普通的函数调用，函数被谁调用，this就指向谁</p>
<p>4 如果不是被new调用函数，那么函数体的this都是指代全局范围的this,代表window对象；</p>
<p>5 函数独立运行的时候，那么this指向其所在运行的环境；函数作为对象的方法被调用的时候，this指向调用该函数的对象</p>
<p>6 <strong>如果调用者函数，被某一个对象所拥有，那么该函数在调用时，内部的this指向该对象。</strong></p>
<p><strong>如果函数独立调用，那么该函数内部的this，则指向undefined</strong>;但是在非严格模式中，当this指向undefined时，它会被自动指向全局对象。</p>
<p>严格模式下this指向</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">       'use strict'</span>;</div><div class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   fn(); <span class="comment">//undefined //        fn是调用者，独立调用 </span></div><div class="line">   <span class="built_in">window</span>.fn();  <span class="comment">//window  //  fn是调用者，被window所拥有</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line">   <span class="keyword">var</span> a = <span class="number">20</span> ;</div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</div><div class="line">   &#125;</div><div class="line">   fn();<span class="comment">//报错</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="JiM-W" />
          <p class="site-author-name" itemprop="name">JiM-W</p>
           
              <p class="site-description motion-element" itemprop="description">keep fighting！</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">143</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">42</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">55</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JiM-W</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
