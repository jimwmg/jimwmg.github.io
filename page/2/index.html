<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="keep fighting！">
<meta property="og:type" content="website">
<meta property="og:title" content="JiM-W">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="JiM-W">
<meta property="og:description" content="keep fighting！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JiM-W">
<meta name="twitter:description" content="keep fighting！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title> JiM-W </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">JiM-W</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">keep Moving</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/15/217React-createElement/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/15/217React-createElement/" itemprop="url">
                  React createElement源码解读
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-15T12:36:00+08:00">
                2017-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-先看下大概的源码"><a href="#1-先看下大概的源码" class="headerlink" title="1  先看下大概的源码"></a>1  先看下大概的源码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ReactElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, key, ref, self, source, owner, props</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> element = &#123;</div><div class="line">    <span class="comment">// This tag allow us to uniquely identify this as a React Element</span></div><div class="line">    $$<span class="keyword">typeof</span>: REACT_ELEMENT_TYPE,</div><div class="line"></div><div class="line">    <span class="comment">// Built-in properties that belong on the element</span></div><div class="line">    type: type,</div><div class="line">    <span class="attr">key</span>: key,</div><div class="line">    <span class="attr">ref</span>: ref,</div><div class="line">    <span class="attr">props</span>: props,</div><div class="line"></div><div class="line">    <span class="comment">// Record the component responsible for creating this element.</span></div><div class="line">    _owner: owner,</div><div class="line">  &#125;;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">return</span> element;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">ReactElement.createElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, config, children</span>) </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">return</span> ReactElement(</div><div class="line">    type,</div><div class="line">    key,</div><div class="line">    ref,</div><div class="line">    self,</div><div class="line">    source,</div><div class="line">    ReactCurrentOwner.current,</div><div class="line">    props</div><div class="line">  );</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>可以看出React.createElement函数返回的是一个对象,大概是这个形式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  type,</div><div class="line">  key,</div><div class="line">  props: &#123;</div><div class="line">    children</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-我们平时进行元素渲染的时候-一般都是这么写"><a href="#2-我们平时进行元素渲染的时候-一般都是这么写" class="headerlink" title="2 我们平时进行元素渲染的时候 ,一般都是这么写"></a>2 我们平时进行元素渲染的时候 ,一般都是这么写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">React.render(</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>,</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p><strong>其实 <code>&lt;div /&gt;</code>  这样用 尖括号包起来的部分可以看做是jsx的一个语法糖,他其实是封装了React.createElement方法,注意返回值是一个javascript对象</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">React.render(</div><div class="line">    React.createElement(<span class="string">'div'</span>, <span class="literal">null</span>,</div><div class="line">        React.createElement(<span class="string">'div'</span>, <span class="literal">null</span>,</div><div class="line">            React.createElement(<span class="string">'div'</span>, <span class="literal">null</span>, <span class="string">'content'</span>)</div><div class="line">        )</div><div class="line">    ),</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>箭头函数中的运用  如果要返回一个对象,需要用 ( ) 将表达式包起来 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">const App = () =&gt; (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;AddTodo /&gt;</div><div class="line">    &lt;VisibleTodoList /&gt;</div><div class="line">    &lt;Footer /&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div></pre></td></tr></table></figure>
<p>如上代码 <code>&lt; &gt;</code> 包起来的jsx代码返回的是一个对象,所以该箭头函数返回的就是一个js对象</p>
<h3 id="3-React-createElement函数的参数"><a href="#3-React-createElement函数的参数" class="headerlink" title="3 React.createElement函数的参数"></a>3 React.createElement函数的参数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ReactElement.createElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, config, children</span>)</span></div></pre></td></tr></table></figure>
<p>从源码来看,我们可以看出其接受三个参数,第一个是type类型,也就是我们这个组件是一个HTML元素,还是一个函数组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(&lt;div /&gt;); //type是字符串 div </div><div class="line">//-------------------------</div><div class="line">function Welcome(props)&#123;</div><div class="line">  return &lt;h1&gt;hello &#123;props.name&#125;&lt;/h1&gt;</div><div class="line">&#125;</div><div class="line">var element = &lt;Welcome name = 'Jhon'/&gt;</div><div class="line">console.log(element);//type 是function</div></pre></td></tr></table></figure>
<p>React会根据type类型首字母判断是一个HTML元素还是一个组件函数,小写字母会被当成字符串,作为type类型,大写字母会被当成组件函数,进行递归渲染.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">type</span>: (string | ReactClass),</div><div class="line">  <span class="attr">props</span>: <span class="built_in">Object</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="4-ReactDOM-render函数"><a href="#4-ReactDOM-render函数" class="headerlink" title="4 ReactDOM.render函数"></a>4 ReactDOM.render函数</h3><p>简单理解,该函数接受两个参数,一个是要渲染的javascript对象,一个是渲染后的DOM元素要放置的位置</p>
<p>今天上班时候在地铁上看的,来到公司简单总结下.</p>
<p><a href="http://mp.weixin.qq.com/s/IC3oMQLnz7hvKaN01JS_Zw" target="_blank" rel="external">参考:前端早读课</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/12/216React-Redux-Router学习路线/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/12/216React-Redux-Router学习路线/" itemprop="url">
                  React Redux Router学习路线
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-12T12:36:00+08:00">
                2017-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redux/" itemprop="url" rel="index">
                    <span itemprop="name">redux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-React-Redux-Router学习"><a href="#1-React-Redux-Router学习" class="headerlink" title="1 React Redux Router学习"></a>1 React Redux Router学习</h3><p>首先英文得要过关,因为需要看英文文档 ;</p>
<p>第一步 <a href="https://facebook.github.io/react/docs/hello-world.html" target="_blank" rel="external">react</a>      <a href="https://github.com/ruanyf/react-demos" target="_blank" rel="external">demo</a>  <a href="https://hulufei.gitbooks.io/react-tutorial/content/introduction.html" target="_blank" rel="external">react概览</a></p>
<p>第二步 <a href="http://www.redux.org.cn/docs/api/index.html" target="_blank" rel="external">redux</a>      <a href="https://github.com/happypoulp/redux-tutorial" target="_blank" rel="external">demo</a>    <a href="https://github.com/kenberkeley/redux-simple-tutorial" target="_blank" rel="external">源码实现</a></p>
<p>第三步 <a href="http://react-guide.github.io/react-router-cn/" target="_blank" rel="external">router</a>     <a href="https://reacttraining.com/react-router/web/guides/quick-start" target="_blank" rel="external">demo</a>     <a href="https://github.com/ReactTraining/react-router/tree/master/packages/react-router/docs" target="_blank" rel="external">API</a></p>
<p>学习方法推荐,基础最重要,源码很重要 </p>
<ul>
<li>github上搜索  分别单独搜索  react   redux   react-router    react-redux   react-redux -router</li>
<li>google搜索  说句实话,谷歌要比百度靠谱太多,google搜索都是干货,百度甩给你的可能是bug</li>
<li>知乎搜索 react ,有一些话题以及问题会由比较好的链接</li>
</ul>
<h3 id="2-项目理解"><a href="#2-项目理解" class="headerlink" title="2 项目理解"></a>2 项目理解</h3><p><a href="https://github.com/kenberkeley/react-demo" target="_blank" rel="external">react-redux-router </a></p>
<p><a href="https://github.com/reactjs/redux" target="_blank" rel="external">react-redux</a>         <a href="http://huziketang.com/books/react/lesson1" target="_blank" rel="external">推荐:一步步实现Redux </a></p>
<p><a href="https://github.com/reactjs/react-router-tutorial/tree/master/lessons" target="_blank" rel="external">react-router</a></p>
<p><a href="https://github.com/bailicangdu/react-pxq" target="_blank" rel="external">React和redux 通过react-redux结合 </a></p>
<h3 id="3-我的博客也有一些自己学习的总结-感兴趣也可以看下"><a href="#3-我的博客也有一些自己学习的总结-感兴趣也可以看下" class="headerlink" title="3 我的博客也有一些自己学习的总结,感兴趣也可以看下."></a>3 我的博客也有一些自己学习的总结,感兴趣也可以看下.</h3><p>后期会补充,欢迎交流</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/12/223React-概览学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/12/223React-概览学习笔记/" itemprop="url">
                  React 概览学习笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-12T12:36:00+08:00">
                2017-05-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是一些比较碎的知识点整理,不建议大家阅读,仅仅是自己的一些总结而已</p>
<p>1 组件的props属性</p>
<ul>
<li>可以通过扩展运算符展开进行写入组件,这种方式省去了我们要一个个写属性的麻烦</li>
<li>属性键值相同的话,后面的会覆盖前面的</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> props = &#123; <span class="attr">foo</span>: <span class="string">'default'</span>,<span class="attr">bar</span>:<span class="string">'baz'</span> &#125;;</div><div class="line"><span class="keyword">var</span> component = <span class="xml"><span class="tag">&lt;<span class="name">Component</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">foo</span>=<span class="string">&#123;</span>'<span class="attr">override</span>'&#125; /&gt;</span>;</span></div><div class="line">console.log(component.props.foo); // 'override'</div></pre></td></tr></table></figure>
<p>2 组件的ref属性</p>
<ul>
<li><p>组件的ref属性可以用在DOM元素上,如果用在DOM元素上,那么该属性将会等于一个callback函数,该函数接受此DOM元素作为参数</p>
</li>
<li><p>When the <code>ref</code> attribute is used on a custom component declared as a class, the <code>ref</code>callback receives the mounted instance of the component as its argument</p>
<p>如果组件的ref属性用在class声明的组件上,那么回调函数接受的参数是实例化的组件</p>
</li>
<li><p>组件在装载或者卸载之后,ref指向的callback函数会立即执行,可以在组件中通过componentDidMount函数来进行判断</p>
</li>
<li><p>​</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/11/215Redux-Provider-Connect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/11/215Redux-Provider-Connect/" itemprop="url">
                  Redux Provider Connect
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-11T12:36:00+08:00">
                2017-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redux/" itemprop="url" rel="index">
                    <span itemprop="name">redux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我是一个不信邪的人,所以无论如何我也要把这个搞明白</p>
<p>先来看下直接在React中使用Redux</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> store = createStore(reducer)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</div><div class="line"></div><div class="line">  componentWillMount()&#123;</div><div class="line">    store.subscribe(<span class="function">(<span class="params">state</span>)=&gt;</span><span class="keyword">this</span>.setState(state))</div><div class="line">  &#125;</div><div class="line"><span class="comment">//以下在React组件中直接通过store使用Redux提供的状态管理</span></div><div class="line">  render()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Comp</span> <span class="attr">state</span>=<span class="string">&#123;this.state&#125;</span></span></span></div><div class="line">                 <span class="attr">onIncrease</span>=<span class="string">&#123;()</span>=&gt;store.dispatch(actions.increase())&#125;</div><div class="line">                 onDecrease=&#123;()=&gt;store.dispatch(actions.decrease())&#125;</div><div class="line">    /&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>那么为什么还要使用react-redux呢?</p>
<p>React推崇的是单向数据流，自上而下进行数据的传递，但是由下而上或者不在一条数据流上的组件之间的通信就会变的复杂。解决通信问题的方法很多，如果只是父子级关系，父级可以将一个回调函数当作属性传递给子级，子级可以直接调用函数从而和父级通信。</p>
<p>组件层级嵌套到比较深，<strong>可以使用上下文getChildContext来传递信息，这样在不需要将函数一层层往下传，任何一层的子级都可以通过this.context直接访问。</strong></p>
<p>兄弟关系的组件之间无法直接通信，它们只能利用同一层的上级作为中转站。而如果兄弟组件都是最高层的组件，为了能够让它们进行通信，必须在它们外层再套一层组件，这个外层的组件起着保存数据，传递信息的作用，这其实就是redux所做的事情。</p>
<p>组件之间的信息还可以通过全局事件来传递。不同页面可以通过参数传递数据，下个页面可以用location.param来获取。其实react本身很简单，难的在于如何优雅高效的实现组件之间数据的交流。</p>
<p>###1Provider核心源码 </p>
<p><strong>Provider</strong>是一个组件，它接受store作为props，然后通过context往下传，这样react中任何组件都可以通过context获取store。也就意味着我们可以在任何一个组件里利用dispatch(action)来触发reducer改变state，并用subscribe监听state的变化，然后用getState获取变化后的值。但是并不推荐这样做，它会让数据流变的混乱，过度的耦合也会影响组件的复用，维护起来也更麻烦。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Provider = <span class="function"><span class="keyword">function</span> (<span class="params">_Component</span>) </span>&#123;</div><div class="line">  _inherits(Provider, _Component);</div><div class="line"></div><div class="line">  Provider.prototype.getChildContext = <span class="function"><span class="keyword">function</span> <span class="title">getChildContext</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123; <span class="attr">store</span>: <span class="keyword">this</span>.store &#125;;</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Provider</span>(<span class="params">props, context</span>) </span>&#123;</div><div class="line">    _classCallCheck(<span class="keyword">this</span>, Provider);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> _this = _possibleConstructorReturn(<span class="keyword">this</span>, _Component.call(<span class="keyword">this</span>, props, context));</div><div class="line">    <span class="comment">//这行代码是我加的测试代码,在控制台输出的就是一个Provider对象</span></div><div class="line">    <span class="built_in">console</span>.log(_this);</div><div class="line">    </div><div class="line">    _this.store = props.store;</div><div class="line">    <span class="keyword">return</span> _this;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  Provider.prototype.render = <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> _react.Children.only(<span class="keyword">this</span>.props.children);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> Provider;</div><div class="line">&#125;(_react.Component);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Provider &#123;props: Object, context: Object, refs: Object, updater: Object&#125;</div><div class="line">context:Object</div><div class="line">props:Object</div><div class="line">children:Object</div><div class="line">$$typeof:Symbol(react.element)</div><div class="line">key:null</div><div class="line">props:Object</div><div class="line">ref:null</div><div class="line">type:function App()</div><div class="line">_owner:null</div><div class="line">_store:Object</div><div class="line">_self:null</div><div class="line">_source:Object</div><div class="line">__proto__:Object</div><div class="line">store:Object</div><div class="line">__proto__:Object</div><div class="line">refs:Object</div><div class="line">state:null</div><div class="line">store:Object</div><div class="line">updater:Object</div><div class="line">_reactInternalIns</div></pre></td></tr></table></figure>
<p>使用如下:provider的主要作用就是将store作为props对象中的一个属性传递给Provider实例化的之后的对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> store = createStore(reducer)</div><div class="line"></div><div class="line"><span class="keyword">const</span> App = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">FilterLink</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>此时store是Provider对象的props中的一个属性之一.</p>
<p>=========</p>
<p>after four hours  我有点信邪了  , 毕竟我是才学这个的小白.</p>
<p><code>Provider</code> 内的任何一个组件（比如这里的 <code>FilterLink</code>），如果需要使用 <code>store</code> 中的数据，就必须是「被 connect 过的」组件——使用 <code>connect</code> 方法对「你编写的组件（<code>Link</code>）」进行包装后的产物。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">const FilterLink = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(Link)</div></pre></td></tr></table></figure>
<h3 id="2-connect函数-connect-mapStateToProps-mapDispatchToProps-mergeProps"><a href="#2-connect函数-connect-mapStateToProps-mapDispatchToProps-mergeProps" class="headerlink" title="2  connect函数   connect(mapStateToProps, mapDispatchToProps, mergeProps)"></a>2  connect函数   connect(mapStateToProps, mapDispatchToProps, mergeProps)</h3><p>Connects a React component to a Redux store.</p>
<p>It does not modify the component class passed to it. Instead, it returns a new, connected component class, for you to use.</p>
<p>connect函数的主要作用是将React组件和Redux的store联系起来</p>
<p><strong>往根本去说其实是将redux的store对象中的 state  dispatch 这些属性添加(映射)到 react组件的props属性上</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(props)</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line">    &#125;</div><div class="line"> &lt;Welcome name = <span class="string">'Jhon'</span>/&gt; </div><div class="line">   <span class="comment">//一般情况下我们组件中传递props参数的时候,是通过这种方式传递的</span></div></pre></td></tr></table></figure>
<p>而connect函数的作用就是向props组件中添加属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params">mapStateToProps, mapDispatchToProps, mergeProps, options = &#123;&#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">wrapWithConnect</span>(<span class="params">WrappedComponent</span>) </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Connect</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">      <span class="keyword">constructor</span>(props, context) &#123;</div><div class="line">        <span class="comment">// 从祖先Component处获得store</span></div><div class="line">        <span class="keyword">this</span>.store = props.store || context.store</div><div class="line">        <span class="keyword">this</span>.stateProps = computeStateProps(<span class="keyword">this</span>.store, props)</div><div class="line">        <span class="keyword">this</span>.dispatchProps = computeDispatchProps(<span class="keyword">this</span>.store, props)</div><div class="line">        <span class="keyword">this</span>.state = &#123; <span class="attr">storeState</span>: <span class="literal">null</span> &#125;</div><div class="line">        <span class="comment">// 对stateProps、dispatchProps、parentProps进行合并</span></div><div class="line">        <span class="keyword">this</span>.updateState()</div><div class="line">      &#125;</div><div class="line">      shouldComponentUpdate(nextProps, nextState) &#123;</div><div class="line">        <span class="comment">// 进行判断，当数据发生改变时，Component重新渲染</span></div><div class="line">        <span class="keyword">if</span> (propsChanged || mapStateProducedChange || dispatchPropsChanged) &#123;</div><div class="line">          <span class="keyword">this</span>.updateState(nextProps)</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">        componentDidMount() &#123;</div><div class="line">          <span class="comment">// 改变Component的state</span></div><div class="line">          <span class="keyword">this</span>.store.subscribe(() = &#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;</div><div class="line">              <span class="attr">storeState</span>: <span class="keyword">this</span>.store.getState()</div><div class="line">            &#125;)</div><div class="line">          &#125;)</div><div class="line">        &#125;</div><div class="line">        render() &#123;</div><div class="line">          <span class="comment">// 生成包裹组件Connect</span></div><div class="line">          <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.nextState</span>&#125; /&gt;</span></span></div><div class="line">          )</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">      Connect.contextTypes = &#123;</div><div class="line">        store: storeShape</div><div class="line">      &#125;</div><div class="line">      return Connect;</div><div class="line">    &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h4 id="2-1-看一个组件的声明"><a href="#2-1-看一个组件的声明" class="headerlink" title="2.1 看一个组件的声明"></a>2.1 看一个组件的声明</h4><p>Link.js  组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></div><div class="line"><span class="comment">//这里面的&#123;active,children,onClick&#125; 其实就是props,只不过是以对象的直接形式出现的,</span></div><div class="line"><span class="comment">//另外直接进行了解构赋值操作</span></div><div class="line"><span class="keyword">const</span> Link = <span class="function">(<span class="params">&#123; active, children, onClick &#125;</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (active) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span></span></span></div><div class="line">       <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt; &#123;</div><div class="line">         e.preventDefault()</div><div class="line">         onClick()</div><div class="line">       &#125;&#125;</div><div class="line">    &gt;</div><div class="line">      &#123;children&#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div><div class="line"><span class="comment">//限定组件属性的数据类型</span></div><div class="line">Link.propTypes = &#123;</div><div class="line">  <span class="attr">active</span>: PropTypes.bool.isRequired,</div><div class="line">  <span class="attr">children</span>: PropTypes.node.isRequired,</div><div class="line">  <span class="attr">onClick</span>: PropTypes.func.isRequired</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'link组件'</span>,&lt;Link/&gt;);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Link</div></pre></td></tr></table></figure>
<p>为了方便大家看懂bable转码如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> Link = <span class="function"><span class="keyword">function</span> <span class="title">Link</span>(<span class="params">_ref</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> active = _ref.active,</div><div class="line">      children = _ref.children,</div><div class="line">      _onClick = _ref.onClick;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (active) &#123;</div><div class="line">    <span class="keyword">return</span> React.createElement(</div><div class="line">      <span class="string">"span"</span>,</div><div class="line">      <span class="literal">null</span>,</div><div class="line">      children</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> React.createElement(</div><div class="line">    <span class="string">"a"</span>,</div><div class="line">    &#123; <span class="attr">href</span>: <span class="string">"#"</span>,</div><div class="line">      <span class="attr">onClick</span>: <span class="function"><span class="keyword">function</span> <span class="title">onClick</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">        e.preventDefault();</div><div class="line">        _onClick();</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    children</div><div class="line">  );</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="2-2-这个时候我们需要注意下-active-children-onClick-来自何方"><a href="#2-2-这个时候我们需要注意下-active-children-onClick-来自何方" class="headerlink" title="2.2 这个时候我们需要注意下{ active, children, onClick }来自何方?"></a>2.2 这个时候我们需要注意下{ active, children, onClick }来自何方?</h4><p>FilterLink.js(container容器)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"><span class="keyword">import</span> &#123; setVisibilityFilter &#125; <span class="keyword">from</span> <span class="string">'../actions'</span></div><div class="line"><span class="keyword">import</span> Link <span class="keyword">from</span> <span class="string">'../components/Link'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, ownProps</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">active</span>: ownProps.filter === state.visibilityFilter</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapDispatchToProps = <span class="function">(<span class="params">dispatch, ownProps</span>) =&gt;</span> (&#123;</div><div class="line">  <span class="attr">onClick</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    dispatch(setVisibilityFilter(ownProps.filter))</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Link'</span>,&lt;Link/&gt;);</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> FilterLink = connect(</div><div class="line">  mapStateToProps,</div><div class="line">  mapDispatchToProps</div><div class="line">)(Link)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'FilterLink'</span>,&lt;FilterLink/&gt;);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> FilterLink</div></pre></td></tr></table></figure>
<ul>
<li>mapStateToProps(state,ownProps) 这个函数的作用就是将store对象中的state状态赋值给组件的props属性</li>
<li>mapDispatchToProps(dispatch, ownProps)这个函数的作用就是将store对象中dispatch方法给到props属性</li>
</ul>
<p>源码暂时没有告破</p>
<p><a href="http://taobaofed.org/blog/2016/08/18/react-redux-connect/" target="_blank" rel="external">参考</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/11/218React-redux Demo案例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/11/218React-redux Demo案例/" itemprop="url">
                  从react到react-redux到react-redux-react-redux
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-11T12:36:00+08:00">
                2017-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/redux/" itemprop="url" rel="index">
                    <span itemprop="name">redux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前言,对于初学者来说,这个demo理解起来相对简单,只需要create-react-app  ,然后 npm install react-redux  npm install redux 即可.(react官方文档和redux官方文档)</p>
<p>本文主要理解redux在react中期的作用,以及react-redux如何将react和redux连接起来</p>
<p><a href="https://jimwmg.github.io/2017/05/11/215Redux-Provider-Connect/" target="_blank" rel="external">Provider connect 源码解读</a></p>
<p><a href="https://jimwmg.github.io/2017/05/05/205Redux-createStore%E6%BA%90%E7%A0%81/" target="_blank" rel="external">createStore源码</a></p>
<p><a href="http://www.cnblogs.com/hhhyaaon/p/5863408.html" target="_blank" rel="external">Provider connect2 源码解读</a></p>
<p><a href="https://github.com/bailicangdu/react-pxq" target="_blank" rel="external">一个比较好的案例</a></p>
<h3 id="1-react"><a href="#1-react" class="headerlink" title="1 react"></a>1 react</h3><p>通过setState改变state状态,触发ReactDOM.render函数,重新刷新UI组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React ,&#123;Component,PropTypes&#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Toggle</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">    <span class="keyword">this</span>.state = &#123;<span class="attr">count</span>: <span class="number">1</span>&#125;;</div><div class="line"></div><div class="line">    <span class="comment">// This binding is necessary to make `this` work in the callback</span></div><div class="line">    <span class="keyword">this</span>.handleClick = <span class="keyword">this</span>.handleClick.bind(<span class="keyword">this</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  handleClick() &#123;</div><div class="line">    <span class="keyword">this</span>.setState(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</div><div class="line">      <span class="attr">count</span>: prevState.count+<span class="number">1</span></div><div class="line">    &#125;));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span></span></div><div class="line">        &#123;this.state.count&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">console</span>.dir(Toggle);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Toggle</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('root')</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="2-react-redux"><a href="#2-react-redux" class="headerlink" title="2 react-redux"></a>2 react-redux</h3><p>通过给store注册render函数,每次dispatch的时候,都会触发render函数(dispatch函数执行的时候,会执行传入的reducer和绑定的所有的监听函数 )</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React ,&#123;Component,PropTypes&#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> increaseAction = &#123;<span class="attr">type</span> :<span class="string">'INCREASE'</span>&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state = &#123;count: <span class="number">0</span>&#125;,action</span>)</span>&#123;</div><div class="line">  <span class="keyword">switch</span>(action.type)&#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'INCREASE'</span> :</div><div class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span> : state.count+<span class="number">1</span>&#125;</div><div class="line">    <span class="keyword">default</span> : </div><div class="line">      <span class="keyword">return</span> state </div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> store = createStore(reducer)</div><div class="line"><span class="built_in">console</span>.log(store);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(store.getState());</div><div class="line"><span class="comment">//=========================如果没有这段代码,视图将不会更新,但是state状态确实是改变了的</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    ReactDOM.render(</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Toggle</span> /&gt;</span>,</span></div><div class="line">    document.getElementById('root')</div><div class="line">    );</div><div class="line">&#125;</div><div class="line"></div><div class="line">store.subscribe(render)</div><div class="line">//============================================</div><div class="line">class Toggle extends React.Component &#123;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    return (</div><div class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;store.dispatch(increaseAction);console.log(store.getState().count);</div><div class="line">      &#125;&#125;&gt;</div><div class="line">        &#123;store.getState().count&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">console.dir(Toggle);</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="tag">&lt;<span class="name">Toggle</span> /&gt;</span>,</div><div class="line">  document.getElementById('root')</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="3-react-redux-react-redux"><a href="#3-react-redux-react-redux" class="headerlink" title="3 react    redux     react-redux"></a>3 react    redux     react-redux</h3><p>通过第二部分代码我们可以看出来,redux确实可以帮助我们管理代码,但是有一点不好的地方就是每次state的状态改变的时候,都需要重新手动刷新视图.</p>
<p>react-redux 提供两个函数,一个是Provider,该组件函数定义的时候,大概实现如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Provider</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  getChildContext() &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">store</span> : <span class="keyword">this</span>.props.store</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.props.children;</div><div class="line">    <span class="comment">//表示渲染Privider组件的子元素</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Provider.childContextTypes = &#123;</div><div class="line">  <span class="attr">store</span>: React.PropTypes.object</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>一个是connect函数 const WrapToggle = connect(mapStateToProps,mapDispatchToProps)(Toggle),高阶组件</p>
<p>该函数的作用是通过mapStateToProps和mapDispatchToProps函数,将将一些属性添加到Toggle组件的props上</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React ,&#123;Component,PropTypes&#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">'redux'</span></div><div class="line"><span class="keyword">import</span> &#123;Provider,connect&#125; <span class="keyword">from</span> <span class="string">'react-redux'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> increaseAction = &#123;<span class="attr">type</span> :<span class="string">'INCREASE'</span>&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state = &#123;count: <span class="number">0</span>&#125;,action</span>)</span>&#123;</div><div class="line">  <span class="keyword">switch</span>(action.type)&#123;</div><div class="line">    <span class="keyword">case</span> <span class="string">'INCREASE'</span> :</div><div class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span> : state.count+<span class="number">1</span>&#125;</div><div class="line">    <span class="keyword">default</span> : </div><div class="line">      <span class="keyword">return</span> state </div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> store = createStore(reducer)</div><div class="line"><span class="built_in">console</span>.log(store);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(store.getState());</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Toggle</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  </div><div class="line">  render() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props);<span class="comment">//connect函数中stateProps dispatchProps ownProps 三者融合后的结果传递给UI组件props对象</span></div><div class="line">    <span class="comment">//对象的解构赋值</span></div><div class="line">    <span class="keyword">const</span> &#123;value,onIncreaseClick&#125; = <span class="keyword">this</span>.props </div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>= <span class="string">&#123;onIncreaseClick&#125;</span>&gt;</span></span></div><div class="line">        &#123;value&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> mapStateToProps = <span class="function">(<span class="params">state, ownProps</span>) =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(state);</div><div class="line">  <span class="built_in">console</span>.log(ownProps);</div><div class="line">  <span class="comment">//state就是通过Provider传递进来的store.getState()的结果</span></div><div class="line">  <span class="comment">//ownProps就是connect返回的新组件,这里是WrapToggle组件上的Props属性对象</span></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">value</span>: state.count</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span>  mapDispatchToProps = <span class="function">(<span class="params">dispatch, ownProps</span>) =&gt;</span> &#123;</div><div class="line">  <span class="built_in">console</span>.log(dispatch);</div><div class="line">  <span class="built_in">console</span>.log(ownProps);</div><div class="line">  <span class="comment">//dispatch就是 通过Provider传递进来的store.dispatch函数</span></div><div class="line">  <span class="comment">//ownProps就是connect返回的新组件,这里是WrapToggle组件上的Props属性对象</span></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">onIncreaseClick</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      dispatch(increaseAction)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> WrapToggle = connect(mapStateToProps,mapDispatchToProps)(Toggle)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.dir(Toggle);</div><div class="line"><span class="built_in">console</span>.dir(WrapToggle);</div><div class="line"><span class="comment">//注意 WrapToggle组件添加了一个属性,方便一会输出对比,这些属性就是ownProps对象</span></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></div><div class="line">  </div><div class="line">    <span class="tag">&lt;<span class="name">WrapToggle</span> <span class="attr">wrapProps</span>=<span class="string">'WarpToggleProps'</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span>,</div><div class="line">  document.getElementById('root')</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="4-react如何响应store的变化-也就是说何时重新渲染页面"><a href="#4-react如何响应store的变化-也就是说何时重新渲染页面" class="headerlink" title="4 react如何响应store的变化,也就是说何时重新渲染页面"></a>4 react如何响应store的变化,也就是说何时重新渲染页面</h3><p>4.1 单纯的react中,通过setState函数,改变state状态树,setState函数每次执行都会重新渲染UI视图</p>
<p>4.2 react搭配redux的时候,通过store链接,react的状态可以通过redux来进行管理,此时redux创建的store中存储了react中的state状态,此时如果想要更新UI视图,需要手动绑定事件,此时唯一改变state的函数是dispatch,通过该函数改变state,从createStore源码中可以看出来</p>
<ul>
<li>先执行reducer,改变state状态</li>
<li>然后会执行通过subscribe注册的所有的监听事件</li>
</ul>
<p>4.3 react搭配redux的时候, 通过react-redux进行react和redux的连接 ;</p>
<ul>
<li>Provider函数作用:  <ul>
<li>1)在原应用组件上包裹一层，使原来整个应用成为Provider的子组件,而Provider组件定义的时候,render函数返回的是子组件,所以渲染的还是子组件 </li>
<li>2) 接收Redux的store作为props，通过context对象传递给子孙组件上的connect</li>
</ul>
</li>
<li>在connect内部,当state树发生变化的时候,最终会触发setState函数,所以会直接触发UI视图的重新渲染<ul>
<li>1)将store对象上的整个state状态树上的<strong>某个属性</strong>传递给被包裹的组件,这里组件是Toggle,传递的属性是value</li>
<li>2)将store对象上的触发dispatch函数的onIncreaseClick传递给被包裹组件,这里是Toggle,传递的属性是onIncreaseClick</li>
<li>3)connect函数会将这些属性一起合并到Toggle组件的属性props上</li>
</ul>
</li>
</ul>
<ol>
<li><p>4 connect函数参数解析 connect(mapStateToProps, mapDispatchToProps, mergeProps, options)(component)</p>
<p>1)<strong>mapStateToProps(state, [ownProps])：</strong>函数: 每次state状态更新的时候都会调用该函数</p>
<ul>
<li>该函数在每次store中的state状态树更新的时候都会<strong>调用该函数,</strong>通过本案例点击按钮看到控制台输出可以深化理解</li>
<li>该函数返回的对象必须是plain object</li>
<li><strong>默认为空,不会将state状态添加到component组件中</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">function mapStateToProps(state) &#123;</div><div class="line">   return &#123; todos: state.todos &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>2)<strong>mapDispatchToProps(dispatch, [ownProps])：</strong>函数:</p>
<p>默认会将dispatch函数添加到component组件中props属性上.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapDispatchToProps</span>(<span class="params">dispatch</span>) </span>&#123;</div><div class="line">   <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">todoActions</span>: bindActionCreators(todoActionCreators, dispatch),</div><div class="line">      <span class="attr">counterActions</span>: bindActionCreators(counterActionCreators, dispatch)</div><div class="line">   &#125;;</div><div class="line">&#125;</div><div class="line"><span class="comment">//这里面mapDispatchToProps函数接受的参数其实就是store.dispatch函数,bindActionCreators函数接受两个参数,一个是actionCreator,一个是dispatch函数</span></div></pre></td></tr></table></figure>
<p>3)<strong>mergeProps(stateProps, dispatchProps, ownProps)：</strong></p>
<p>将mapStateToProps() 与 mapDispatchToProps()返回的对象和<strong>容器组件</strong>自身的props(本案例就是WrapToggle组件的props:  wrapProps=’WarpToggleProps)合并成新的props并传入被包裹的组件(Toggle)。默认返回 Object.assign({}, ownProps, stateProps, dispatchProps) 的结果。</p>
<p><strong>这里也就解释了为什么Toggle组件中props属性中有</strong>stateProps, dispatchProps, ownProps 这些对象的组合结果了.</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/11/214webpack模块路径解析规则/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/11/214webpack模块路径解析规则/" itemprop="url">
                  webpack模块路径解析规则
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-11T12:36:00+08:00">
                2017-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="模块解析"><a href="#模块解析" class="headerlink" title="模块解析"></a>模块解析</h1><p>##1 首先来看下webpack支持的模块类型</p>
<p>###模块(Modules)</p>
<p><a href="https://github.com/webpack/webpack.js.org/edit/master/content/concepts/modules.md" target="_blank" rel="external">EDIT DOCUMENT**</a></p>
<p>在<a href="https://en.wikipedia.org/wiki/Modular_programming" target="_blank" rel="external">模块化编程</a>中，开发者将程序分解成离散功能块(discrete chunks of functionality)，并称之为<em>模块</em>。</p>
<p>每个模块具有比完整程序更小的接触面，使得校验、调试、测试轻而易举。 精心编写的<em>模块</em>提供了可靠的抽象和封装界限，使得应用程序中每个模块都具有条理清楚的设计和明确的目的。</p>
<p>Node.js 从最一开始就支持模块化编程。然而，在 web，<em>模块化</em>的支持正缓慢到来。在 web 存在多种支持 JavaScript 模块化的工具，这些工具各有优势和限制。webpack 基于从这些系统获得的经验教训，并将<em>模块</em>的概念应用于项目中的任何文件。</p>
<p>###什么是 webpack 模块</p>
<p>对比 <a href="https://nodejs.org/api/modules.html" target="_blank" rel="external">Node.js 模块</a>，webpack <em>模块</em>能够以各种方式表达它们的依赖关系，几个例子如下：</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="external">ES2015 <code>import</code></a> 语句</li>
<li><a href="http://www.commonjs.org/specs/modules/1.0/" target="_blank" rel="external">CommonJS</a> <code>require()</code> 语句</li>
<li><a href="https://github.com/amdjs/amdjs-api/blob/master/AMD.md" target="_blank" rel="external">AMD</a> <code>define</code> 和 <code>require</code> 语句</li>
<li>css/sass/less 文件中的 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@import" target="_blank" rel="external"><code>@import</code> 语句</a>。</li>
<li>样式(<code>url(...)</code>)或 HTML 文件(<code>&lt;img src=...&gt;</code>)中的图片链接(image url)</li>
</ul>
<blockquote>
<p> webpack 1 需要特定的 loader 来转换 ES 2015 <code>import</code>，然而通过 webpack 2 可以开箱即用。</p>
</blockquote>
<h3 id="支持的模块类型"><a href="#支持的模块类型" class="headerlink" title="支持的模块类型"></a>支持的模块类型</h3><p>webpack 通过 <em>loader</em> 可以支持各种语言和预处理器编写模块。<em>loader</em> 描述了 webpack <strong>如何</strong>处理 非 JavaScript(non-JavaScript) <em>模块</em>，并且在<em>bundle</em>中引入这些<em>依赖</em>。 webpack 社区已经为各种流行语言和语言处理器构建了 <em>loader</em>，包括：</p>
<ul>
<li><a href="http://coffeescript.org/" target="_blank" rel="external">CoffeeScript</a></li>
<li><a href="https://www.typescriptlang.org/" target="_blank" rel="external">TypeScript</a></li>
<li><a href="https://babeljs.io/" target="_blank" rel="external">ESNext (Babel)</a></li>
<li><a href="http://sass-lang.com/" target="_blank" rel="external">Sass</a></li>
<li><a href="http://lesscss.org/" target="_blank" rel="external">Less</a></li>
<li><a href="http://stylus-lang.com/" target="_blank" rel="external">Stylus</a></li>
</ul>
<p>总的来说，webpack 提供了可定制的、强大和丰富的 API，允许<strong>任何技术栈</strong>使用 webpack，保持了在你的开发、测试和生成流程中<strong>无侵入性(non-opinionated)</strong>。</p>
<h2 id="2-webpack可以解析的文件路径"><a href="#2-webpack可以解析的文件路径" class="headerlink" title="2 webpack可以解析的文件路径"></a>2 webpack可以解析的文件路径</h2><p><code>(import</code>语句会执行所加载的模块，可以有下面的写法)</p>
<h3 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"/home/me/file"</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">"C:\\Users\\me\\file"</span>;</div></pre></td></tr></table></figure>
<p>由于我们已经取得文件的绝对路径，因此不需要进一步再做解析。</p>
<p><strong>也就是说不需要webpack进行路径的解析.</strong></p>
<h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"../src/file1"</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">"./file2"</span>;</div></pre></td></tr></table></figure>
<p>在这种情况下，使用 <code>import</code> 或 <code>require</code> 的资源文件(resource file)所在的目录被认为是上下文目录(context directory)。在 <code>import/require</code> 中给定的相对路径，会添加此上下文路径(context path)，以产生模块的绝对路径(absolute path)。</p>
<p><strong>也就是说webpack解析该文件的时候,会以资源文件所在目录为基准进行解析;</strong></p>
<h3 id="模块路径"><a href="#模块路径" class="headerlink" title="模块路径"></a>模块路径</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"module"</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">"module/lib/file"</span>;</div></pre></td></tr></table></figure>
<ul>
<li>模块将在 <a href="https://doc.webpack-china.org/configuration/resolve/#resolve-modules" target="_blank" rel="external"><code>resolve.modules</code></a> 中指定的所有目录内搜索。 <strong>也就是说对于模块路径,解析的时候会在node_modules目录下进行解析</strong></li>
</ul>
<p>告诉 webpack 解析模块时应该搜索的目录。</p>
<p>绝对路径和相对路径都能使用，但是要知道它们之间有一点差异。</p>
<p>通过查看当前目录以及祖先路径（即 <code>./node_modules</code>, <code>../node_modules</code> 等等），相对路径将类似于 Node 查找 ‘node_modules’ 的方式进行查找。</p>
<p>使用绝对路径，将只在给定目录中搜索。</p>
<p><code>resolve.modules</code> defaults to:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">modules: [&quot;node_modules&quot;]</div></pre></td></tr></table></figure>
<p>如果你想要添加一个目录到模块搜索目录，此目录优先于 <code>node_modules/</code> 搜索：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">modules: [path.resolve(__dirname, &quot;src&quot;), &quot;node_modules&quot;]</div></pre></td></tr></table></figure>
<ul>
<li>你可以替换初始模块路径，此替换路径通过使用 <a href="https://doc.webpack-china.org/configuration/resolve/#resolve-alias" target="_blank" rel="external"><code>resolve.alias</code></a> 配置选项来创建一个别名。 <strong>此时在解析模块路径的时候,就不会再去node_modules里面查找对应的模块,而是通过我们配置的路径进行查找</strong></li>
</ul>
<p>比如App.js中 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> store, &#123; history &#125; <span class="keyword">from</span> <span class="string">'STORE'</span></div><div class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">'ROUTE'</span></div></pre></td></tr></table></figure>
<p><strong>from后面就是要解析的路径,此处的路径是模块路径;</strong></p>
<p>webpack.config.js中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>),</div><div class="line">  webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>),</div><div class="line">  NyanProgressPlugin = <span class="built_in">require</span>(<span class="string">'nyan-progress-webpack-plugin'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> rootPath = path.resolve(__dirname, <span class="string">'..'</span>), <span class="comment">// 项目根目录,__diename永远获取的是当前文件相对于磁盘根目录  react-demo/  目录下</span></div><div class="line">  src = path.join(rootPath, <span class="string">'src'</span>), <span class="comment">// 开发源码目录</span></div><div class="line">  env = process.env.NODE_ENV.trim(); <span class="comment">// 当前环境</span></div><div class="line"><span class="keyword">var</span> commonPath = &#123;</div><div class="line">  <span class="attr">rootPath</span>: rootPath,</div><div class="line">  <span class="attr">dist</span>: path.join(rootPath, <span class="string">'dist'</span>), <span class="comment">// build 后输出目录</span></div><div class="line">  indexHTML: path.join(src, <span class="string">'index.html'</span>), <span class="comment">// 入口基页</span></div><div class="line">  staticDir: path.join(rootPath, <span class="string">'static'</span>) <span class="comment">// 无需处理的静态资源目录</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">commonPath</span>: commonPath,</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="attr">app</span>: path.join(src, <span class="string">'app.js'</span>),</div><div class="line"></div><div class="line">    <span class="comment">// ================================</span></div><div class="line">    <span class="comment">// 框架 / 类库 分离打包</span></div><div class="line">    <span class="comment">// ================================</span></div><div class="line">    vendor: [</div><div class="line">      <span class="string">'history'</span>,</div><div class="line">      <span class="string">'lodash'</span>,</div><div class="line">      <span class="string">'react'</span>,</div><div class="line">      <span class="string">'react-dom'</span>,</div><div class="line">      <span class="string">'react-redux'</span>,</div><div class="line">      <span class="string">'react-router'</span>,</div><div class="line">      <span class="string">'react-router-redux'</span>,</div><div class="line">      <span class="string">'redux'</span>,</div><div class="line">      <span class="string">'redux-thunk'</span></div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: path.join(commonPath.dist, <span class="string">'static'</span>),</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'/static/'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.jsx'</span>],</div><div class="line">    <span class="attr">alias</span>: &#123;</div><div class="line">      <span class="comment">// ================================</span></div><div class="line">      <span class="comment">// 自定义路径别名</span></div><div class="line">      <span class="comment">// ================================</span></div><div class="line">      STORE: path.join(src, <span class="string">'redux/store'</span>),</div><div class="line">      <span class="attr">ROUTE</span>: path.join(src, <span class="string">'routes'</span>),<span class="comment">//对应src/routers文件夹  </span></div><div class="line">    &#125;</div><div class="line">  &#125;, </div><div class="line">&#125;;</div><div class="line"></div><div class="line"> resolveLoader: &#123;</div><div class="line">    <span class="attr">root</span>: path.join(rootPath, <span class="string">'node_modules'</span>)</div><div class="line">  &#125;,</div></pre></td></tr></table></figure>
<h2 id="3一旦根据上述规则解析路径之后-解析器将检查路径是否指向文件或者目录"><a href="#3一旦根据上述规则解析路径之后-解析器将检查路径是否指向文件或者目录" class="headerlink" title="3一旦根据上述规则解析路径之后,解析器将检查路径是否指向文件或者目录"></a>3一旦根据上述规则解析路径之后,解析器将检查路径是否指向文件或者目录</h2><ul>
<li><p>文件 : 如果以上提到的路径(相对路径,模块路径,绝对路径),指向的是一个文件 </p>
<ul>
<li>如果文件具有文件扩展名,则将文件直接打包</li>
<li>否则将使用[resolve.extensions]作为文件扩展名来解析,此选项告诉解析器在解析的时候能够接受那些扩展名</li>
</ul>
</li>
<li><p>文件夹 : 如果路径指向的是一个文件夹</p>
<ul>
<li><p>如果文件夹中包含 <code>package.json</code> 文件，则按照顺序查找 <a href="https://doc.webpack-china.org/configuration/resolve/#resolve-mainfields" target="_blank" rel="external"><code>resolve.mainFields</code></a> 配置选项中指定的字段。并且 <code>package.json</code> 中的第一个这样的字段确定文件路径。</p>
</li>
<li><p>If there is no <code>package.json</code> or if the main fields do not return a valid path, file names specified in the <a href="https://doc.webpack-china.org/configuration/resolve/#resolve-mainfiles" target="_blank" rel="external"><code>resolve.mainFiles</code></a> configuration option are looked for in order, to see if a matching filename exists in the imported/required directory .</p>
<p>如果目录中没有package.json文件,那么将会根据reslove(解析对象)中的默认配置resolve.mainFiles中的配置文件名去该目录中解析配置的文件名,默认配置如下 .</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mainFiles: [&quot;index&quot;]</div></pre></td></tr></table></figure>
<p>也就是说会import  index文件,该文件的导出的对象.</p>
</li>
<li><p>The file extension is then resolved in a similar way using the <code>resolve.extensions</code> option.</p>
</li>
</ul>
</li>
</ul>
<h3 id="4-loaders的解析规则"><a href="#4-loaders的解析规则" class="headerlink" title="4 loaders的解析规则"></a>4 loaders的解析规则</h3><p>loader解析遵循与文件解析器指定的规则相同.</p>
<p><strong>但是resolveloader配置选项可以用来为Loader提供独立的解析规则</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">resolveloader : &#123;</div><div class="line">    <span class="attr">modules</span>: [<span class="string">"node_modules"</span>],</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">".js"</span>, <span class="string">".json"</span>],</div><div class="line">    <span class="attr">mainFields</span>: [<span class="string">"loader"</span>, <span class="string">"main"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="5-从缓存中解析模块"><a href="#5-从缓存中解析模块" class="headerlink" title="5 从缓存中解析模块"></a>5 从缓存中解析模块</h3><p>Every filesystem access is cached, so that multiple parallel or serial requests to the same file occur faster. In <a href="https://webpack.js.org/configuration/watch/#watch" target="_blank" rel="external">watch mode</a>, only modified files are evicted from the cache. If watch mode is off, then the cache gets purged before every compilation.</p>
<p>每一个文件都会被缓存,所以对于同一文件的并行的请求将可以更快的请求到模块,在观察者模式下,只用改变了的文件将会从缓存中抽出,如果观察者模式关闭,那么每次编译之前都会清理缓存.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/09/210React-Component/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/09/210React-Component/" itemprop="url">
                  React-Component
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-09T12:36:00+08:00">
                2017-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/09/212React创建组件的三种方式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/09/212React创建组件的三种方式/" itemprop="url">
                  React创建组件的三种方式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-09T12:36:00+08:00">
                2017-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-React-createClass"><a href="#1-React-createClass" class="headerlink" title="1 React.createClass( )"></a>1 React.createClass( )</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> HelloWorld = React.createClass(&#123; <span class="attr">render</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span></div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;this.props.name1&#125;</span></div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>hello &#123;this.props.name2&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    &#125; &#125;) ;</div><div class="line">    ReactDOM.render(</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">name1</span>=<span class="string">'Jhon'</span> <span class="attr">name2</span>=<span class="string">"JiM"</span> /&gt;</span>, </span></div><div class="line">      document.getElementById('root') </div><div class="line">    )</div><div class="line"></div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="2-React-Component"><a href="#2-React-Component" class="headerlink" title="2 React.Component"></a>2 React.Component</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/babel'</span>&gt;</span><span class="javascript"></span></div><div class="line">     <span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">         render()&#123;</div><div class="line">             <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line">         &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span> = <span class="string">'JiM'</span>/&gt;</span></span></div><div class="line">     ReactDOM.render(</div><div class="line">         element,</div><div class="line">         document.getElementById('root')</div><div class="line">     )</div><div class="line"></div><div class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="3-function"><a href="#3-function" class="headerlink" title="3 function"></a>3 function</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">import React from 'react'</div><div class="line">import &#123;</div><div class="line">  BrowserRouter as Router,</div><div class="line">  Route,</div><div class="line">  Link</div><div class="line">&#125; from 'react-router-dom'</div><div class="line">const Repo = ()=&gt;(<span class="tag">&lt;<span class="name">div</span>&gt;</span>this is Repo<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)</div><div class="line">const Category = (props)=&gt;&#123;</div><div class="line">  console.log(props);</div><div class="line">  return (<span class="tag">&lt;<span class="name">div</span>&gt;</span>this is category<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)</div><div class="line">&#125;</div><div class="line">const MyTest =()=&gt;(</div><div class="line">  <span class="tag">&lt;<span class="name">Router</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/about'</span>&gt;</span>About<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'./repo'</span>&gt;</span>Repo<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      </div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'./category'</span>&gt;</span>Category<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/about'</span> <span class="attr">render</span>=<span class="string">&#123;(props)</span>=&gt;</span>&#123;console.log(props);return (<span class="tag">&lt;<span class="name">div</span>&gt;</span>this is aabout<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)</div><div class="line">      &#125;&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/repo'</span> <span class="attr">component</span>=<span class="string">&#123;Repo&#125;</span>&gt;</span> <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">exact</span> <span class="attr">path</span>=<span class="string">'/category'</span> <span class="attr">component</span>=<span class="string">&#123;Category&#125;</span>&gt;</span> <span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">    </div><div class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">children</span>=<span class="string">&#123;(props)</span>=&gt;</span>&#123;console.log(props);return (<span class="tag">&lt;<span class="name">div</span>&gt;</span>this is a component build througth children<span class="tag">&lt;/<span class="name">div</span>&gt;</span>)</div><div class="line">      &#125;&#125;&gt;<span class="tag">&lt;/<span class="name">Route</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  </div><div class="line">  </div><div class="line">  <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></div><div class="line">)</div><div class="line">export default MyTest</div></pre></td></tr></table></figure>
<p>ES6一般写法</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> BasicExample = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;ul&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/"&gt;Home&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/about"&gt;About&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to="/topics"&gt;Topics&lt;/Link&gt;&lt;/li&gt;</div><div class="line">      &lt;/ul&gt;</div><div class="line"></div><div class="line">      &lt;hr/&gt;</div><div class="line"></div><div class="line">      &lt;Route exact path="/" component=&#123;Home&#125;/&gt;</div><div class="line">      &lt;Route path="/about" component=&#123;About&#125;/&gt;</div><div class="line">      &lt;Route path="/topics" component=&#123;Topics&#125;/&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">)</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/09/211React概览/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/09/211React概览/" itemprop="url">
                  React概览
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-09T12:36:00+08:00">
                2017-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-React中有什么顶层API"><a href="#1-React中有什么顶层API" class="headerlink" title="1 React中有什么顶层API"></a>1 React中有什么顶层API</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'../build/react-0.13.4.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="built_in">console</span>.log(React);    </div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>控制台输出就是如下React对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> React = &#123;</div><div class="line">  <span class="attr">Children</span>: &#123;</div><div class="line">    <span class="attr">map</span>: ReactChildren.map,</div><div class="line">    <span class="attr">forEach</span>: ReactChildren.forEach,</div><div class="line">    <span class="attr">count</span>: ReactChildren.count,</div><div class="line">    <span class="attr">only</span>: onlyChild</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">Component</span>: ReactComponent,</div><div class="line">  <span class="attr">DOM</span>: ReactDOM,</div><div class="line">  <span class="attr">PropTypes</span>: ReactPropTypes,</div><div class="line">  <span class="attr">initializeTouchEvents</span>: <span class="function"><span class="keyword">function</span>(<span class="params">shouldUseTouch</span>) </span>&#123;</div><div class="line">    EventPluginUtils.useTouchEvents = shouldUseTouch;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">createClass</span>: ReactClass.createClass,</div><div class="line">  <span class="attr">createElement</span>: createElement,</div><div class="line">  <span class="attr">cloneElement</span>: cloneElement,</div><div class="line">  <span class="attr">createFactory</span>: createFactory,</div><div class="line">  <span class="attr">createMixin</span>: <span class="function"><span class="keyword">function</span>(<span class="params">mixin</span>) </span>&#123;</div><div class="line">    <span class="comment">// Currently a noop. Will be used to validate and trace mixins.</span></div><div class="line">    <span class="keyword">return</span> mixin;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">constructAndRenderComponent</span>: ReactMount.constructAndRenderComponent,</div><div class="line">  <span class="attr">constructAndRenderComponentByID</span>: ReactMount.constructAndRenderComponentByID,</div><div class="line">  <span class="attr">findDOMNode</span>: findDOMNode,</div><div class="line">  <span class="attr">render</span>: render,</div><div class="line">  <span class="attr">renderToString</span>: ReactServerRendering.renderToString,</div><div class="line">  <span class="attr">renderToStaticMarkup</span>: ReactServerRendering.renderToStaticMarkup,</div><div class="line">  <span class="attr">unmountComponentAtNode</span>: ReactMount.unmountComponentAtNode,</div><div class="line">  <span class="attr">isValidElement</span>: ReactElement.isValidElement,</div><div class="line">  <span class="attr">withContext</span>: ReactContext.withContext,</div><div class="line"></div><div class="line">  <span class="comment">// Hook for JSX spread, don't use this for anything else.</span></div><div class="line">  __spread: assign</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="顶层API的一般用法"><a href="#顶层API的一般用法" class="headerlink" title="顶层API的一般用法"></a>顶层API的一般用法</h3><h4 id="createElement"><a href="#createElement" class="headerlink" title="createElement( )"></a>createElement( )</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">React.createElement(</div><div class="line">  type,</div><div class="line">  [props],</div><div class="line">  [...children]</div><div class="line">)</div></pre></td></tr></table></figure>
<p>平常我们用 jsx 写的<code>&lt;Hello /&gt;</code> 其实就是对CreateElement函数的封装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;this.props.toWhat&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Hello</span> <span class="attr">toWhat</span>=<span class="string">"World"</span> /&gt;</span>,</span></div><div class="line">  document.getElementById('root')</div><div class="line">);</div></pre></td></tr></table></figure>
<p>等价于</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> React.createElement(<span class="string">'div'</span>, <span class="literal">null</span>, <span class="string">`Hello <span class="subst">$&#123;<span class="keyword">this</span>.props.toWhat&#125;</span>`</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  React.createElement(Hello, &#123;<span class="attr">toWhat</span>: <span class="string">'World'</span>&#125;, <span class="literal">null</span>),</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'root'</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<h4 id="React-Component"><a href="#React-Component" class="headerlink" title="React.Component( )"></a>React.Component( )</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeting</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-ReactDOM"><a href="#2-ReactDOM" class="headerlink" title="2 ReactDOM"></a>2 ReactDOM</h3><h4 id="ReactDOM-render"><a href="#ReactDOM-render" class="headerlink" title="ReactDOM.render()"></a>ReactDOM.render()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ReactDOM.render(</div><div class="line">  element,</div><div class="line">  container,</div><div class="line">  [callback]</div><div class="line">)</div></pre></td></tr></table></figure>
<ul>
<li>该方法将在我们提供的container中渲染一个React元素</li>
<li>如果可选择的callback被提供了,那么在组件渲染完毕之后,就可以执行callback函数</li>
<li>React将会替换我们提供的container中的所有元素为ReactElement(如果原来的容器有子元素的话)</li>
</ul>
<h4 id="unmountComponentAtNode"><a href="#unmountComponentAtNode" class="headerlink" title="unmountComponentAtNode( )"></a>unmountComponentAtNode( )</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ReactDOM.unmountComponentAtNode(container)</div></pre></td></tr></table></figure>
<p>Remove a mounted React component from the DOM and clean up its event handlers and state. If no component was mounted in the container, calling this function does nothing. Returns <code>true</code> if a component was unmounted and <code>false</code> if there was no component to unmount.</p>
<h4 id="findDOMNode"><a href="#findDOMNode" class="headerlink" title="findDOMNode( )"></a>findDOMNode( )</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ReactDOM.findDOMNode(component)</div></pre></td></tr></table></figure>
<p>If this component has been mounted into the DOM, this returns the corresponding native browser DOM element. This method is useful for reading values out of the DOM, such as form field values and performing DOM measurements. <strong>In most cases, you can attach a ref to the DOM node and avoid using findDOMNode at all.</strong> When <code>render</code> returns <code>null</code> or <code>false</code>, <code>findDOMNode</code> returns <code>null</code>.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/09/213React-router-Foundation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiM-W">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JiM-W">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/09/213React-router-Foundation/" itemprop="url">
                  React-router Foundation
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-09T12:36:00+08:00">
                2017-05-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考此文章,具体的demo以及相关配置都有,大家可以直接看这个即可,我写的只是为了让自己理解深刻</p>
<p><a href="https://github.com/reactjs/react-router-tutorial/tree/master/lessons" target="_blank" rel="external">react-router-tutorial</a></p>
<h3 id="1-React-Router用来配合React来使用-对于不同的组件-根据不同的url地址进行不同的组件的渲染"><a href="#1-React-Router用来配合React来使用-对于不同的组件-根据不同的url地址进行不同的组件的渲染" class="headerlink" title="1 React-Router用来配合React来使用,对于不同的组件,根据不同的url地址进行不同的组件的渲染"></a>1 React-Router用来配合React来使用,对于不同的组件,根据不同的url地址进行不同的组件的渲染</h3><p>还是从本质上先大概了解下Router和Route分别是什么 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Router, Route, hashHistory &#125; <span class="keyword">from</span> <span class="string">'react-router'</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Router'</span>,Router);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Route'</span>,Route);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Router function (props, context, updater) &#123;</div><div class="line">	      // This constructor is overridden by mocks. The argument is used</div><div class="line">	      // by mocks to assert on what gets mounted.</div><div class="line"></div><div class="line">	      if (process.env.NODE_ENV !== &apos;production…</div><div class="line">Route function (props, context, updater) &#123;</div><div class="line">	      // This constructor is overridden by mocks. The argument is used</div><div class="line">	      // by mocks to assert on what gets mounted.</div><div class="line"></div><div class="line">	      if (process.env.NODE_ENV !== &apos;production…</div></pre></td></tr></table></figure>
<p>可以看出,它们也是一般的组件创建函数,然后通过类似于下面的方法进行调用即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">history</span>=<span class="string">&#123;hashHistory&#125;</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">"/"</span> <span class="attr">component</span>=<span class="string">&#123;App&#125;/</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/about'</span> <span class="attr">component</span>=<span class="string">&#123;About&#125;/</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">'/repo'</span> <span class="attr">component</span>=<span class="string">&#123;Repo&#125;/</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></div></pre></td></tr></table></figure>
<p>最终实现的功能就会根据不同的路由渲染不同的组件</p>
<h3 id="2-如上实现根据不同的url地址的实现方案-需要我们在地址栏手动输入相关地址-才可以访问-这个时候Link组件"><a href="#2-如上实现根据不同的url地址的实现方案-需要我们在地址栏手动输入相关地址-才可以访问-这个时候Link组件" class="headerlink" title="2 如上实现根据不同的url地址的实现方案,需要我们在地址栏手动输入相关地址,才可以访问,这个时候Link组件"></a>2 如上实现根据不同的url地址的实现方案,需要我们在地址栏手动输入相关地址,才可以访问,这个时候Link组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">import &#123;Link&#125; from 'react-router'</div><div class="line">console.log('Link',Link);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Link function (props, context, updater) &#123;</div><div class="line">	      // This constructor is overridden by mocks. The argument is used</div><div class="line">	      // by mocks to assert on what gets mounted.</div><div class="line"></div><div class="line">	      if (process.env.NODE_ENV !== &apos;production…</div></pre></td></tr></table></figure>
<p>其实我们发现 Router  Route   Link等也都是一些组件而已,实现的功能就是根据不同的url地址进行不同组件的渲染.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123;Link&#125; <span class="keyword">from</span> <span class="string">'react-router'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Link'</span>,Link);</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>React Router Tutorial<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">role</span> = <span class="string">'nav'</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/about'</span>&gt;</span>About<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">'/repo'</span>&gt;</span>Repo<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Link组件的作用和我们平常用的<code>&lt;a&gt;</code>标签的作用大同小异 .</p>
<p>同样我们也可以封装一个Link ,该link可以有一些样式,以后在这个组件就可以被复用.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// modules/NavLink.js</div><div class="line">import React from &apos;react&apos;</div><div class="line">import &#123; Link &#125; from &apos;react-router&apos;</div><div class="line"></div><div class="line">export default React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    return &lt;Link &#123;...this.props&#125; activeClassName=&quot;active&quot;/&gt;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="3-React-router的工作-原理其实-就是根据url地址栏不同的地址-然后可以渲染不同的组件"><a href="#3-React-router的工作-原理其实-就是根据url地址栏不同的地址-然后可以渲染不同的组件" class="headerlink" title="3 React-router的工作 原理其实 就是根据url地址栏不同的地址,然后可以渲染不同的组件"></a>3 React-router的工作 原理其实 就是根据url地址栏不同的地址,然后可以渲染不同的组件</h3><p>在路由中 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">this.props.children</div></pre></td></tr></table></figure>
<p>至关重要,理解它就算基本上理解了路由的基本原理</p>
<p>先贴上参考链接吧 <a href="https://github.com/xianyulaodi/React-router" target="_blank" rel="external">xianyulaodi</a></p>
<p>App组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">const App=React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    return (</div><div class="line"></div><div class="line">    	&lt;div className=&quot;mp_wrap bui_wrap&quot;&gt;</div><div class="line">			&#123;/**主屏幕**/&#125;</div><div class="line">			&lt;div className=&quot;mp_pagebox_home&quot;&gt;</div><div class="line">				</div><div class="line">				&#123;/**这里面的内容会被子路由给代替**/&#125;</div><div class="line">				&#123;this.props.children&#125;</div><div class="line">				&#123;/**注意这个this.props.children**/&#125;</div><div class="line">				&#123;/**公共页脚**/&#125;</div><div class="line">				&lt;div className=&quot;mp_page_footer&quot;&gt;</div><div class="line">					 &lt;Footer  /&gt;</div><div class="line">				&lt;/div&gt;</div><div class="line">				&#123;/**公共页脚**/&#125;</div><div class="line">			&lt;/div&gt;</div><div class="line">			&#123;/**主屏幕**/&#125;</div><div class="line">		&lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>路由的配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">render((</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;Route path=&quot;/&quot; component=&#123;App&#125;&gt;</div><div class="line">      &lt;IndexRoute component=&#123;Index&#125; /&gt;</div><div class="line"></div><div class="line">      &lt;Route path=&quot;/type/:typeName&quot; component=&#123;Type&#125; /&gt;</div><div class="line"></div><div class="line">      &lt;Route path=&quot;/mall&quot; component=&#123;Mall&#125;&gt;</div><div class="line">          &lt;Route path=&quot;type/:typeName&quot; component=&#123;Type&#125; /&gt;</div><div class="line">      &lt;/Route&gt;</div><div class="line"></div><div class="line">      &lt;Route path=&quot;/my&quot; component=&#123;My&#125;&gt;</div><div class="line">           &lt;IndexRoute component=&#123;MyNav&#125; /&gt;</div><div class="line">           &lt;Route path=&quot;userCenter&quot; component=&#123;MyUserCenter&#125; /&gt;</div><div class="line">           &lt;Route path=&quot;memberClub&quot; component=&#123;MemberClub&#125; /&gt;</div><div class="line">      &lt;/Route&gt;</div><div class="line"></div><div class="line">      &lt;Route path=&quot;/circle&quot; component=&#123;Circle&#125;&gt;</div><div class="line">          &lt;IndexRoute component=&#123;CircleType&#125; /&gt;</div><div class="line">          &lt;Route path=&quot;tip/:tipName&quot; component=&#123;CircleTip&#125; /&gt;</div><div class="line">          &lt;Route path=&quot;say&quot; component=&#123;CircleSay&#125; /&gt;</div><div class="line">      &lt;/Route&gt;</div><div class="line"></div><div class="line">    &lt;/Route&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">), document.getElementById(&apos;index&apos;))</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;/**这里面的内容会被子路由给代替**/&#125;</div><div class="line">&#123;this.props.children&#125;</div><div class="line">&#123;/**注意这个this.props.children**/&#125;</div></pre></td></tr></table></figure>
<p>在这里面 this.props.children会更具不同的url地址加载不同的组件</p>
<ul>
<li><p>默认加载的组件是Index</p>
</li>
<li><p>如果url  是  /my   ,那么就会加载  My组件</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">这里是my.js文件,也就是my组件</div><div class="line">var Content= React.createClass(&#123;</div><div class="line"></div><div class="line">	render()&#123;</div><div class="line">		</div><div class="line">		return (</div><div class="line">				&lt;div className = &apos;myWrap&apos;&gt;	</div><div class="line">					&#123;this.props.children&#125;</div><div class="line">				&lt;/div&gt;</div><div class="line">		)</div><div class="line">	&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
</li>
<li><p>my组件在渲染的时候,默认渲染的是MyNav组件,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;/my&quot; component=&#123;My&#125;&gt;</div><div class="line">  &lt;IndexRoute component=&#123;MyNav&#125; /&gt;</div><div class="line">  &lt;Route path=&quot;userCenter&quot; component=&#123;MyUserCenter&#125; /&gt;</div><div class="line">  &lt;Route path=&quot;memberClub&quot; component=&#123;MemberClub&#125; /&gt;</div><div class="line">&lt;/Route&gt;</div></pre></td></tr></table></figure>
<p>如果url地址栏是/my/userCenter,则会加载MyUserCenter组件</p>
<p><strong>所以要理解路由的匹配原理</strong></p>
<p>嵌套关系:</p>
<p>中文网的解释：React Router 使用路由嵌套的概念来让你定义 view 的嵌套集合，当一个给定的 URL 被调用时，整个集合中（命中的部分）都会被渲染。</p>
<p>嵌套路由被描述成一种树形结构。React Router 会深度优先遍历整个<a href="http://react-guide.github.io/react-router-cn/docs/guides/basics/docs/Glossary.md#routeconfig" target="_blank" rel="external">路由配置</a>来寻找一个与给定的 URL 相匹配的路由。</p>
<p>什么意思呢。上面的入口文件中，可以看到，其他路由都是最外层那个app（也就是这个 <code>&lt;Route path=&quot;/&quot; component={App}&gt;</code>）的子路由，其他路由都是嵌套在这里面。</p>
<p>当url变化是，它里面的{this.props.children}都会替换，也就是所谓的整个集合的命中部分都会被渲染。</p>
<p>路径语法:</p>
<p>路由路径是匹配一个（或一部分）URL 的 <a href="http://react-guide.github.io/react-router-cn/docs/guides/basics/docs/Glossary.md#routepattern" target="_blank" rel="external">一个字符串模式</a>。大部分的路由路径都可以直接按照字面量理解，除了以下几个特殊的符号：</p>
</li>
</ul>
<ul>
<li><p><code>:paramName</code> – 匹配一段位于 <code>/</code>、<code>?</code> 或 <code>#</code> 之后的 URL。 命中的部分将被作为一个<a href="http://react-guide.github.io/react-router-cn/docs/guides/basics/docs/Glossary.md#params" target="_blank" rel="external">参数</a></p>
<ul>
<li><code>()</code> – 在它内部的内容被认为是可选的</li>
<li><code>*</code> – 匹配任意字符（非贪婪的）直到命中下一个字符或者整个 URL 的末尾，并创建一个 <code>splat</code> <a href="http://react-guide.github.io/react-router-cn/docs/guides/basics/docs/Glossary.md#params" target="_blank" rel="external">参数</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;/hello/:name&quot;&gt;         // 匹配 /hello/michael 和 /hello/ryan</div><div class="line">&lt;Route path=&quot;/hello(/:name)&quot;&gt;       // 匹配 /hello, /hello/michael 和 /hello/ryan</div><div class="line">&lt;Route path=&quot;/files/*.*&quot;&gt;           // 匹配 /files/hello.jpg 和 /files/path/to/hello.jpg</div></pre></td></tr></table></figure>
<p>如果一个路由使用了相对<code>路径</code>，那么完整的路径将由它的所有祖先节点的<code>路径</code>和自身指定的相对<code>路径</code>拼接而成。<a href="http://react-guide.github.io/react-router-cn/docs/guides/basics/RouteConfiguration.html#decoupling-the-ui-from-the-url" target="_blank" rel="external">使用绝对<code>路径</code></a>可以使路由匹配行为忽略嵌套关系。</p>
</li>
</ul>
<h3 id="4-路由中的参数传递"><a href="#4-路由中的参数传递" class="headerlink" title="4 路由中的参数传递"></a>4 路由中的参数传递</h3><p>render/app.js中</p>
<p>注意此时的 : 冒号后面的变量就可 以通过 this.props.params</p>
<p>1 通过如下这种方式定义变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;/type/:typeName&quot; component=&#123;Type&#125; /&gt;</div></pre></td></tr></table></figure>
<p>上面这行route配置 , : typeName是一个变量 , 对于不同的变量值 , 在Type中该变量值可以通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">this.props.params</div></pre></td></tr></table></figure>
<p>来获取.</p>
<p>Type组件中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">const &#123; typeName &#125; = this.props.params</div><div class="line">&lt;h2&gt;&#123;typeName&#125;&lt;/h2&gt;</div><div class="line">&lt;Link to=&quot;/type/饼干&quot;&gt;</div><div class="line">    &lt;p className=&quot;icon icon1&quot;&gt;&lt;/p&gt;</div><div class="line">    &lt;p className=&quot;bui_ta_c bui_tc_gray&quot;&gt;饼干&lt;/p&gt;</div><div class="line">&lt;/Link&gt;</div></pre></td></tr></table></figure>
<p>当我们点击Link标签的时候,h2中既可以获取到此时</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="JiM-W" />
          <p class="site-author-name" itemprop="name">JiM-W</p>
           
              <p class="site-description motion-element" itemprop="description">keep fighting！</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">194</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">52</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">89</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JiM-W</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
